<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Whispir API Documentation</title>
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["go","xml"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/whispir.io_Logo_Negative.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="go">json</a>
              <a href="#" data-language-name="xml">xml</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://whispir.io/register'>Create an API Key</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
        <h1 id="whispir-api">Whispir API</h1>

<blockquote>
<p>API Endpoint</p>
</blockquote>
<pre><code class="highlight plaintext">https://api.whispir.com
</code></pre>

<blockquote>
<p>API Authorization</p>

<blockquote>
<p>Users must use an <strong>API Key</strong> and <strong>Authorization Header</strong> to access the Whispir API. These are available by signing up for a free trial at <a href="https://whispir.io">whispir.io</a>.</p>
</blockquote>

<p>Summary of Resources</p>

<blockquote>
<p>The following resource endpoints are accessible when using the Whispir API. </p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">/messages
/messages/:id/messagestatus
/messages/:id/messageresponses
/templates
/responserules
/contacts
/distributionlists
/scenarios
/events
/imports
/resources
/activities
/users
/customlists
/callbacks
/workspaces
</code></pre>

<blockquote>
<blockquote>
<p><strong>Note:</strong> The <strong>events</strong> endpoint is only available for users with the Events Module.</p>
</blockquote>

<p>Example Request</p>
</blockquote>
<pre><code class="highlight shell"><span class="c"># Authorization and apikey are provided in the registration processes</span>
curl -H <span class="s2">"Authorization: Basic &lt;YOUR AUTHORIZATION HEADER&gt;"</span> 
     https://api.whispir.com/messages?apikey<span class="o">=</span>&lt;YOUR API KEY&gt;
</code></pre>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 200 OK
</code></pre>
<pre><code class="highlight shell">&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span> <span class="nv">standalone</span><span class="o">=</span><span class="s2">"yes"</span>?&gt;
&lt;ns2:return xmlns:ns2<span class="o">=</span><span class="s2">"http://schemas.api.whispir.com/dap"</span> xmlns:ns3<span class="o">=</span><span class="s2">"http://schemas.api.whispir.com"</span>&gt;
    &lt;status&gt;No records found&lt;/status&gt;
&lt;/ns2:return&gt;
</code></pre>

<p>Built by developers, for developers, Whispir is the place where you can easily build communications into your app – SMS, email, push, voice, chat, web, social, &amp; rich messages.</p>

<p>The Whispir API gives developers the ability to:</p>

<ul>
<li>Create, send and retrieve multi-channel messages over 8 different channels</li>
<li>Invoke scenario based communications for quick, effective and targeted communications</li>
<li>Publish messages to internal or external web pages, RSS feeds and social networks</li>
<li>Asynchronously receive all responses to a given message and perform analysis on the data</li>
</ul>

<h3 id="communications-template-api">Communications Template API</h3>

<p>The Whispir.io Template API gives developers the ability to:</p>

<ul>
<li>Create rich, cross-channel message templates that can be managed by designers within the Whispir Rich Message Studio.</li>
<li>Ensure a DRY (don&rsquo;t repeat yourself) pattern within developer code by separating the communication content from code </li>
<li>Reduce code change by managing content elsewhere</li>
</ul>

<h3 id="event-management-api">Event Management API</h3>

<p>The Whispir.io API Event Management API provides developers with the tools needed to manage the communication around events that happen:</p>

<ul>
<li>When events occur in your organisation, manage them using Whispir.io</li>
<li>Save different event details; Severity, Priority, Description and Tasks to ensure a path to a seamless resolution</li>
<li>Automatically inform teams through Whispir&rsquo;s integrated cross-channel messaging, ensuring that you know who has received the message, and more importantly; who hasn&rsquo;t</li>
</ul>

<h3 id="contact-management-api">Contact Management API</h3>

<p>The Whispir.io API provides developers with the ability to manage the recipients of their messages:</p>

<ul>
<li>Store contact information in a cloud based highly available and accessible environment</li>
<li>Use standards based methods to create, update, and delete contact information</li>
<li>Build forms to allow contacts to self-register and manage their account, with auto-generated email notifications</li>
<li>Create, update and delete distribution lists that can be accessed for messaging at a later date</li>
</ul>

        <h1 id="getting-started">Getting Started</h1>

<p>Getting started with the Whispir.io API is easy:</p>

<ol>
<li>Register with Whispir.io to create your account - (<a href="https://whispir.io/register">Free 30 Day Trial</a>)</li>
<li>Create an App inside the Whispir.io App Dashboard - (<a href="https://whispir.io/dashboard">App Dashboard</a>)</li>
<li>Check your connectivity to the API</li>
<li>Try it out! Send your first message</li>
</ol>

<h2 id="register-with-whispir">Register with Whispir</h2>

<p>The Whispir.io API is available for all existing Whispir customers to use.  If you&rsquo;re already a Whispir customer, great! Your existing username and password will work straight away.  You don&rsquo;t even need to contact us.</p>

<p>Simply log in to (<a href="https://whispir.io/login">whispir.io</a>) and create an app inside the app dashboard.</p>

<p>If you&rsquo;re a new customer and are interested in using the API, sign up for our (<a href="https://whispir.io/register">Free 30 Day Trial</a>). No Credit Card Required.  </p>

<h2 id="create-an-app">Create an app</h2>

<p>Follow these simple steps to create your first Whispir.io Application.</p>

<ol>
<li><p>Log in to the (<a href="https://whispir.io/login">whispir.io dashboard</a>).</p></li>
<li><p>If you haven&rsquo;t validated your e-mail address, you&rsquo;ll need to do this first by clicking the <em>validate</em> link.  This will send you an e-mail.  Simply click the link in the e-mail you receive and your e-mail will be validated.</p></li>
<li><p>You should now see the <em>Create App</em> button at the top of the screen.  Click this button to create your first app.</p></li>
<li><p>You&rsquo;ll need to give your app a <strong>Name</strong> and a <strong>Description</strong>. These help you identify your app within the App Dashboard.  These won&rsquo;t be exposed to the users of your app.</p></li>
<li><p>Click <em>Create</em>. That&rsquo;s it, you&rsquo;ve now created your first Whispir.io App.<br>
An API key will be generated for this application automatically.  You&rsquo;ll need this API key to start making API calls for this application.</p></li>
</ol>

<p>Now that you&rsquo;ve got your App API key, you can check your connectivity to the API using the steps below.</p>

<h2 id="connect-to-the-api">Connect to the API</h2>

<blockquote>
<p>Connect to the API</p>

<blockquote>
<p>Using the information on the left, you can execute the following curl statment: </p>
</blockquote>
</blockquote>
<pre><code class="highlight shell">curl -H <span class="s2">"Authorization: &lt;Your Authorization Header&gt;"</span> 
     https://api.whispir.com?apikey<span class="o">=</span>&lt;Your App API Key&gt;

<span class="c"># with sample values</span>

curl -H <span class="s2">"Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk"</span>  
     https://api.whispir.com?apikey<span class="o">=</span>89asdfohasd89023rsd 

<span class="c"># If all is correct, the following response should be expected (The API defaults to an XML response)</span>

&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span> <span class="nv">standalone</span><span class="o">=</span><span class="s2">"yes"</span>?&gt;
&lt;ns2:company <span class="nv">xmlns</span><span class="o">=</span><span class="s2">"http://schemas.api.whispir.com/dap"</span> 
             xmlns:ns2<span class="o">=</span><span class="s2">"http://schemas.api.whispir.com"</span>&gt;
    &lt;link <span class="nv">method</span><span class="o">=</span><span class="s2">"GET"</span> 
          <span class="nv">rel</span><span class="o">=</span><span class="s2">"retrieveWorkspaces"</span> 
          <span class="nv">uri</span><span class="o">=</span><span class="s2">"https://api.whispir.com/workspaces?apikey=89asdfohasd89023rsd"</span>/&gt;
    ...
&lt;/ns2:company&gt;
</code></pre>

<p>The first thing you&rsquo;ll need to do is generate your <strong>Authorization Header</strong> for your API requests. You&rsquo;ll need to use the Authorization Header on every request that you submit to the Whispir.io API.</p>

<p><strong>Whispir uses Basic HTTP Authentication for all API requests.</strong></p>

<p>You can generate the Authorization header in most programming languages very easily, however for simplicity you can generate it here by filling in the form below. </p>

<p><strong>Note:</strong> Your Whispir authentication information is not submitted or stored, it is only used as part of an algorithm to automatically generate your header. </p>

<p><strong>Whispir Username:</strong>&nbsp;<input id="username" name="username" style="width: 60%; margin-bottom: 3px;" type="text"> <br/>
<strong>Whispir Password:</strong>&nbsp;<input id="password" name="password" style="width: 60%" type="password"></p>

<p><button onclick="doEncode()" name="encode" id="encode">Generate your Authorization Header</button></p>

<p><strong>Authorization Header:</strong>&nbsp;<input id="result" name="result" style="width: 60%" type="text"> <br/></p>

<p>Once you have generated this header, you can use it in a request to the API. This will ensure everything is working correctly. To do this you can use a programming lanugage, a curl script, or a generic REST client.</p>

<h3 id="connect-using-a-programming-language">Connect using a programming language</h3>

<p>Whispir.io provides some basic code samples in a range of languages to assist users in geting started with the API.  Once you have created your App in the Whispir.io Dashboard, simply click on the <em>Code</em> tab on the left side of the screen.</p>

<p>Select the App, and the action that you would like to perform (e.g. Send an SMS message).</p>

<p>This will automatically generate the code for you.  You can copy this code into your IDE, import any required dependencies, and run it.</p>

<p>You will need to replace the following elements of the request:</p>

<ol>
<li>App API Key</li>
<li>Authorization Header</li>
<li>Recipient information</li>
<li>Message Subject</li>
<li>Message Content</li>
</ol>

<p>Once you have verified you have replaced all of these, run the request in your IDE and you will receive your first message using the Whispir.io API.</p>

<h3 id="using-curl">Using cURL</h3>

<p>cURL is a computer software project providing a library and command-line tool for transferring data using various protocols. One key use of cURL is to make HTTP requests.</p>

<p>In order to test your ability to use the Whispir.io API, cURL is a very quick mechanism to enter on to a command line interface and make sure everything is set up correctly.</p>

<p>Generate your Authorization Header using the form above, and using the code snippets in the code panel, you can execute your first request to the Whispir.io API.</p>

<h3 id="using-a-generic-rest-client">Using a generic REST Client</h3>

<p>If you&rsquo;re unsure about using curl, you can install a REST Client in your browser and test the calls through there.  Whispir recommends the following clients:</p>

<ol>
<li><a href="https://www.getpostman.com/">Postman - Chrome/IE</a></li>
<li><a href="https://restclient.net">RESTClient - Firefox</a></li>
</ol>

<p>To test your connectivity, you will need to enter the following parameters:</p>

<ol>
<li>The URL that you would like to request</li>
<li>Your App API Key</li>
<li>Your Authorization Header</li>
<li>(Optional) The Content-Type/Accept Headers</li>
</ol>

<p>The HTTP call will look like the following:</p>

<p><code class="prettyprint">GET https://api.whispir.com?apikey=89asdfohasd89023rsdfhio8923</code></p>

<p>With the following header (as a minimum).</p>

<p><code class="prettyprint">Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk</code></p>

<p>Once you have executed this request, you should receive a <strong>200 OK</strong> response from the REST Client. This means that you have connectivity to the Whispir.io API and can start building your App.</p>

<p>If you received another response, please continue to the next section to understand how to resolve your issues.</p>

<h3 id="resolving-connectivity-issues">Resolving connectivity issues</h3>

<p>If you get a different response than <strong>HTTP 200 OK</strong>, perform the following:</p>

<p><strong>HTTP 403 Forbidden, or HTTP 401 Unauthorized</strong></p>

<ul>
<li>Your Authorization header may not be quite right, verify your username and password browsing to <a href="https://whispir.io">Whispir.io</a> and clicking &lsquo;Log In&rsquo;</li>
<li>If you can successfully log in, then try and re-generate the Base64 encoded username and password using the form above.</li>
<li>If you cannot log in, then it&rsquo;s possible your account isn&rsquo;t active. Contact your Whispir Administrator, or send a message to our support team at <a href="mailto:apisupport@whispir.com">apisupport@whispir.com</a>.</li>
</ul>

<p><strong>Other HTTP errors or no connectivity at all</strong></p>

<ul>
<li>If you&rsquo;re still having issues, please contact us at <a href="mailto:apisupport@whispir.com">apisupport@whispir.com</a>.</li>
</ul>

<h2 id="sending-messages">Sending Messages</h2>

<blockquote>
<p>Sending Messages</p>

<blockquote>
<p>Send your first message using curl.</p>
</blockquote>
</blockquote>
<pre><code class="highlight shell">curl -H <span class="s2">"Authorization: Basic &lt;YOUR AUTH HEADER&gt;"</span> 
     -H <span class="s2">"Content-Type: application/vnd.whispir.message-v1+json"</span> 
     -H <span class="s2">"Accept: application/vnd.whispir.message-v1+json"</span> 
     -d <span class="s1">'{ 
            "to": "&lt;DESTINATION PHONE NUMBER(S)&gt;",
            "subject": "This is the first line of my SMS",
            "body": "This is the content of my SMS"
         }'</span> 
     https://api.whispir.com/messages?apikey<span class="o">=</span>&lt;YOUR API KEY&gt;
</code></pre>

<blockquote>
<blockquote>
<p>Once you submit this, Whispir will send you back an <strong>HTTP 202 Accepted</strong> stating that your request has been accepted for processing.  </p>

<p>Within a few seconds your phone should be buzzing away.</p>
</blockquote>
</blockquote>

<h3 id="sending-messages">Sending Messages</h3>

<p>By now you should be able to connect to the API and can issue requests and receive responses. Based on this, you can now send your first SMS message using the API.</p>

<p>This is very similar to the previous request you executed to test your connectivity, but instead of using an <strong>HTTP GET</strong> to retrieve information, this time you&rsquo;re going to use an <strong>HTTP POST</strong> to ask Whispir to do something. </p>

<p>As you&rsquo;re sending a message, you need to tell Whispir <em>who</em> to send it to, and <em>what</em> the type of content it is.</p>

<p>You&rsquo;re going to use the URL <code class="prettyprint">https://api.whispir.com/messages</code> as the API endpoint. </p>

<h3 id="content-type">Content Type</h3>

<blockquote>
<p>Samples in XML / JSON</p>

<blockquote>
<p>The following example shows how to use a POST request to send the message in XML or JSON.  Use the selector at the top to choose your syntax.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.whispir.com/messages?apikey=89asdfohasd89023rsdfhio8923
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="o">:</span><span class="x"> </span><span class="s">"&lt;DESTINATION PHONE NUMBER&gt;"</span><span class="p">,</span><span class="x"> 
    </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"This is the first line of my SMS"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"This is the content of my SMS"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml
Accept: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>[DESTINATION PHONE NUMBER]<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>This is the first line of my SMS<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;body&gt;</span>This is the content of my SMS<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 

</code></pre>

<p>The next thing you need to do is tell Whispir what information you&rsquo;re sending.  You can just blindly send some XML or JSON content, but life is much easier if Whispir knows exatly what it is you are sending.</p>

<p>You&rsquo;re going to tell Whispir what you are sending by using the <strong>Content-Type</strong> HTTP header.  Your Content-Type header is going to be (either JSON or XML):</p>

<ul>
<li>application/vnd.whispir.message-v1+json</li>
<li>application/vnd.whispir.message-v1+xml</li>
</ul>

<p>This tells Whispir that you are sending content that conforms to Version 1 of the message schema. As Whispir adds more features to each schema, our version numbers will increase, this is described in much more detail later on in the documentation.</p>

<h3 id="sending-messages-using-json-and-xml">Sending messages using JSON and XML</h3>

<p>Once you have successfully sent your SMS message using curl, you can move on to using your application to generate XML or JSON formats for processing.</p>

<p>Be sure to include the correct headers for the desired content type:</p>

<ul>
<li>XML - <code class="prettyprint">application/vnd.whispir.message-v1+xml</code></li>
<li>JSON - <code class="prettyprint">application/vnd.whispir.message-v1+json</code></li>
</ul>

<p>For more information on Messages and all the other Whispir resources please continue through the documentation, or browse straight to Messages resource documentation for more information.</p>

        <h2 id="api-rate-limits">API Rate Limits</h2>

<blockquote>
<p>API Rate Limits</p>

<blockquote>
<p>In the event that Whispir&rsquo;s rate limits are breached, the following error messages will be returned from the Whispir API:</p>
</blockquote>
</blockquote>
<pre><code class="highlight shell"><span class="c"># Over Queries Per Second Limit </span>

GET /messages?apikey<span class="o">=</span>abc38bc83bcd3ucbud83

HTTP 403 Forbidden
X-Mashery-Error-Code: ERR_403_DEVELOPER_OVER_QPS
X-Mashery-Error-Detail: Account Over Queries Per Second Limit

<span class="c"># Over Queries Per Day Limit</span>

GET /messages?apikey<span class="o">=</span>abc38bc83bcd3ucbud83

HTTP 403 Forbidden
X-Mashery-Error-Code: ERR_403_DEVELOPER_OVER_QPD
X-Mashery-Error-Detail: Account Over Queries Per Day Limit
</code></pre>

<p>Whispir&rsquo;s API usage is limited on a per apikey basis using <strong>per second</strong> limit and <strong>per day</strong> limits.</p>

<p>Depending on your Whispir License, you will obtain higher per second and per day rates:</p>

<h3 id="whispir.io-editions">Whispir.io Editions</h3>

<table><thead>
<tr>
<th>Whispir.io Edition</th>
<th>Requests Per Second</th>
<th>Requests Per Day</th>
</tr>
</thead><tbody>
<tr>
<td>Startup API Edition</td>
<td>5 requests per second</td>
<td>10000 requests per day</td>
</tr>
<tr>
<td>Business API Edition</td>
<td>10 requests per second</td>
<td>20000 requests per day</td>
</tr>
<tr>
<td>Enterprise API Edition</td>
<td>30 requests per second</td>
<td>50000 requests per day</td>
</tr>
</tbody></table>

<p>If further calls per second or per day are required for your application, please contact your Whispir Sales Representative, or <a href="https://whispir.io/contact/">Contact Us</a>.</p>

        <h1 id="conventions">Conventions</h1>

<h2 id="api-security">API Security</h2>

<blockquote>
<p>API Security</p>

<blockquote>
<p>Whispir utilises Basic HTTP Authentication over HTTPS to secure the API Requests.</p>
</blockquote>
</blockquote>
<pre><code class="highlight shell">HTTP/1.1 GET https://api.whispir.com/?apikey<span class="o">=</span>ab37bdvs32898dssddsddsfklio
Authorization: Basic frJIUN8DYpKDtOLCwo//yllqDzg<span class="o">=</span>

<span class="c"># Successful Response</span>
HTTP/1.1 200 OK

<span class="c"># Unsuccessful Response (incorrect apikey)</span>
HTTP/1.1 403 Forbidden
&lt;h1&gt;Developer Inactive&lt;/h1&gt;

<span class="c"># Unsuccessful Response (incorrect username / password)</span>
HTTP/1.1 401 Unauthorized

<span class="c"># Unsuccessful Response (no permission to access that resource endpoint)</span>
HTTP/1.1 403 Forbidden
</code></pre>

<p>The Whispir.io API supports multiple methods of authentication to cater for varying client needs.  Authentication is necessary for users of the API to ensure that only valid and legal requests are processed by the Whispir messaging engine.</p>

<h3 id="basic-authentication-over-https">Basic Authentication over HTTPS</h3>

<p>The basic authentication process is offered for use with clients that already have an ‘up and running’ application, and would like to integrate Whispir as a messaging provider in a quick and simple fashion.</p>

<p>Basic access authentication over HTTPS involves the application client sending an encoded Username and Password with when requesting resources from the server.</p>

<p>Clients will also be required to provide the API Key that is provided when the application is registered within Mashery.  This API Key is used to determine the application that is making the request, and whether it is allowed to make requests, it is still within the request thresholds, and is a valid API Key. </p>

<p>Once this has been confirmed, the request is forwarded on to Whispir for Basic authentication processing.</p>

<ul>
<li>If this Username and password is correct, the server will process the request and send back an appropriate response.</li>
<li>If the Username and password is not correct, the server will send back an HTTP 401 (Authorization required).</li>
</ul>

<p><img alt="Basic Authentication" src="https://developer.whispir.com/files/Computer-diagram.png" /></p>

<p>Once Whispir has validated the username and password, the requested resource is returned through Mashery to the application client.</p>

<h3 id="basic-authentication-–-example">Basic Authentication – Example</h3>

<p>A valid request that will be accepted and authenticated by the Whispir messaging engine using Basic authentication is as follows:</p>

<p>The ‘Authorization’ header is comprised of the word <strong>Basic</strong> followed by the base64 representation of the username and password of the user.</p>

<p>More information about HTTP Basic Authentication can be found on <a title="Basic access authentication" href="https://en.wikipedia.org/wiki/Basic_access_authentication">Wikipedia</a>.</p>

<h2 id="restful-architecture">RESTful Architecture</h2>

<p>The Whispir.io API provides interfaces for application clients to utilise Whispir functionality that are platform agnostic, without any dependency on the environment or programming language being used.</p>

<p>Whispir&rsquo;s API supports multiple methods of inbound request over HTTPS, primarily:</p>

<ul>
<li>  XML</li>
<li>  JSON</li>
</ul>

<p>Clients can issue requests using either of the methods, and receive a response in the same format. This allows easy integration with existing and new applications using technologies that are widely supported in a range of languages.</p>

<h3 id="restful-architecture">RESTful Architecture</h3>

<p>The Whispir.io API employs a ‘REST’ (<strong>Re</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer) architecture.  This architecture is the foundation of the World Wide Web and is widely used in application, service and API development.</p>

<p>An application is considered ‘RESTful’ if it conforms to a ‘REST’ architecture.  A ‘REST’ architecture consists of <strong>clients</strong> and <strong>servers</strong>.  The clients initiate requests to the servers, and the servers process the requests and return the appropriate responses.  Requests and responses are structured using defined and addressable <strong>resources</strong>. </p>

<p>Each <strong>resource</strong> within the Whispir API is available through a secure and authenticated URL. </p>

<p><strong>Note:</strong> More information about REST can be found on <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">Wikipedia</a>.</p>

<h2 id="retrieving-objects">Retrieving objects</h2>

<blockquote>
<p>Retrieving objects</p>

<blockquote>
<p>Retrieve all workspaces within your Company</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">HTTP/1.1 GET https://api.whispir.com/workspaces?apikey=bneov3023nfo023rssdf3
</code></pre>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="o">/</span><span class="m">1.1</span><span class="x"> </span><span class="n">GET</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.whispir.com/workspaces?apikey=bneov3023nfo023rssdf3</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>Retrieve all Messages from within the Company</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">HTTP/1.1 GET https://api.whispir.com/messages?apikey=bneov3023nfo023rssdf3
</code></pre>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="o">/</span><span class="m">1.1</span><span class="x"> </span><span class="n">GET</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.whispir.com/messages?apikey=bneov3023nfo023rssdf3</span><span class="x">
</span></code></pre>

<p>Application clients can retrieve lists of resources of a single type through a simple URL. </p>

<p>For example, to retrieve a list of <strong>Workspaces</strong> from within the <strong>Company</strong>, the URL is as follows:</p>

<p><code class="prettyprint">GET https://api.whispir.com/workspaces?apikey=bneov3023nfo023rssdf3</code></p>

<h3 id="retrieving-a-single-object">Retrieving a single object</h3>

<blockquote>
<p>Retrieving a single object</p>

<blockquote>
<p>Retrieve the Workspace with the ID of 12345</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">HTTP/1.1 GET https://api.whispir.com/workspaces/12345?apikey=bneov3023nfo023rssdf3
</code></pre>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="o">/</span><span class="m">1.1</span><span class="x"> </span><span class="n">GET</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.whispir.com/workspaces/12345?apikey=bneov3023nfo023rssdf3</span><span class="x">
</span></code></pre>

<p>Application clients also have access to a single resource by specifying the relevant ID of the resource.  This information would have been returned when retrieving the list of resources as specified above.</p>

<p>To retrieve a single <strong>Workspace</strong> when you know the ID, the URL is as follows:</p>

<p><code class="prettyprint">GET https://api.whispir.com/workspaces/12345?apikey=bneov3023nfo023rssdf3</code></p>

<p>Or to retrieve a single <strong>Contact</strong> when you know the ID, the URL is as follows:</p>

<p><code class="prettyprint">GET https://api.whispir.com/contacts/78910?apikey=bneov3023nfo023rssdf3</code></p>

<blockquote>
<blockquote>
<p>Retrieve the Contact with the ID of 78910</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">HTTP/1.1 GET https://api.whispir.com/contacts/78910?apikey=bneov3023nfo023rssdf3
</code></pre>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="o">/</span><span class="m">1.1</span><span class="x"> </span><span class="n">GET</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.whispir.com/contacts/78910?apikey=bneov3023nfo023rssdf3</span><span class="x">
</span></code></pre>

<h3 id="nested-objects">Nested objects</h3>

<blockquote>
<p>Nested objects</p>

<blockquote>
<p>Retrieve the Contact with the ID 67890 from within the Workspace with ID 12345</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">HTTP/1.1 GET https://api.whispir.com/workspaces/12345/contacts/67890?apikey=bneov3023nfo023rssdf3
</code></pre>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="o">/</span><span class="m">1.1</span><span class="x"> </span><span class="n">GET</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.whispir.com/workspaces/12345/contacts/67890?apikey=bneov3023nfo023rssdf3</span><span class="x">
</span></code></pre>

<p>Within Whispir&rsquo;s resource model, some resources are nested within one another.  For example; </p>

<ul>
<li>The <strong>Company</strong> resource contains many <strong>Workspaces</strong>.  </li>
<li>The <strong>Workspace</strong> resource contains many <strong>Messages</strong>. <br></li>
<li>Each <strong>Message</strong> resource contains a <strong>MessageStatus</strong>.</li>
</ul>

<p>Requests can be <em>nested</em> in order to provide application clients the ability to access specific resources when they are nested.</p>

<p>For example, if you wanted to retrieve a <strong>Contact</strong> from within a <strong>Workspace</strong>, the URL would look as follows:</p>

<p><code class="prettyprint">GET https://api.whispir.com/workspaces/12345/contacts/67890?apikey=bneov3023nfo023rssdf3</code></p>

<h2 id="http-response-codes">HTTP Response Codes</h2>

<p>Application clients that are using Whispir&rsquo;s API will receive HTTP response codes in response to every request that is issued. </p>

<p>The table below describes the response codes that will be issued and gives potential reasons as to why they may have been sent back.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Successful Response Codes</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">200 OK:</td>
            <td><strong>Successful request</strong><br/>
                No further action required.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">201 Created:</td>
            <td><strong>Successfully created the resource.</strong><br/>
                The requested resource has been successfully created and can be found via the URL in the ‘Location’ header
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">202 Accepted:</td>
            <td><strong>Successfully accepted the request for processing</strong><br/>
                The request has been accepted for processing by the asynchronous processor.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">204 No Content:</td>
            <td><strong>Successfully processed the request, but no content was sent back</strong><br/>
                The update (PUT) or delete (DELETE) request has been successfully processed, and no content was returned from the server.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">301 Moved Permanently:</td>
            <td><strong>Successful request, but the resource is no longer available at this location.</strong><br/>
                This resource URL should no longer be used. Check the location header of the response and redirect the request there.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">302 Found:</td>
            <td><strong>Successful request, but the resource is temporarily not available at this location.</strong><br/>
                This resource URL should still be used in future, but for this specific request, check the location header of the response and redirect the request there.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">304 Not modified:</td>
            <td><strong>Content hasn’t changed since last request</strong><br/>
                No action required
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Unsuccessful Response Codes</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">400 Bad Request:</td>
            <td><strong>Invalid or missing request parameters</strong><br/>
                Inspect the request parameters and ensure that all required parameters are supplied.<br/><br/>

                Note the error text in the response and update the request accordingly
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">401 Unauthorized:</td>
            <td><strong>Invalid or no credentials passed in the request</strong><br/>
                Inspect the authorisation header and ensure that a valid authentication has been provided.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">403 Forbidden:</td>
            <td><strong>Authorization credentials passed and accepted but account does not have permission</strong><br/>
                Inspect the authorisation header and ensure that a valid authentication has been provided.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">404 Not Found:</td>
            <td><strong>The requested URL does not exist</strong><br/>
                The requested resource was not found, inspect the ID in the URL that was used and ensure that it is valid.<br/><br/>Also, inspect the Accept and Content-Type headers that are being used to make sure they are correct for the URL that is being requested.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">405 Method not allowed:</td>
            <td><strong>The requested resource does not support the supplied verb</strong><br/>
                Inspect the HTTP method that was used in the request and ensure that it is valid for the resource being requested
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">415 Unsupported Media Type:</td>
            <td><strong>The request was unsuccessful because the requested content type is not supported by the API.</strong><br/>
                The application client can use this response to determine if it is asking for a supported version of a resource.  Upon receiving this response, the client can query the developer documentation to determine the appropriate version for the requested resource.<br/><br/>

                In most cases, this is due to the user not supplying the correct Accept or Content-Type header for the requested URL.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">422 Unprocessable Entity:</td>
            <td><strong>The request is formed correctly, but due to some condition the request cannot be processed e.g. email is required and it is not provided in the request</strong><br/>
                The request did not contain all of the information required to perform this method.  Please check your request for the required fields to be passed in and try again.  The offending fields will be specified in the error text of the response.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">500 Internal Server Error:</td>
            <td><strong>An internal error occurred when processing the request.</strong><br/>
                Attempt the request again and if the HTTP 500 error re-occurs contact <a href="mailto:support@whispir.com">support@whispir.com</a>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">501 Method Not Implemented:</td>
            <td><strong>The HTTP method being used has not yet been implemented for the requested resource.</strong><br/>
                The method being used is not implemented for this resource. Please check the documentation for the specific resource type. 
            </td>
        </tr>
    </tbody>
</table>

<h2 id="content-types-and-versioning">Content Types and Versioning</h2>

<p>The Whispir.io API has been designed and built to support the wide feature set provided in the current version of the Whispir Platform. </p>

<p>In order to manage and incorporate change in future versions of the API, Whispir&rsquo;s API has implemented a versioning structure that allows application clients to choose which version of the API they would like to retrieve their responses from.</p>

<p>This allows new versions to be built and old versions to be supported concurrently, with no impact to clients when changes are made.</p>

<p>Whispir&rsquo;s API achieves this versioning capability by using <strong>Vendor Specific MIME Types (VSMT)</strong>.</p>

<h3 id="without-vsmt">Without VSMT</h3>

<blockquote>
<p>Without VSMT</p>

<blockquote>
<p>A Sample API request that is not using VSMT</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET /workspaces/123/contacts?firstName=Neil&amp;apikey=789264 
Accept: application/xml

HTTP/1.1 200 OK
Content-Type: application/xml
&lt;contact&gt;
   &lt;name&gt;Neil Armstrong&lt;/name&gt;
&lt;/contact&gt;
</code></pre>

<p>This implementation of an API in this manner works correctly, but conceptually it is incorrect.  The issue with this design is the request is only asking for an XML representation of some resource called a Contact, it is not specifically asking for the XML version of a <strong>Contact Resource</strong> as defined by Whispir&rsquo;s API.</p>

<p>Any XML representation of a resource could be passed back e.g. a <strong>Cat</strong> or a <strong>House</strong>, and the client would need to inspect the response to determine whether it is a <strong>Contact</strong> or not through its own means.</p>

<h3 id="with-vsmt">With VSMT</h3>

<blockquote>
<p>With VSMT</p>

<blockquote>
<p>A Sample API request that is uses VSMT</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET /workspaces/123/contacts?firstName=Neil&amp;apikey=789264 
Accept: application/vnd.whispir.contact+xml

HTTP/1.1 200 OK
Content-Type: application/xml
&lt;contact&gt;
   &lt;name&gt;Neil Armstrong&lt;/name&gt;
&lt;/contact&gt;
</code></pre>

<p>By using VSMT, Whispir can define and make available the various content types for resources prior to the requests being made. This allows the application clients to specify the resource that they would like to receive from the API, and Whispir will only return content of that specific type.</p>

<p>For example:</p>

<p>By using this method, the client is specifically asking for a resource representation of a <strong>Contact</strong> that is defined by Whispir&rsquo;s API.  There is no confusion about the representation that will be returned, and the client need not worry about validation as Whispir will only ever return a valid <strong>Contact</strong> as a response to this request.</p>

<p>VSMT also allows the client the ability to choose the language in which their resource representation should be returned.  Using the previous example, the application client was asking for the <strong>Contact</strong> to be returned in <strong>XML</strong>.</p>

<p><code class="prettyprint">Accept: application/vnd.whispir.contact+xml</code></p>

<p>This <strong>Contact</strong> resource could just as easily be returned as a <strong>JSON</strong> object by changing the content type as follows:</p>

<p><code class="prettyprint">Accept: application/vnd.whispir.contact+json</code></p>

<h3 id="with-vsmt-(including-versioning)">With VSMT (including versioning)</h3>

<blockquote>
<p>With VSMT (including versioning)</p>

<blockquote>
<p>Sample request with VSMT and Versioning (V1)</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET /workspaces/123/contacts?firstName=Neil&amp;apikey=789264 
Accept: application/vnd.whispir.contact-v1+xml

HTTP/1.1 200 OK
Content-Type: application/vnd.whispir.contact-v1+xml
&lt;contact&gt;
   &lt;name&gt;Neil Armstrong&lt;/name&gt;
&lt;/contact&gt;
</code></pre>

<blockquote>
<blockquote>
<p>Sample request with VSMT and Versioning (V2)</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET /workspaces/123/contacts?firstName=Neil&amp;apikey=789264 
Accept: application/vnd.whispir.contact-v2+xml

HTTP/1.1 200 OK
Content-Type: application/vnd.whispir.contact-v2+xml
&lt;contact&gt;
   &lt;name&gt;Neil Armstrong&lt;/name&gt;
   &lt;mobile&gt;$mobile&lt;/mobile&gt;
   &lt;email&gt;neil.armstrong@space.com&lt;/email&gt;
&lt;/contact&gt;
</code></pre>

<p>This method of using VSMT also allows the resource representations to be updated, re-written and maintained without any notification required to application clients.</p>

<p>This can be achieved by adding a <strong>version</strong> element to the defined content types.</p>

<p>By versioning the application MIME types, application clients can request the resource representation that their application is built on, e.g. ‘contact-v1’, or ‘workspace-v2’.</p>

<p>Whispir can create new representations of these documents, and the application clients will not be affected by these changes.</p>

<p>The <strong>v2</strong> version of this resource representation can co-exist with the <strong>v1</strong> version, and application clients do not need to worry about their existence.</p>

<h3 id="deprecation-of-versions">Deprecation of Versions</h3>

<p>As the version numbers grow and new features are introduced into the resource representations, it is inevitable that the older versions will become deprecated and no longer supported over an extended period of time.</p>

<p>This process of deprecation will be facilitated using HTTP Status Codes 301 and 415.</p>

<h3 id="list-of-whispir&#39;s-vsmt&#39;s">List of Whispir&rsquo;s VSMT&rsquo;s</h3>

<p>The following table depicts the available mime types that will be accepted through Whispir&rsquo;s API:</p>

<p><strong>Note:</strong> The Mime Type is always <em>Singular</em>. <code class="prettyprint">message-v1</code>, not <code class="prettyprint">messages-v1</code>.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">List of Whispir.io VSMT&rsquo;s</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Workspace:</td>
            <td>XML - application/vnd.whispir.workspace-v1+xml<br/>
                JSON - application/vnd.whispir.workspace-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Message:</td>
            <td>XML - application/vnd.whispir.message-v1+xml<br/>
                JSON - application/vnd.whispir.message-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Message Status:</td>
            <td>XML - application/vnd.whispir.messagestatus-v1+xml<br/>
                JSON - application/vnd.whispir.messagestatus-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Message Responses:</td>
            <td>XML - application/vnd.whispir.messageresponse-v1+xml<br/>
                JSON - application/vnd.whispir.messageresponse-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Message Response Rule:</td>
            <td>XML - application/vnd.whispir.responserule-v1+xml<br/>
                JSON - application/vnd.whispir.responserule-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Message Template:</td>
            <td>XML - application/vnd.whispir.template-v1+xml<br/>
                JSON - application/vnd.whispir.template-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Contact:</td>
            <td>XML - application/vnd.whispir.contact-v1+xml<br/>
                JSON - application/vnd.whispir.contact-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Distribution List:</td>
            <td>XML - application/vnd.whispir.distributionlist-v1+xml<br/>
                JSON - application/vnd.whispir.distributionlist-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Message Scenario:</td>
            <td>XML - application/vnd.whispir.scenario-v1+xml<br/>
                JSON - application/vnd.whispir.scenario-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Event:</td>
            <td>XML - application/vnd.whispir.event-v1+xml<br/>
                JSON - application/vnd.whispir.event-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Asset:</td>
            <td>XML - application/vnd.whispir.asset-v1+xml<br/>
                JSON - application/vnd.whispir.asset-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Custom List:</td>
            <td>XML - application/vnd.whispir.customlist-v1+xml<br/>
                JSON - application/vnd.whispir.customlist-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Activity Log:</td>
            <td>XML - application/vnd.whispir.activity-v1+xml<br/>
                JSON - application/vnd.whispir.activity-v1+json
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">User:</td>
            <td>XML - application/vnd.whispir.user-v1+xml<br/>
                JSON - application/vnd.whispir.user-v1+json
            </td>
        </tr>
    </tbody>
</table>

<h2 id="pagination">Pagination</h2>

<blockquote>
<p>Pagination</p>

<blockquote>
<p>Request for the first page of messages:</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET https://api.whispir.com/?apikey=sbdsfd0sa09fds&amp;limit=20&amp;offset=0
</code></pre>

<blockquote>
<blockquote>
<p>Request for the second page of messages (note the offset is now 20):</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP/1.1 GET https://api.whispir.com/?apikey=sbdsfd0sa09fds&amp;limit=20&amp;offset=20
</code></pre>

<p>Requests that contain multiple items will be paginated by default.</p>

<p>Each page will provide a maximum of <strong>20</strong> items per page.</p>

<p>Two parameters can be used to control the number of items retrieved:</p>

<ul>
<li><code class="prettyprint">limit</code>: the number of rows to be returned (max: 20, default: 20)</li>
<li><code class="prettyprint">offset</code>: the record number to start returning from (default: 0)</li>
</ul>

<p>Most resources will provide these links at the end of the response object in a <code class="prettyprint">link</code> array that supplies links with <code class="prettyprint">rel=next</code> and <code class="prettyprint">rel=prev</code> attributes.</p>

<p>This makes programatic pagination easy as you can simply detect for the presence of these attributes.</p>

<p><strong>Note:</strong> The following resources aren&rsquo;t paginated for ease of use:</p>

<ul>
<li>Workspaces</li>
<li>Scenarios</li>
</ul>

        <h1 id="messages">Messages</h1>

<blockquote>
<p>Messages</p>

<blockquote>
<p>Sample to send an SMS, Email, Voice call, and Web Publishing in one request</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic &lt;YOUR AUTH HEADER&gt;
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Message<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;body&gt;</span>This is the body of my test SMS message<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;email&gt;</span>
        <span class="nt">&lt;body&gt;</span>This is the body of my test Email message<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;footer&gt;</span>This is footer of test email<span class="nt">&lt;/footer&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/email&gt;</span>
    <span class="nt">&lt;voice&gt;</span>
        <span class="nt">&lt;header&gt;</span>test header<span class="nt">&lt;/header&gt;</span>        
        <span class="nt">&lt;body&gt;</span>This is test voice body<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;footer&gt;</span>test footer<span class="nt">&lt;/footer&gt;</span>
        <span class="nt">&lt;type&gt;</span>
            ConfCall:,
            ConfAccountNo:,
            ConfPinNo:,
            ConfModPinNo:,
            Pin:
        <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/voice&gt;</span>
    <span class="nt">&lt;web&gt;</span> 
        <span class="nt">&lt;body&gt;</span>This is web body of my test message<span class="nt">&lt;/body&gt;</span> 
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span> 
    <span class="nt">&lt;/web&gt;</span> 
    <span class="nt">&lt;social&gt;</span>
        <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"social"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;body&gt;</span>Twitter Content.<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;/social&gt;</span>
        <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"social_long"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;body&gt;</span>Facebook Content.<span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;/social&gt;</span>
    <span class="nt">&lt;/social&gt;</span>
    <span class="nt">&lt;type&gt;</span>defaultNoReply<span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test SMS message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test Email message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"footer"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the footer of my message 
                    (generally where a signature would go)"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"header"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the introduction, 
                    read out prior to any key press"</span><span class="p">,</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of the voice call, 
                  read out after the key press"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ConfCall:,
                  ConfAccountNo:,
                  ConfPinNo:,
                  ConfModPinNo:,
                  Pin:"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the content of my web publishing 
                 or Rich Push Message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"social"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Twitter Content."</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"social_long"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Facebook Content."</span><span class="p">,</span><span class="x">
            </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"defaultNoReply"</span><span class="p">,</span><span class="x">
    </span><span class="s">"features"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"pushOptions"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"notifications"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"enabled"</span><span class="p">,</span><span class="x">
            </span><span class="s">"escalationMins"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"3"</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Communications are the core of what the Whispir.io API offers as a service to customers.</p>

<p>Whispir has the ability to send communications across 7 different channels in a single API request:</p>

<p><strong>SMS</strong> - up to 1600&#42; characters per message, premium routes, delivery receipts<br/>
<strong>Email</strong> - free email messaging with HTML and Plain Text support<br/>
<strong>Voice</strong> - high quality outbound voice calls delivered to mobiles and landlines within seconds<br/>
<strong>Rich Messages</strong> - personalised, targeted rich messaging to drive conversations<br/>
<strong>Twitter</strong> - support for instant publishing to multiple twitter accounts<br/>
<strong>Facebook</strong> - simplify the process of publishing to multiple facebook accounts instantaneously<br/>
<strong>RSS</strong> - easily generate RSS feeds for consumption by other services</p>

<p>All communications are driven from the <code class="prettyprint">/messages</code> endpoint within the API.  This endpoint allows a user to perform the following tasks:</p>

<ol>
<li>Create and Send a new message</li>
<li>Retrieve a list of previously sent messages</li>
</ol>

<p>These are described in more detail below:</p>

<p>As message resources can exist in the default (Company) workspace or other workspace, messages have two access URLs:</p>

<p><code class="prettyprint">https://api.whispir.com/messages</code> - for Company Workspace messages 
<code class="prettyprint">https://api.whispir.com/workspaces/:id/messages</code> - for other Workspace messages</p>

<p>If your application does not require separate workspaces, you can simply send all messages from the default Company workspace.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">to:</td>
            <td><strong>String</strong><br/>
                Specifies the recipients of the message e.g.
                <ul>
                    <li>Mobile Phone: 61423456789</li>
                    <li>Email Address: john.smith@test.com.au</li>
                    <li>Landline: 61386000000</li>
                </ul>
                <strong>Note:</strong> Multiple recipients can be specified using semicolons
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the first line of the SMS message or Voice call, and the subject of the Email message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">body:</td>
            <td><strong>String</strong><br/>
                Specifies the content of the SMS message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>Object</strong><br/>
                Email object described below. Used for sending email messages.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voice:</td>
            <td><strong>Object</strong><br/>
                Voice object described below. Used for sending voice calls to mobile phones and landlines.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">web:</td>
            <td><strong>Object</strong><br/>
                Web object described below. Used for web publishing and Rich Messages.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">social:</td>
            <td><strong>Object</strong><br/>
                Social object described below. Used for publishing content to social media (Twitter, Facebook, LinkedIn).
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">type:</td>
            <td><strong>String</strong><br/>
                Allows the user to modify the message behaviour for replies and DLRs (delivery receipts) e.g.
                <ul>
                    <li>defaultNoReply - Used to reject any replies to this message. This is also used to mask the sender&rsquo;s phone number when not using a Message Alias.</li>
                    <li>NoDlr - Used to specify that DLRs should not be enabled for this message.</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">features:</td>
            <td><strong>Object</strong><br/>
                Allows the user to modify the push notifications properties if these are configured in the company.
                <br/>
                <br/>
                <strong>pushOptions:</strong>
                <ul>
                    <li>notifications - enabled/disabled</li>
                    <li>escalationMins - # mins to await a push notifications response</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h2 id="sms-messages">SMS Messages</h2>

<blockquote>
<p>SMS Messages</p>

<blockquote>
<p>Sending SMS messages using Whispir is as easy as providing the destination phone number(s), a message subject, and the content of the message.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml
Accept: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test SMS Message<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;body&gt;</span>This is the body of my test SMS message<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS Message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test SMS message"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Sending SMS from Whispir is as easy as providing the recipient information and the content of the message.</p>

<p>Only <strong>3 fields</strong> are required:</p>

<ol>
<li>To - the mobile phone number of the recipient</li>
<li>Subject - the first line or identifier of the SMS</li>
<li>Body - the remainder of the SMS content</li>
</ol>

<p>The &lsquo;to&rsquo; field can be provided in the following formats:
<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">&#39;To&rsquo; field options</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Ad-hoc Recipients</td>
            <td><strong>String</strong><br/>
                <ul>
                    <li>Mobile Phone: 61423456789</li>
                    <li>Email Address: john.smith@test.com.au</li>
                    <li>Landline: 61386000000</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Defined Whispir Recipients</td>
            <td><strong>String</strong><br/>
                <ul>
                    <li><strong>Contact MRI:</strong><br/>John_Smith.782749@Contact.whispir.com</li>
                    <li><strong>User MRI:</strong><br/>John_Smith@User.whispir.com</li>
                    <li><strong>Distribution List MRI:</strong><br/>Incidents.373947@List.whispir.com</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table></p>

<h3 id="notes:">Notes:</h3>

<ul>
<li>Each SMS message can contain up to <strong>1600&#42;</strong> characters </li>
<li>The Subject field is Mandatory.</li>
<li>The Body field is Mandatory.</li>
<li>MRI (Message Resource Identifier) is the unique Whispir address for the Contact, User or Distribution List.</li>
</ul>

<p>&#42; SMS character counts are limited in some countries. Contact your local Whispir Representative for information about the supported number of characters in your region.</p>

<h2 id="email-messages">Email Messages</h2>

<blockquote>
<p>Email Messages</p>

<blockquote>
<p><strong>Sending Plain Text Emails</strong></p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>john.smith@test.com<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Email Message<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;email&gt;</span>
        <span class="nt">&lt;body&gt;</span>Email Body goes here.<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;footer&gt;</span>Email signature goes here.<span class="nt">&lt;/footer&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/email&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"john.smith@test.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Email Message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Email Body goes here."</span><span class="p">,</span><span class="x">
        </span><span class="s">"footer"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Email signature goes here."</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p><strong>Sending Rich Text (HTML) Emails</strong></p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>john.smith@test.com<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Email Message<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;email&gt;</span>
        <span class="nt">&lt;body&gt;</span>
            <span class="cp">&lt;![CDATA[
                &lt;div id="content"&gt;</span>
                    <span class="nt">&lt;p&gt;</span>This is my content<span class="nt">&lt;/p&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            ]]&gt;
        <span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/html<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/email&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"john.smith@test.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Email Message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"&lt;div id='content'&gt;&lt;p&gt;This is my content&lt;/p&gt;&lt;/div&gt;"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/html"</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Whispir can easily be used as an API email gateway to deliver thousands of rich content emails for your campaigns.</p>

<p><strong>Mandatory fields</strong></p>

<p>Only 4 fields are required in order to send an email message.</p>

<ol>
<li>To - the recipient of the email message.</li>
<li>Subject - the subject line of the email message.</li>
<li>Body - the content of the email (either HTML or Plain Text content).</li>
<li>Type - either &#39;text/plain&rsquo; or &#39;text/html&rsquo; to describe the content of the message.</li>
</ol>

<h3 id="whispir&#39;s-support-of-rich-(html)-emails">Whispir&rsquo;s support of Rich (HTML) Emails</h3>

<blockquote>
<blockquote>
<p><strong>Sending Emails with Attachments</strong></p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>john.smith@test.com<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test e-mail message with attachment<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;email&gt;</span>
        <span class="nt">&lt;body&gt;</span>Test Message Content<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;resources&gt;</span>
            <span class="nt">&lt;attachment&gt;</span>
                <span class="nt">&lt;attachmentName&gt;</span>TestIcon.png<span class="nt">&lt;/attachmentName&gt;</span>
                <span class="nt">&lt;attachmentDesc&gt;</span>TestIcon.png<span class="nt">&lt;/attachmentDesc&gt;</span>
                <span class="nt">&lt;derefUri&gt;</span>iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAAAXNSR0IArs4c6QAAAARnQU1BAACx
jwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMvSURBVDhPTVT5S1RhFD3fezOOOePTXHKriWgj
sogWC1TSMuuHIFqoX0KsIIgSWwiq/6FFU8MKK6KyXYSKpkUKR4QMSSpCLQpyxHHUZpztzdu63xub
5vKWj/fu+c6599z3mMfjSU9P13UdZoiCaLfZYQWiUGKq1WrBLEBDOBpWNTWeQyEIwvT0NAsEAgRO
PKXFxceNbQOtv4ShkKCkaZZ5kYU1Sw6dqT0NMTkLBIbf7zf+xaOuJzgG4RmyPyP/Kwq/oWAYeT+R
6gYOofnmlUQmLQjI6JQkifasu368KdCQWwFEwBiYQOIgiDBETDFIORh/iZ0De55cehgXQJIphce9
d/ebJhuyV0P3QY9Cj/HDUKhseIPomP/CW2QYB42nSx+db76YUM9IusPhYHVM2g5Bpo5xNuIkZibC
F8On0oGVjhWabmR8EBx5GDuHaItsy0zhzA6bo/H5ZSyDMQ1d4YQa0Sqc1hdAe3E7IYkqp9tiUcHG
kXIQZ8+fm+k5uXK3/46YAV3mMMLEt/BHUJ1Vua9oH+WV9ayLyLpVhRYFkT8d4mUzRuI0DAcHmQng
SLrGoBJ/GC/L31JSy/cm91ifXTcboYDJGLX+1kI6WS3AQFSRCUDvwhGEwubiD1yVLkLKWuxoT50k
zGwab6Ru6HIsahpiwTybkwTLU9iUU1Ezf394CmuyV20p2kLg8mcbRHLLxGimLlWFFMpMc6TRFlx2
9aJqePBgx4M3u7tubb1dMXfjw6rHhOwb+/jhV3+qNtMFKspQEZnA+oxSPr9UdjgUllV59pHZhSUF
I/We5AnMv5o7bvhsFu5f3DlmR7ATr/a+rtq2mVulqEqmlFlbUuv5MbqudW0C7PrhGpvwidRhIoyX
qiHoRam/tGrT5n9Wmfcb9TfmBOf0DXy80H0h/uKU6yQRcqlmk+mji0RhbbN2XOpAygzF/9nmfp4o
c4+4y6vLqRnuUTdsfNqYFRop/4JFw4t723qz52YlZpvPd/K30vm+03nAie1ADXAYOADsgHOXs/la
ix7RkzMJyJJ/BjQ09lQ7me8f9/cP9nsnvemzpOIFy3PzclkK0wyNgvDEHP8Z/AXQ58rAz69IBAAA
AABJRU5ErkJggg==<span class="nt">&lt;/derefUri&gt;</span>
            <span class="nt">&lt;/attachment&gt;</span>
        <span class="nt">&lt;/resources&gt;</span>
    <span class="nt">&lt;/email&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x"> 

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"jsmith@test.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test e-mail message with attachment"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is my content"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="x">
        </span><span class="s">"resources"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"attachment"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
                </span><span class="s">"attachmentName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"TestIcon.png"</span><span class="p">,</span><span class="x">
                </span><span class="s">"attachmentDesc"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"TestIcon.png"</span><span class="p">,</span><span class="x">
                </span><span class="s">"derefUri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAAAXNSR0IArs4c6QAAAARnQU1BAACx
jwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMvSURBVDhPTVT5S1RhFD3fezOOOePTXHKriWgj
sogWC1TSMuuHIFqoX0KsIIgSWwiq/6FFU8MKK6KyXYSKpkUKR4QMSSpCLQpyxHHUZpztzdu63xub
5vKWj/fu+c6599z3mMfjSU9P13UdZoiCaLfZYQWiUGKq1WrBLEBDOBpWNTWeQyEIwvT0NAsEAgRO
PKXFxceNbQOtv4ShkKCkaZZ5kYU1Sw6dqT0NMTkLBIbf7zf+xaOuJzgG4RmyPyP/Kwq/oWAYeT+R
6gYOofnmlUQmLQjI6JQkifasu368KdCQWwFEwBiYQOIgiDBETDFIORh/iZ0De55cehgXQJIphce9
d/ebJhuyV0P3QY9Cj/HDUKhseIPomP/CW2QYB42nSx+db76YUM9IusPhYHVM2g5Bpo5xNuIkZibC
F8On0oGVjhWabmR8EBx5GDuHaItsy0zhzA6bo/H5ZSyDMQ1d4YQa0Sqc1hdAe3E7IYkqp9tiUcHG
kXIQZ8+fm+k5uXK3/46YAV3mMMLEt/BHUJ1Vua9oH+WV9ayLyLpVhRYFkT8d4mUzRuI0DAcHmQng
SLrGoBJ/GC/L31JSy/cm91ifXTcboYDJGLX+1kI6WS3AQFSRCUDvwhGEwubiD1yVLkLKWuxoT50k
zGwab6Ru6HIsahpiwTybkwTLU9iUU1Ezf394CmuyV20p2kLg8mcbRHLLxGimLlWFFMpMc6TRFlx2
9aJqePBgx4M3u7tubb1dMXfjw6rHhOwb+/jhV3+qNtMFKspQEZnA+oxSPr9UdjgUllV59pHZhSUF
I/We5AnMv5o7bvhsFu5f3DlmR7ATr/a+rtq2mVulqEqmlFlbUuv5MbqudW0C7PrhGpvwidRhIoyX
qiHoRam/tGrT5n9Wmfcb9TfmBOf0DXy80H0h/uKU6yQRcqlmk+mji0RhbbN2XOpAygzF/9nmfp4o
c4+4y6vLqRnuUTdsfNqYFRop/4JFw4t723qz52YlZpvPd/K30vm+03nAie1ADXAYOADsgHOXs/la
ix7RkzMJyJJ/BjQ09lQ7me8f9/cP9nsnvemzpOIFy3PzclkK0wyNgvDEHP8Z/AXQ58rAz69IBAAA
AABJRU5ErkJggg=="</span><span class="x">
            </span><span class="p">}]</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<ul>
<li>HTML, HEAD and BODY HTML elements are not supported.  HTML content assumes that it is starting from within the BODY tag.</li>
<li>HTML form and input elements are not supported in most email clients.  These can be included in the HTML content but should be thoroughly tested prior to use.</li>
<li>STYLE elements are supported.  It is recommended that a single STYLE element at the top of the HTML that defines the styles for the entire email.  However, inline styles are also supported.</li>
<li>Javascript is not supported and should not be used in e-mail messages.</li>
<li>Images must be referenced through absolute web urls, any other mechanism will not work on most email clients.
<br/><br/><strong>Note:</strong> Whispir does not host images for clients, you must use another hosting service and reference the URL in your Whispir request payload.</li>
</ul>

<h3 id="including-attachments-in-e-mail-messages">Including attachments in e-mail messages</h3>

<p>The Whispir API provides users with the ability to compose e-mail messages that also contain message attachments.</p>

<p>Attachments can be of any type (e.g. PDF, Images, Documents), and can be up to 10MB in size (maximum for all attachments).</p>

<p>Attachments must be provided in the payload of the message.  URLs can be referenced in the Email, but will not be added as message attachments.</p>

<h3 id="notes:">Notes:</h3>

<ul>
<li>attachmentName - The name of the file being attached (mandatory)</li>
<li>attachmentDesc - An optional description of the file being attached</li>
<li>derefUri - The base64 representation of the file being uploaded</li>
</ul>

<aside class="notice">
The attachment element in JSON is also an array, so be sure to add the square bracket in there!
</aside>

<h2 id="voice-messages">Voice Messages</h2>

<blockquote>
<p>Voice Messages</p>

<blockquote>
<p><strong>Sending Voice Calls</strong></p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Voice Call<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;voice&gt;</span>
        <span class="nt">&lt;header&gt;</span>
            This is the introduction of the voice call
        <span class="nt">&lt;/header&gt;</span>        
        <span class="nt">&lt;body&gt;</span>This is the body of the message<span class="nt">&lt;/body&gt;</span>
        <span class="c">&lt;!-- Do not include line breaks in your API calls --&gt;</span>
        <span class="nt">&lt;type&gt;</span>
            ConfCall:,
            ConfAccountNo:,
            ConfPinNo:,
            ConfModPinNo:,
            Pin:
        <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/voice&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Voice Call"</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"header"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the introduction of the voice call"</span><span class="p">,</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of the message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ConfCall:,ConfAccountNo:,ConfPinNo:,ConfModPinNo:,Pin:"</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p><strong>Sending Voice Calls with Teleconferences</strong></p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Voice Call<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;voice&gt;</span>
        <span class="nt">&lt;header&gt;</span>
            This is the introduction of the voice call
        <span class="nt">&lt;/header&gt;</span>        
        <span class="nt">&lt;body&gt;</span>This is body of the message<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;footer&gt;</span>This is the footer of the message<span class="nt">&lt;/footer&gt;</span>
        <span class="c">&lt;!-- Do not include line breaks in your API calls --&gt;</span>
        <span class="nt">&lt;type&gt;</span>
            ConfCall:1800500536,
            ConfAccountNo:12345678,
            ConfPinNo:1234,
            ConfModPinNo:1234,
            Pin:0000
        <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/voice&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Voice Call"</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"header"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the introduction of the voice call"</span><span class="p">,</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is body of the message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"footer"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the footer of the message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ConfCall:1800500536,
                  ConfAccountNo:12345678,
                  ConfPinNo:1234,
                  ConfModPinNo:1234,
                  Pin:"</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Whispir&rsquo;s API provides users the ability to send a Voice Call to any landline or mobile phones around the world.</p>

<p>Whispir supports both <strong>Text to Speech</strong> and <strong>Pre-recorded WAV file</strong> approaches to sending Voice Calls.</p>

<p>Using Whispir&rsquo;s Voice Module, you can easily connect all recipients onto a single bridged call, simplifying your teleconferences and ensuring your message gets through.</p>

<h3 id="notes:">Notes:</h3>

<ul>
<li>The Subject field is Mandatory.</li>
<li>The Body field is Mandatory.</li>
<li>The Type field is Mandatory and at a minimum must specify the following string:
<code class="prettyprint">&lt;type&gt;ConfCall:,ConfAccountNo:,ConfPinNo:,ConfModPinNo:,Pin:&lt;/type&gt;</code></li>
<li><strong>The Type field is mandatory even when no conference call is being used</strong></li>
<li>Pauses can be added in conference call details using a +</li>
</ul>

<p>Your account must be enabled to use the Voice capability within Whispir for this to function.  If you are unsure whether you can use Voice please contact <a href="mailto:support@whispir.io">support@whispir.io</a>.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Custom Variables for Voice Calls</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@teleconf_number@@</td>
            <td>When Teleconferencing Services are used as part of voice calls, the Teleconference line that is used in the voice call can be accessed via this variable.<br/>e.g. 1800 123 123</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@teleconf_account@@</td>
            <td>When Teleconferencing Services are used as part of voice calls, the Teleconference Account or Room number that is used in the voice call can be accessed via this variable.<br/>e.g. 098711234</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@teleconf_pin@@</td>
            <td>When Teleconferencing Services are used as part of voice calls, the Teleconference Room PIN that is used in the voice call can be accessed via this variable.<br/>e.g. 8181</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@teleconf_mod_pin@@</td>
            <td>When Teleconferencing Services are used as part of voice calls, the Teleconference Moderator PIN that is used in the voice call can be accessed via this variable.<br/>e.g. 8181</td>
        </tr>
    </tbody>
</table>

<aside class="notice">
Whispir&rsquo;s Voice Module doesn&rsquo;t include a Conference Call service.  User&rsquo;s can easily integrate existing conference call services using the fields provided.
</aside>

<h2 id="rich-messages">Rich Messages</h2>

<blockquote>
<p>Rich Messages</p>

<blockquote>
<p>Simple Rich Message using SMS with a Web Link</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Rich Message<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;body&gt;</span>This is some content followed by the Rich Message link @@web_link@@<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;web&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/html<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;body&gt;</span>
            <span class="cp">&lt;![CDATA[
                &lt;div id="content"&gt;</span>
                    <span class="nt">&lt;p&gt;</span>This is the body of my Rich Message<span class="nt">&lt;/p&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            ]]&gt;
        <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/web&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Rich Message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is some content followed by the Rich Message link @@web_link@@"</span><span class="p">,</span><span class="x">
   </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/html"</span><span class="p">,</span><span class="x">
      </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"&lt;div class='content'&gt;This is the body of my Rich Message&lt;/div&gt;"</span><span class="x">
   </span><span class="p">}</span><span class="x"> 
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<p>Whispir&rsquo;s Javascript API</p>

<blockquote>
<p>Users can use Whispir&rsquo;s Javascript API to perform different functions from within Rich Messages.
The following example uses javascript to personalise the Rich Message</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Rich Message<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;body&gt;</span>This is some content followed by the Rich Message link @@web_link@@<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;web&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/html<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;body&gt;</span>
            <span class="cp">&lt;![CDATA[
                &lt;div id='content'&gt;</span>
                    <span class="nt">&lt;p&gt;</span>Hi <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">'first_name'</span><span class="nt">&gt;&lt;/span&gt;&lt;/p&gt;</span>
                    <span class="nt">&lt;p&gt;</span>This is the body of my Rich Message<span class="nt">&lt;/p&gt;</span>
                    <span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">'text/javascript'</span><span class="nt">&gt;</span>
                        document.getElementById('first_name').innerHTML = Whispir.data.profile.firstname;
                    <span class="nt">&lt;/script&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            ]]&gt;
        <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/web&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Rich Message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is some content followed by the Rich Message link @@web_link@@"</span><span class="p">,</span><span class="x">
   </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/html"</span><span class="p">,</span><span class="x">
      </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"&lt;div id='content'&gt;&lt;p&gt;Hi &lt;span id='first_name'&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;This is the body of my Rich Message&lt;/p&gt;&lt;script type='text/javascript'&gt;document.getElementById('first_name').innerHTML = Whispir.data.profile.firstname;&lt;/script&gt;&lt;/div&gt;"</span><span class="x">
   </span><span class="p">}</span><span class="x"> 
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight php"><span class="c">&lt;!--For ease of reading, the above HTML looks like--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'content'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hi <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">'first_name'</span><span class="nt">&gt;&lt;/span&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>This is the body of my Rich Message<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">'text/javascript'</span><span class="nt">&gt;</span>
        <span class="kd">var</span> <span class="nx">firstName</span> <span class="o">=</span> <span class="nx">Whispir</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">firstname</span><span class="p">;</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'first_name'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">firstName</span><span class="p">;</span>
    <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>Whispir&rsquo;s Rich Messages provide you with the capability to seamlessly &#39;push&rsquo; HTML content to your audience. </p>

<p>This can be in the form of a simple web page, through to a mini web application with interactive widgets such as video, a data visualisation, or map. </p>

<p>For example;</p>

<p><img src="https://developer.whispir.com/files/rpm-iphone-shift.jpg" /></p>

<p>Visit our demo site <a href="http://demo.whispir.com/rich-message.php" target="_blank">here</a> for lots of samples of rich messages.</p>

<p>The inclusion of the <code class="prettyprint">@@web_link@@</code> tag anywhere in the body of the SMS or Email will automatically generate a URL and embed any content specified in the web body of the same message.</p>

<h3 id="requirements-to-use-rich-messaging">Requirements to use Rich Messaging</h3>

<p>Rich push is utilised when delivered to a mobile device. The receiving device requires the following features to be enabled to ensure the experience is optimised.</p>

<p>The target device:</p>

<ul>
<li>Needs to be able to launch a web browser that is HTML5 compliant. Most mainstream smartphones and tablets include modern browsers.</li>
<li>Requires Javascript to be enabled on the target devices.</li>
<li>Have an active internet connection.</li>
</ul>

<h3 id="guidelines-for-authoring-the-rich-message-html">Guidelines for authoring the Rich Message HTML</h3>

<p>Whispir allows you to control the entire content to be delivered to the end users device. Therefore, it&rsquo;s important that you build to a responsive design to display the content appropriately for every screen size.</p>

<ul>
<li>Build to a responsive design that works across your target devices. Ensure you test across these devices.</li>
<li>Whispir strips body and doctype tags, and replaces them with tags suitable to render on mobile devices. The final DOCTYPE is delivered as a HTML 5 doctype.</li>
<li>Use style tags at the <strong>bottom</strong> of the HTML content (rather than in the head tag or inline styles). </li>
<li>Custom javascript should be included at the bottom of the content if possible (speeds up viewing).</li>
</ul>

<h3 id="html-resources">HTML Resources</h3>

<p>Any HTML resources (Images, videos and visual assets) must be hosted externally, and referenced in the HTML. This allows you to control and link to resources using your existing CDN assets.</p>

<ul>
<li>External hosting also applies to scripts such as javascript libraries. Google CDN has excellent resources here: https://developers.google.com/speed/libraries/. Javascript can also be coded inline if required.</li>
<li>As content is delivered over HTTPS, it is recommended that all external resources be accessible over HTTPS, as devices may refuse to load or display any mixed (HTTP and HTTPS) content.</li>
</ul>

<h3 id="response-rules">Response rules</h3>

<p>Response Rules allow you to define pre-canned responses to your message. Your stakeholders can review these responses and optional reply to your message by selecting one.</p>

<ul>
<li>Response Rules can be attached to a Whispir Message Template within the Whispir interface.</li>
<li>A message with Response Rules displays a response button at the bottom on the page. So ensure your message has at least 60px at the bottom of the page content.</li>
</ul>

<p>More information about Rich Messages and the <code class="prettyprint">Whispir</code> object is included later in this documentation.</p>

<h2 id="web-and-social-messaging">Web and Social Messaging</h2>

<blockquote>
<p>Web and Social Messaging</p>

<blockquote>
<p>Social Media Request/Response Example</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test Web Message<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;web&gt;</span> 
        <span class="nt">&lt;body&gt;</span>This is web body of my test message<span class="nt">&lt;/body&gt;</span> 
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span> 
    <span class="nt">&lt;/web&gt;</span> 
    <span class="nt">&lt;social&gt;</span> 
        <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"social"</span><span class="nt">&gt;</span> 
            <span class="nt">&lt;body&gt;</span>This is the content of social message for Twitter<span class="nt">&lt;/body&gt;</span>
         <span class="nt">&lt;/social&gt;</span> 
        <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"social_long"</span><span class="nt">&gt;</span> 
            <span class="nt">&lt;body&gt;</span>This is the content of social message for Facebook<span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span> 
        <span class="nt">&lt;/social&gt;</span> 
    <span class="nt">&lt;/social&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test Web Message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of the web content"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"social"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the content of social message for Twitter"</span><span class="x">
        </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"socialType"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
        </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"social_long"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the content of social message for Facebook"</span><span class="x">
        </span><span class="p">}]</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>The Whispir API supports publishing to Web, RSS and Social Media through existing configurations set up in the Whispir Platform.</p>

<p>If your existing Whispir setup already allows you to publish to these destinations, you can simply specify the information in the message, and it will automatically be published as per your existing setup.</p>

<h3 id="web-publishing">Web Publishing</h3>

<p>The Web section is used to publish information to Whispir&rsquo;s Contact Portal or Whispir Community, or to a pre-defined web destination e.g. your company intranet.  </p>

<p>Whispir can automatically export this content as plain text or HTML and export it to a location for you to either iFrame into your webpage, or include via AJAX.</p>

<p>For more information on web publishing, please contact <a href="mailto:support@whispir.io">support@whispir.io</a>.</p>

<h3 id="social-publishing">Social Publishing</h3>

<p>The Social section is used to publish information to Twitter or Facebook as per your Whispir implementation.  </p>

<p>Whispir can automatically publish content to your pre-configured Twitter and Facebook pages based on the information you have provided us.</p>

<p>For more information about configuring Social Publishing, please contact <a href="mailto:support@whispir.io">support@whispir.io</a>.</p>

<h2 id="message-variables">Message Variables</h2>

<blockquote>
<p>Message Variables</p>

<blockquote>
<p>Demonstration of sending messages with variables (or tags).</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test SMS Message with tags<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;body&gt;</span>Hi @@first_name@@.  This is your message.<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS Message with tags"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Hi @@first_name@@.  This is your message."</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>When sending messages using the Whispir API, users have the ability to automatically include recipient information as part of the message.  This is facilitated using <strong>tags</strong>.</p>

<p>The following <strong>tags</strong> can be included in any SMS, Email or Voice message:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Recipient Message Tags</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@first_name@@</td>
            <td>Recipients first name.<br/>e.g. John</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@last_name@@</td>
            <td>Recipients last name.<br/>e.g. Smith</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@recipient_email@@</td>
            <td>Recipients primary email address.<br/>e.g. jsmith@email.com</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@recipient_sms@@</td>
            <td>Recipients primary mobile phone number.<br/>e.g. 61412345678</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@recipient_voice@@</td>
            <td>Recipients primary phone number for voice calls.<br/>e.g. 61412345678</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@pin@@</td>
            <td>Whispir message retrieval service call back PIN (only populated when voice is used).<br/>e.g. 1234</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@recipient_role@@</td>
            <td>Resolves to the recipient&rsquo;s 'Role&rsquo; field.<br/>e.g. Manager</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@recipient_additionalrole@@</td>
            <td>Resolves to the recipient&rsquo;s 'Additional Role&rsquo; field.<br/>e.g. Team Leader</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@team_name1@@</td>
            <td>Resolves to the recipient&rsquo;s 'Team Name&rsquo; field.<br/>e.g. Red Team</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@messagelabel@@</td>
            <td>Resolves to the label field of the sent message.<br/>e.g. Incident #1234</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@messagecategories@@</td>
            <td>Resolves to the list of categories used in the message, separated with commas.<br/>e.g. Product Update</td
        </tr>
    </tbody>
</table>

<p>Each of these tags will resolve on send of the message to the individual recipient&rsquo;s information.  As Whispir needs to know about this information prior to sending the message, the tags will only work when sending messages to Contacts or Distribution Lists.</p>

<p>For more information about sending messages to Contacts or Distribution Lists, please consult the documentation under Messaging.</p>

<p>*<em>Note: *</em> Tags do not work in Rich Messages.  The <code class="prettyprint">Whispir</code> javascript object must be used instead to populate recipient specific fields.</p>

<h3 id="using-auto-populated-system-variables-in-messages">Using auto-populated system variables in messages</h3>

<blockquote>
<p>Using auto-populated system variables in messages</p>

<blockquote>
<p>Demonstration of sending messages with system variables (or tags).</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test SMS Message with tags<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;body&gt;</span>Hi @@first_name@@.  The date is @@dd@@ / @@mm@@ / @@yyyy@@.<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS Message with tags"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Hi @@first_name@@.  The date is @@dd@@ / @@mm@@ / @@yyyy@@."</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>When sending messages using the Whispir API, users have the ability to automatically include system generated information as part of the message.  This is facilitated using <strong>system tags</strong>.</p>

<p>The following <strong>system tags</strong> can be included in any message:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">System Tags</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@dd@@</td>
            <td>Current day with leading zero.<br/>e.g. 25</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@mm@@</td>
            <td>Current month with leading zero.<br/>e.g. 10</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@yy@@</td>
            <td>Current year, short form.<br/>e.g. 14</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@yyyy@@</td>
            <td>Current year, long form.<br/>e.g. 2014</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@day@@</td>
            <td>Day in spoken form.<br/>e.g. Wednesday</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@month@@</td>
            <td>Month in spoken form.<br/>e.g. June</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@hrs@@</td>
            <td>Current hour with leading zero in 24hrs.<br/>e.g. 16</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@min@@</td>
            <td>Current minute with leading zero .<br/>e.g. 37</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@date@@</td>
            <td>Current date in format (yyyy-mm-dd)<br/>e.g. 2014-09-02</td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">@@time@@</td>
            <td>Current time in 24hr format.<br/>e.g. 14:37</td>
        </tr>
    </tbody>
</table>

<p>Each of these system tags will resolve on send of the message to the system information.  The system tags will only work when sending messages to any recipient.</p>

<h2 id="dynamic-messages">Dynamic Messages</h2>

<blockquote>
<p>Dynamic Messages</p>

<blockquote>
<p>Whispir&rsquo;s API allows users to upload structured data, and process this line by line into outbound communications via SMS, Email, Voice, Web or Social Media.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">|------------|------------|-------------|-------------|------------| 
| First Name | Last Name  | Mobile      | Amount Owed | Date Due   |
|------------|------------|-------------|-------------|------------| 
| Jono       | Johnson    | +6590091234 | S$1000      | 21/08/2015 |
| Steve      | Smith      | +6590091235 | S$1100      | 22/08/2015 |
|------------|------------|-------------|-------------|------------| 
</code></pre>

<blockquote>
<blockquote>
<p>After processing, the first recipient would receive a message that looks as follows:</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">Hi Jono. Your account is currently outstanding, with the amount S$1000.00 being due on 21/08/2015.  Please make every effort to pay your account on time.  If you would like more information, please contact us on 1800 000 000, regards.
</code></pre>

<p>Whispir allows you send messages with dynamic content. This is very useful when you are sending SMS or emails in bulk and want to simply replace the placeholders or variables with values from a spreadsheet, data file or database table.</p>

<p>This can be achieved easily by uploading a file with the message content and the message recipient information. Whispir&rsquo;s messaging engine takes this information and processes it in bulk sendout.</p>

<p>This process allows users to easily specify recipient information within the file, and this can be processed within the message content.</p>

<p>This file could be saved and uploaded to Whispir&rsquo;s bulk messaging engine.  As a result, Whispir would then propose the following variables to be available for use in the message:</p>

<p>@@first_name@@<br/>
@@last_name@@<br/>
@@mobile@@<br/>
@@amount_owed@@<br/>
@@date_due@@<br/></p>

<p>The user then has the option to construct a message using this information, and Whispir will dynamically replace these variables at send time.  For example your message content could be as follows:</p>

<p><br/></p>

<h3 id="sending-dynamic-messages">Sending Dynamic Messages</h3>

<p>The bulk message sending is an easy two-step process.</p>

<ol>
<li>Upload the resource file via API (CSV, JSON or XML)</li>
<li>Create a new message using the resource file as source data.</li>
</ol>

<p><br/>
<strong>Step 1: Upload the Resource file via API</strong></p>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/resources?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml
Accept: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:resource</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>sample.json<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;scope&gt;</span>private<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;mimeType&gt;</span>application/json<span class="nt">&lt;/mimeType&gt;</span>
    <span class="nt">&lt;derefUri&gt;</span><span class="c">&lt;!--base64 encoded JSON content --&gt;</span><span class="nt">&lt;/derefUri&gt;</span>
<span class="nt">&lt;/ns3:resource&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">resource</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">resource</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"sample.json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"scope"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"private"</span><span class="p">,</span><span class="x">
  </span><span class="s">"mimeType"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"derefUri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"//base64 encoded JSON content"</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>

<blockquote>
<blockquote>
<p>This will return a Resource ID that applications can use in the next step.</p>
</blockquote>
</blockquote>

<p>To upload a file to Whispir&rsquo;s API, users will make an API call to the <code class="prettyprint">/resources</code> endpoint. </p>

<p>Applications can use this endpoint to store the source files for dynamic messages. This endpoint can also be used to store any file based data (e.g. images, pdf documents, spreadsheets) for an unlimited amount of time.</p>

<p><strong>Note:</strong> The types of files allowed are - CSV, JSON, XML, Images [JPEG, PNG], and WAV.</p>

<p>Information about the resources endpoint is documented in the <strong>Resources</strong> section of the documentation.</p>

<p><br/>
<strong>Step 2: Invoke the bulk message with reference to the resource ID and the desired content</strong></p>

<p>Once the resource file has been uploaded and the location of the resource being returned, applications can use this to populate a dynamic message using the <strong>/messages</strong> endpoint.</p>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.bulkmessage-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;resource&gt;</span>
      <span class="nt">&lt;resourceId/&gt;</span>
      <span class="nt">&lt;smsMappingField/&gt;</span>
      <span class="nt">&lt;emailMappingField/&gt;</span>
      <span class="nt">&lt;voiceMappingField&gt;</span>
   <span class="nt">&lt;/resource&gt;</span>
   <span class="nt">&lt;messageTemplateId&gt;</span>  
   <span class="nt">&lt;messageContent&gt;</span>
      <span class="nt">&lt;subject&gt;&lt;/subject&gt;</span>
      <span class="nt">&lt;body&gt;&lt;/body&gt;</span>
      <span class="nt">&lt;email&gt;</span>
         <span class="nt">&lt;body&gt;&lt;/body&gt;</span>
         <span class="nt">&lt;footer&gt;&lt;/footer&gt;</span>
         <span class="nt">&lt;type&gt;&lt;/type&gt;</span>
      <span class="nt">&lt;/email&gt;</span>
      <span class="nt">&lt;voice&gt;</span>
         <span class="nt">&lt;header&gt;&lt;/header&gt;</span>
         <span class="nt">&lt;body&gt;&lt;/body&gt;</span>
         <span class="nt">&lt;footer&gt;&lt;/footer&gt;</span>
         <span class="nt">&lt;other&gt;&lt;/other&gt;</span>
         <span class="nt">&lt;type&gt;&lt;/type&gt;</span>
      <span class="nt">&lt;/voice&gt;</span>
      <span class="nt">&lt;web&gt;</span>
         <span class="nt">&lt;body&gt;&lt;/body&gt;</span>
         <span class="nt">&lt;type&gt;&lt;/type&gt;</span>
      <span class="nt">&lt;/web&gt;</span>
   <span class="nt">&lt;/messageContent&gt;</span>
   <span class="nt">&lt;callbackId/&gt;</span>

<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">bulkmessage</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"resource"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"resourceId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"smsMappingField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"emailMappingField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"voiceMappingField"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"messageTemplateId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"messageContent"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
        </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
            </span><span class="s">"footer"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
            </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"header"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
            </span><span class="s">"footer"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
            </span><span class="s">"other"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
            </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
            </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"callbackId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<h3 id="dynamic-messaging">Dynamic Messaging</h3>

<h3 id="method-definition-and-descriptions">Method Definition and Descriptions</h3>

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Value</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Service URL</td>
            <td>https://api.whispir.com/messages <br/> https://api.whispir.com/workspaces/[id]/messages</td>
        </tr>
        <tr>
            <td>Methods Supported</td>
            <td>GET, POST</td>
        </tr>
        <tr>
            <td>Request MIME Type</td>
            <td>application/vnd.whispir.bulkmessage-v1+xml <br/> application/vnd.whispir.bulkmessage-v1+json</td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">/messages</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">GET:</td>
            <td>
                Provides a List of all the currently sent messages within the company or workspace (URIs)
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">POST:</td>
            <td>
                Creates and sends a new message/bulk message.
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">/messages/{id}</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">GET:</td>
            <td>
                Retrieves the representation of the requested message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">POST:</td>
            <td>
                NOT SUPPORTED
            </td>
        </tr>
    </tbody>
</table>

<p><strong>Note</strong>: The endpoint does not support PUT and DELETE in bulk messages. Similarly there is no POST for the <strong>/messages/{id}</strong>.</p>

<h3 id="request-components">Request Components</h3>

<p>The structure of the Bulk Message is used to define the resource that should be used in the sendout, while also giving the user the capability to override the message content in the event a message template is not desired.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Main Section</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateId</td>
            <td>
                The resource identifier of the Message Template that should be used for this request.<br/>
                Sample Value: 4FBBC384BCE3DAABFE3
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">callbackId</td>
            <td>
                The id of the callback to be used for responses to this message.<br/>
                Sample Value: SampleCallback
                <br/><br/>
                **Note:** callback IDs are configured by Administrators within the Whispir Platform. 

            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Resource Section</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">resourceId</td>
            <td>
                The resource identifier returned from the POST to /resources.<br/>
                Resource referred to must be a valid CSV file.<br/>
                Sample Value: 384BCE34FBBCDAABFE3
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">smsMappingField</td>
            <td>
                The column name from within the CSV file that refers to the field on each row that should be used for SMS messages.<br/>
                Sample Value: Mobile
                <br/><br/>
                <strong>Note:</strong> This field will default to ‘mobile’ if present in the file and this field is not populated.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">emailMappingField</td>
            <td>
                The column name from within the CSV file that refers to the field on each row that should be used for Email messages.<br/>
                Sample Value: Email
                <br/><br/>
                <strong>Note:</strong> This field will default to ‘email’ if present in the file and this field is not populated. 
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voiceMappingField</td>
            <td>
                The column name from within the CSV file that refers to the field on each row that should be used for Voice messages.<br/>
                Sample Value: Mobile
                <br/><br/>
                <strong>Note:</strong> This field will default to ‘mobile’ if present in the file and this field is not populated. 
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Message Content Section – *Required when no template is used.</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Subject</td>
            <td>
                Defines the subject of the message.  The subject also acts as the first line of the SMS message.<br/>
                Sample Value: Mary had a little lamb.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Body</td>
            <td>
                The body of the SMS message being delivered.<br/>
                Sample Value: And its fleece was white as snow. Everywhere that Mary went, the lamb was sure to check her in 4Square. Soon, Mary was the president of the town.
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Email Section – *Required for email messages</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Body</td>
            <td>
                The body of the email message being delivered.<br/>
                Sample Value: Jack and Jill went up the hill.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Footer</td>
            <td>
                The footer of the email message being delivered. Usually used as an area for a signature.<br/>
                Sample Value: Regards, the well.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Type</td>
            <td>
                The type of the email content.<br/>
                Sample Value: text/plain (default) / text/html.
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Voice Section – *Required for voice messages</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Header</td>
            <td>
                The header of the voice content.<br/>
                Sample Value: The text to speech content of the introduction message for the voice call.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Body</td>
            <td>
                The content of the voice message.<br/>
                Sample Value: The text to speech content of the body message for the voice call.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Type</td>
            <td>
                The type parameter defines the other optional elements of the voice call.<br/>
                Sample Value: ConfCall:ConfAccountNo:ConfPinNo:ConfModPinNo:Pin:
            </td>
        </tr>
    </tbody>
</table>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Web Section – *Required for web/rich push messages</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Body</td>
            <td>
                The body of the web message<br/>
                Sample Value: The body content of the web message to be delivered.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Type</td>
            <td>
                The type of the web message<br/>
                Sample Value: text/plain (default) / text/html.
            </td>
        </tr>
    </tbody>
</table>

<h3 id="response-structure">Response Structure</h3>

<p>If the request was successful, the response contains the information for the calling application to retrieve information about the message.</p>

<blockquote>
<blockquote>
<p>If the dynamic message was successful, the following response will be received.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 202 Accepted
Location: https://api.whispir.com/messages/4FBBC384BCE3DAABFE3

Your request has been accepted for processing.
</code></pre>

<p>If the request was not successful, the response will contain the information about why the request could not be processed.  This will be as per the standard Whispir API response code rules.</p>

<p>The outcome of this message will be a complete message with placeholder variables @@ replaced with the supplied values.</p>

<p>For more information about sending messages, please consult the documentation under Messaging.</p>

        <h1 id="message-status">Message Status</h1>

<p>Whispir will automatically monitor the status of each message after it has been sent to each recipient.  Using the message status information, you are able to determine who received the message, what exact time they received it, on what message channel (SMS, Email, Voice, Web, Push Notification), whether they replied to the message, what time they replied, and on what messaging channel.</p>

<p>Each message progresses through various states, from Pending to Acknowledged.</p>

<p><img src="https://developer.whispir.com/files/MessageStatus.png" /></p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Message Status Descriptions</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">Pending (PENDING):</td>
            <td>
                The message has not yet been processed by Whispir.  It is in a queue and will be processed shortly.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Sent (SENT):</td>
            <td>
                The message has been sent from Whispir to the recipient, however, there has been no acknowledgement from the recipient via read receipt that the message has arrived.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Received (DELIVRD):</td>
            <td><strong>Email:</strong> Whispir has received acknowledgement via a read receipt that the message has arrived in the inbox.
            <br/><br/>
            <strong>SMS:</strong> Received status can mean one of two things for SMS.

            <ol>
                <li>The message has been received by the network and is being processed for delivery to the handset.<br/><br/>How long the message stays in this state is up to the telco.<br/><br/></li>
                <li>The message has been received by the handset and confirmed by the telco.</li>
            </ol>

            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Acknowledged (READ):</td>
            <td>
               Whispir has received an intended response from the recipient, either by reply SMS, Email or Voice prompt
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Undeliverable (FAILED):</td>
            <td>
               Whispir was not able to deliver the message to the intended recipient on the specified channel.  This may be due to incorrect information e.g. wrong phone number or email address, or due to poor network coverage.
            </td>
        </tr>
    </tbody>
</table>

<p>Using the API, developers are able to access this status information at either a <strong>Summary</strong> or <strong>Detailed</strong> level.</p>

<p>The first thing a developer must do in order to retrieve the status of a sent message is retrieve the message using the API.</p>

<h2 id="retrieve-a-message">Retrieve a Message</h2>

<blockquote>
<p>Retrieve a message</p>

<blockquote>
<p>Use the API to retrieve a sent Message </p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com/dap"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
 <span class="nt">&lt;subject&gt;</span>test subject<span class="nt">&lt;/subject&gt;</span>
 <span class="nt">&lt;body&gt;</span>test body<span class="nt">&lt;/body&gt;</span>
 <span class="nt">&lt;voice/&gt;</span>
 <span class="nt">&lt;from&gt;&lt;/from&gt;</span>
 <span class="nt">&lt;direction&gt;</span>OUTGOING<span class="nt">&lt;/direction&gt;</span>
 <span class="nt">&lt;responseCount&gt;</span>0<span class="nt">&lt;/responseCount&gt;</span>
 <span class="nt">&lt;social/&gt;</span>
 <span class="nt">&lt;createdTime&gt;</span>2012-09-24T15:36:16+10:00<span class="nt">&lt;/createdTime&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"self"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B?apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryStatus"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedStatus"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryResponses"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedResponses"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryResponsesWithResponseRule"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedResponsesWithResponseRule"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"test subject"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"test body"</span><span class="p">,</span><span class="x">
    </span><span class="s">"direction"</span><span class="o">:</span><span class="x"> </span><span class="s">"OUTGOING"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseCount"</span><span class="o">:</span><span class="x"> </span><span class="s">"0"</span><span class="p">,</span><span class="x">
    </span><span class="s">"createdTime"</span><span class="o">:</span><span class="x"> </span><span class="s">"2012-09-24T15:36:16+10:00"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B?apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryStatus"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedStatus"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryResponses"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedResponses"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryResponsesWithResponseRule"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedResponsesWithResponseRule"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">}]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>The example request below returns the Message that the API user requested.  </p>

<p><code class="prettyprint">GET /messages/069BF68E5E0FE99B?apikey=498nadsasdff09fewdsafjaa90f</code></p>

<p>Each of the URLs specified in the response can be accessed using the REL and appropriate METHOD to perform the specified functionality.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Rel Attribute Descriptions</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">self:</td>
            <td>
                Retrieves the current message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">summaryStatus:</td>
            <td>
                Returns the status information of the message as a messagestatus object, in a summary view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">detailedStatus:</td>
            <td>Returns the status information of the message as a messagestatus object, in a detailed view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">summaryResponses:</td>
            <td>
               Returns the response information of the message as a messageresponse object, in a summary view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">detailedResponses:</td>
            <td>
               Returns the response information of the message as a messageresponse object, in a detailed view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">summaryResponsesWithResponseRule:</td>
            <td>
               Returns the response information of the message as a messageresponse object, filtered by the Response Rule (if one was used) in a summary view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">detailedResponsesWithResponseRule:</td>
            <td>
               Returns the response information of the message as a messageresponse object, filtered by the Response Rule (if one was used) in a detailed view.
            </td>
        </tr>
    </tbody>
</table>

<h2 id="retrieve-summary-status">Retrieve Summary Status</h2>

<blockquote>
<p>Retrieve Summary Status</p>

<blockquote>
<p>This sample of code will retrieve the Summary Status for a message</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryStatus"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
    </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
    </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryStatus"</span><span class="p">,</span><span class="x">
    </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<p>Sample Summary Status Response</p>

<blockquote>
<p>This sample of code will retrieve the Summary Status for a message</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;ns2:messageStatuses&gt;</span>
  <span class="nt">&lt;ns2:messageStatus&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
             <span class="na">rel=</span><span class="s">"self"</span> 
             <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;categories&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">name=</span><span class="s">"Sent"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;percentageTotal&gt;</span>0.0%<span class="nt">&lt;/percentageTotal&gt;</span>
        <span class="nt">&lt;recipientCount&gt;</span>0<span class="nt">&lt;/recipientCount&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">name=</span><span class="s">"Pending"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;percentageTotal&gt;</span>0.0%<span class="nt">&lt;/percentageTotal&gt;</span>
        <span class="nt">&lt;recipientCount&gt;</span>0<span class="nt">&lt;/recipientCount&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">name=</span><span class="s">"Received"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;percentageTotal&gt;</span>0.0%<span class="nt">&lt;/percentageTotal&gt;</span>
        <span class="nt">&lt;recipientCount&gt;</span>0<span class="nt">&lt;/recipientCount&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">name=</span><span class="s">"Acknowledged"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;percentageTotal&gt;</span>100.0%<span class="nt">&lt;/percentageTotal&gt;</span>
        <span class="nt">&lt;recipientCount&gt;</span>2<span class="nt">&lt;/recipientCount&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">name=</span><span class="s">"Undeliverable"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;percentageTotal&gt;</span>0.0%<span class="nt">&lt;/percentageTotal&gt;</span>
        <span class="nt">&lt;recipientCount&gt;</span>0<span class="nt">&lt;/recipientCount&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;/categories&gt;</span>
  <span class="nt">&lt;/ns2:messageStatus&gt;</span>
 <span class="nt">&lt;/ns2:messageStatuses&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"messageStatuses"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
    </span><span class="s">"categories"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sent"</span><span class="p">,</span><span class="x">
      </span><span class="s">"recipientCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
      </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"0.0%"</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Pending"</span><span class="p">,</span><span class="x">
      </span><span class="s">"recipientCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
      </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"0.0%"</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Received"</span><span class="p">,</span><span class="x">
      </span><span class="s">"recipientCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
      </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"0.0%"</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Acknowledged"</span><span class="p">,</span><span class="x">
      </span><span class="s">"recipientCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">2</span><span class="p">,</span><span class="x">
      </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"100.0%"</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Undeliverable"</span><span class="p">,</span><span class="x">
      </span><span class="s">"recipientCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x">
      </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"0.0%"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Using the links provided in the message response, the user can simply make a new API request to retrieve the <strong>summaryStatus</strong> URL. </p>

<p>In the example above, the <strong>summaryStatus</strong> URL is:</p>

<p>So the request would look as follows:</p>

<p><code class="prettyprint">GET https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f</code></p>

<p>As this is a <strong>GET</strong> request we don&rsquo;t have to provide any message body.</p>

<p>This response states that of the 2 people that were sent the message, both of them <strong>Acknowledged</strong> it by sending a response.  </p>

<p>Your application can use this information to easily determine the numbers of recipients in each state and show a small graph.</p>

<h2 id="retrieve-detailed-status">Retrieve Detailed Status</h2>

<blockquote>
<p>Retrieve Detailed Status</p>

<blockquote>
<p>This snippet will retrieve the detailed status for a message.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryStatus"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
    </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
    </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryStatus"</span><span class="p">,</span><span class="x">
    </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<p>Sample Detailed Status Response</p>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;status&gt;</span>1 to 2 of 2<span class="nt">&lt;/status&gt;</span>
  <span class="nt">&lt;ns2:messageStatuses&gt;</span>
    <span class="nt">&lt;ns2:messageStatus&gt;</span>
      <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
            <span class="na">rel=</span><span class="s">"self"</span> 
                <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?apikey=498nadsasdff09fewdsafjaa90f&amp;view=detailed"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">type=</span><span class="s">"email"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;destination&gt;&lt;/destination&gt;</span>
        <span class="nt">&lt;status&gt;&lt;/status&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">type=</span><span class="s">"sms"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;acknowlegedTimestamp&gt;</span>2012-09-28T08:47:50+10:00<span class="nt">&lt;/acknowlegedTimestamp&gt;</span>
        <span class="nt">&lt;destination&gt;</span>$mobile<span class="nt">&lt;/destination&gt;</span>
        <span class="nt">&lt;receivedTimestamp&gt;</span>2012-09-28T08:47:20+10:00<span class="nt">&lt;/receivedTimestamp&gt;</span>
        <span class="nt">&lt;sentTimestamp&gt;</span>2012-09-28T08:47:17+10:00<span class="nt">&lt;/sentTimestamp&gt;</span>
        <span class="nt">&lt;status&gt;</span>READ<span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">type=</span><span class="s">"voice"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;destination&gt;&lt;/destination&gt;</span>
        <span class="nt">&lt;status&gt;&lt;/status&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;info&gt;</span> Out bound SMS text message sent OK. <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;name&gt;</span>John Smith<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;/ns2:messageStatus&gt;</span>
    <span class="nt">&lt;ns2:messageStatus&gt;</span>
      <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
            <span class="na">rel=</span><span class="s">"self"</span> 
                <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?apikey=498nadsasdff09fewdsafjaa90f&amp;view=detailed"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">type=</span><span class="s">"email"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;destination&gt;&lt;/destination&gt;</span>
        <span class="nt">&lt;status&gt;&lt;/status&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">type=</span><span class="s">"sms"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;acknowlegedTimestamp&gt;</span>2012-09-28T08:47:49+10:00<span class="nt">&lt;/acknowlegedTimestamp&gt;</span>
        <span class="nt">&lt;destination&gt;</span>$mobile<span class="nt">&lt;/destination&gt;</span>
        <span class="nt">&lt;receivedTimestamp&gt;</span>2012-09-28T08:47:20+10:00<span class="nt">&lt;/receivedTimestamp&gt;</span>
        <span class="nt">&lt;sentTimestamp&gt;</span>2012-09-28T08:47:17+10:00<span class="nt">&lt;/sentTimestamp&gt;</span>
        <span class="nt">&lt;status&gt;</span>READ<span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">type=</span><span class="s">"voice"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;destination&gt;&lt;/destination&gt;</span>
        <span class="nt">&lt;status&gt;&lt;/status&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;info&gt;</span> Out bound SMS text message sent OK. <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;name&gt;</span>Fred Smith<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;/ns2:messageStatus&gt;</span>
  <span class="nt">&lt;/ns2:messageStatuses&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"messageStatuses"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"John Smith"</span><span class="p">,</span><span class="x">
    </span><span class="s">"info"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Out bound SMS text message sent OK."</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?apikey=498nadsasdff09fewdsafjaa90f&amp;view=detailed"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
    </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"email"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"destination"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"sms"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"READ"</span><span class="p">,</span><span class="x">
      </span><span class="s">"destination"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
      </span><span class="s">"sentTimestamp"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"2012-09-28T08:47:17+10:00"</span><span class="x">
      </span><span class="s">"receivedTimestamp"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"2012-09-28T08:47:20+10:00"</span><span class="x">
      </span><span class="s">"acknowlegedTimestamp"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"2012-09-28T08:47:50+10:00"</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"voice"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"destination"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">},{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred Smith"</span><span class="p">,</span><span class="x">
    </span><span class="s">"info"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Out bound SMS text message sent OK."</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?apikey=498nadsasdff09fewdsafjaa90f&amp;view=detailed"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
    </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"email"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"destination"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"sms"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"READ"</span><span class="p">,</span><span class="x">
      </span><span class="s">"destination"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
      </span><span class="s">"sentTimestamp"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"2012-09-28T08:47:17+10:00"</span><span class="x">
      </span><span class="s">"receivedTimestamp"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"2012-09-28T08:47:20+10:00"</span><span class="x">
      </span><span class="s">"acknowlegedTimestamp"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"2012-09-28T08:47:50+10:00"</span><span class="x">
    </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"voice"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"destination"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
  </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 2 of 2"</span><span class="p">,</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Similar to the <strong>summaryStatus</strong>, using the links provided in the message response, the user can simply make a new API request to retrieve the <strong>detailedStatus</strong> URL. </p>

<p><code class="prettyprint">GET https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=</code></p>

<p>As this is a <strong>GET</strong> request we don&rsquo;t have to provide any message body. </p>

<p>The user can easily use this information to receive a far more detailed status breakdown of (for each recipient):</p>

<ul>
<li>  The name of the recipient</li>
<li>  The channel type (SMS, Email, Voice, Web)</li>
<li>  The sent timestamp for each channel</li>
<li>  The received timestamp for each channel</li>
<li>  The acknowledged timestamp for each channel</li>
<li>  The undeliverable timestamp (only present when the channel is undeliverable)</li>
<li>  The overall status for this recipient (PENDING, SENT, DELIVRD, READ, FAILED)</li>
<li>  The information text describing how this message has progressed.</li>
</ul>

<p>Once you have processed the status information, the next likely piece of information you will be looking to find is the content of the responses (if any).  The section on Message Responses describes how to retrieve this information.</p>

        <h1 id="message-responses">Message Responses</h1>

<p>Recipients of Whispir Messages have the ability to respond directly to the message via the channels that they received the message on.  </p>

<p>If they received the message via SMS, they can respond directly to the SMS message, and this will be visible through the Whispir.io API.</p>

<p><img title="Message Response" src="https://developer.whispir.com/files/MessageResponse.png" /></p>

<p>The sections below describe the process to retrieve the responses to any messages that you have sent via the Whispir.io API.</p>

<h2 id="retrieve-a-message">Retrieve a Message</h2>

<blockquote>
<p>Retrieve a message</p>

<blockquote>
<p>Use the API to retrieve a sent Message </p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/messages?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com/dap"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
 <span class="nt">&lt;subject&gt;</span>test subject<span class="nt">&lt;/subject&gt;</span>
 <span class="nt">&lt;body&gt;</span>test body<span class="nt">&lt;/body&gt;</span>
 <span class="nt">&lt;voice/&gt;</span>
 <span class="nt">&lt;from&gt;&lt;/from&gt;</span>
 <span class="nt">&lt;direction&gt;</span>OUTGOING<span class="nt">&lt;/direction&gt;</span>
 <span class="nt">&lt;responseCount&gt;</span>0<span class="nt">&lt;/responseCount&gt;</span>
 <span class="nt">&lt;social/&gt;</span>
 <span class="nt">&lt;createdTime&gt;</span>2012-09-24T15:36:16+10:00<span class="nt">&lt;/createdTime&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"self"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B?apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryStatus"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedStatus"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryResponses"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedResponses"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryResponsesWithResponseRule"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedResponsesWithResponseRule"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"test subject"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"test body"</span><span class="p">,</span><span class="x">
    </span><span class="s">"direction"</span><span class="o">:</span><span class="x"> </span><span class="s">"OUTGOING"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseCount"</span><span class="o">:</span><span class="x"> </span><span class="s">"0"</span><span class="p">,</span><span class="x">
    </span><span class="s">"createdTime"</span><span class="o">:</span><span class="x"> </span><span class="s">"2012-09-24T15:36:16+10:00"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B?apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryStatus"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedStatus"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=detailed&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryResponses"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedResponses"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryResponsesWithResponseRule"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedResponsesWithResponseRule"</span><span class="p">,</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=responserule&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
    </span><span class="p">}]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>The example request below returns the Message that the API user requested.  </p>

<p><code class="prettyprint">GET /messages/069BF68E5E0FE99B?apikey=498nadsasdff09fewdsafjaa90f</code></p>

<p>Each of the URLs specified in the response can be accessed using the REL and appropriate METHOD to perform the specified functionality.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Rel Attribute Descriptions</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">self:</td>
            <td>
                Retrieves the current message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">summaryStatus:</td>
            <td>
                Returns the status information of the message as a messagestatus object, in a summary view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">detailedStatus:</td>
            <td>Returns the status information of the message as a messagestatus object, in a detailed view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">summaryResponses:</td>
            <td>
               Returns the response information of the message as a messageresponse object, in a summary view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">detailedResponses:</td>
            <td>
               Returns the response information of the message as a messageresponse object, in a detailed view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">summaryResponsesWithResponseRule:</td>
            <td>
               Returns the response information of the message as a messageresponse object, filtered by the Response Rule (if one was used) in a summary view.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">detailedResponsesWithResponseRule:</td>
            <td>
               Returns the response information of the message as a messageresponse object, filtered by the Response Rule (if one was used) in a detailed view.
            </td>
        </tr>
    </tbody>
</table>

<h2 id="summary-responses">Summary Responses</h2>

<blockquote>
<p>Summary of Responses</p>

<blockquote>
<p>This snippet of code will allow users to retrieve the summary of responses to a message.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"summaryResponses"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
    </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
    </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"summaryResponses"</span><span class="p">,</span><span class="x">
    </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<p>Sample Summary Responses Response</p>

<blockquote>
<p>This response contains the summary of responses to the message</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
              <span class="na">rel=</span><span class="s">"self"</span> 
              <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns2:messageresponses&gt;</span>
        <span class="nt">&lt;ns2:response</span> <span class="na">type=</span><span class="s">"noresponse"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;percentageTotal&gt;</span>50%<span class="nt">&lt;/percentageTotal&gt;</span>
            <span class="nt">&lt;responseCount&gt;</span>1<span class="nt">&lt;/responseCount&gt;</span>
        <span class="nt">&lt;/ns2:response&gt;</span>
        <span class="nt">&lt;ns2:response</span> <span class="na">type=</span><span class="s">"notmatched"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;percentageTotal&gt;</span>50%<span class="nt">&lt;/percentageTotal&gt;</span>
            <span class="nt">&lt;responseCount&gt;</span>1<span class="nt">&lt;/responseCount&gt;</span>
        <span class="nt">&lt;/ns2:response&gt;</span>
    <span class="nt">&lt;/ns2:messageresponses&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"messageresponses"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"50%"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">],</span><span class="x">
    </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"noresponse"</span><span class="x">
  </span><span class="p">},{</span><span class="x">
    </span><span class="s">"percentageTotal"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"50%"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">],</span><span class="x">
    </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"notmatched"</span><span class="x">
  </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=summary&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="p">,</span><span class="x">
    </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
    </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
  </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Using the links provided in the message response, the user can simply make a new API request to retrieve the <strong>summaryStatus</strong> URL. </p>

<p>The request for this information would look as follows:</p>

<p><code class="prettyprint">GET https://api.whispir.com/messages/069BF68E5E0FE99B/messagestatus?view=summary&amp;apikey=498nadsasdff09fewdsafjaa90f</code></p>

<p>This request is asking for a couple of things:</p>

<ol>
<li> The URL is specifically asking for all of the <strong>messageresponses</strong> to the message with ID <strong>069BF68E5E0FE99B</strong></li>
<li> The <strong>View</strong> parameter is specifying that the message responses should be shown in a <strong>summary</strong> view</li>
<li> The <strong>Filter</strong> parameter is specifying that the filter should not use a response rule, it should show the <strong>default</strong> filter</li>
</ol>

<p>As this is a <strong>GET</strong> request we don&rsquo;t have to provide any message body.</p>

<p>This response states that of the 2 people that were sent the message, both of them <strong>Acknowledged</strong> it by sending a response.  </p>

<p>Your application can use this information to easily determine the numbers of recipients in each state and show a small graph.</p>

<h2 id="detailed-responses">Detailed Responses</h2>

<blockquote>
<p>Detailed Responses</p>

<blockquote>
<p>This snippet allows the user to retrieve the detailed response report for a message</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;ns3:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
   <span class="na">rel=</span><span class="s">"detailedResponses"</span> 
   <span class="na">uri=</span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="nt">/&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
    </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
    </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"detailedResponses"</span><span class="p">,</span><span class="x">
    </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<p>Sample Detailed Responses Response</p>

<blockquote>
<p>This is the detailed response report for a message</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 2 of 2<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:messageresponses&gt;</span>
        <span class="nt">&lt;ns2:response&gt;</span>
            <span class="nt">&lt;from&gt;</span>
                <span class="nt">&lt;email&gt;</span>jsmith@test.com<span class="nt">&lt;/email&gt;</span>                
                <span class="nt">&lt;mobile&gt;</span>$mobile<span class="nt">&lt;/mobile&gt;</span> 
                <span class="nt">&lt;mri&gt;</span>John_Smith.484215.Critical_Incident_Management@Contact.whispir.com<span class="nt">&lt;/mri&gt;</span>
                <span class="nt">&lt;name&gt;</span>John Smith<span class="nt">&lt;/name&gt;</span>
                <span class="nt">&lt;voice&gt;</span>$mobile<span class="nt">&lt;/voice&gt;</span> 
            <span class="nt">&lt;/from&gt;</span>
            <span class="nt">&lt;responseCategory&gt;</span>noresponse<span class="nt">&lt;/responseCategory&gt;</span>
            <span class="nt">&lt;responseMessage</span> <span class="na">channel=</span><span class="s">"N/A"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;acknowledged&gt;</span>N/A<span class="nt">&lt;/acknowledged&gt;</span>
                <span class="nt">&lt;content&gt;</span>N/A<span class="nt">&lt;/content&gt;</span>
            <span class="nt">&lt;/responseMessage&gt;</span>
        <span class="nt">&lt;/ns2:response&gt;</span>
        <span class="nt">&lt;ns2:response&gt;</span>
            <span class="nt">&lt;from&gt;</span>
                <span class="nt">&lt;email&gt;</span>fsmith@test.com<span class="nt">&lt;/email&gt;</span>
                <span class="nt">&lt;mobile&gt;</span>$mobile<span class="nt">&lt;/mobile&gt;</span>  
                <span class="nt">&lt;mri&gt;</span>Fred_Smith.341550.Critical_Incident_Management@Contact.whispir.com<span class="nt">&lt;/mri&gt;</span>
                <span class="nt">&lt;name&gt;</span>Fred Smith<span class="nt">&lt;/name&gt;</span>
                <span class="nt">&lt;voice&gt;</span>$mobile<span class="nt">&lt;/voice&gt;</span> 
            <span class="nt">&lt;/from&gt;</span>
            <span class="nt">&lt;responseCategory&gt;</span>notmatched<span class="nt">&lt;/responseCategory&gt;</span>
            <span class="nt">&lt;responseMessage</span> <span class="na">channel=</span><span class="s">"SMS"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;acknowledged&gt;</span>28/09/12 08:48<span class="nt">&lt;/acknowledged&gt;</span>
                <span class="nt">&lt;content&gt;</span>OK, got it. Thanks.<span class="nt">&lt;/content&gt;</span>
            <span class="nt">&lt;/responseMessage&gt;</span>
        <span class="nt">&lt;/ns2:response&gt;</span>
    <span class="nt">&lt;/ns2:messageresponses&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 2 of 2    "</span><span class="p">,</span><span class="x">
  </span><span class="s">"messageresponses"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"from"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"John Smith"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"John_Smith.484215.Critical_Incident_Management@Contact.whispir.com"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mobile"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
      </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"jsmith@test.com"</span><span class="p">,</span><span class="x">
      </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"responseCategory"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"noresponse"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseMessage"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"content"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"N/A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"acknowledged"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"N/A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"channel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"N/A"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">},{</span><span class="x">
    </span><span class="s">"from"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred Smith"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred_Smith.341550.Critical_Incident_Management@Contact.whispir.com"</span><span class="p">,</span><span class="x">
      </span><span class="s">"mobile"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
      </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"fsmith@test.com"</span><span class="p">,</span><span class="x">
      </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"responseCategory"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"notmatched"</span><span class="p">,</span><span class="x">
    </span><span class="s">"responseMessage"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"content"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"OK, got it. Thanks."</span><span class="p">,</span><span class="x">
      </span><span class="s">"acknowledged"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"28/09/12 08:48"</span><span class="p">,</span><span class="x">
      </span><span class="s">"channel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"SMS"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>This shows the application client that there were two intended recipients of this message.</p>

<p>One of the recipients is in the <strong>noresponse</strong> category, meaning they have not provided a response.  The other recipient is in the <strong>notmatched</strong> category, meaning the response did not match any search criteria.</p>
</blockquote>
</blockquote>

<p>Using the links provided in the message response, the user can simply make a new API request to retrieve the <strong>detailedResponses</strong> URL. </p>

<p>The resulting request would look as follows:</p>

<p><code class="prettyprint">GET https://api.whispir.com/messages/069BF68E5E0FE99B/messageresponses?view=detailed&amp;filter=default&amp;apikey=498nadsasdff09fewdsafjaa90f</code></p>

<p>This request is asking for a couple of things:</p>

<ol>
<li> The URL is specifically asking for all of the <strong>messageresponses</strong> to the message with ID <strong>069BF68E5E0FE99B</strong></li>
<li> The <strong>View</strong> parameter is specifying that the message responses should be shown in a <strong>detailed</strong> view</li>
<li> The <strong>Filter</strong> parameter is specifying that the filter should not use a response rule, it should show the <strong>default</strong> filter</li>
</ol>

<p>As this is a <strong>GET</strong> request we don&rsquo;t have to provide any message body.</p>

<p><strong>Note:</strong> Searching responses will be described further on in this documentation.</p>

<ul>
<li>  The <strong>responseMessage channel</strong> describes the messaging channel that the response has come in to the Whispir Platform via.</li>
<li>  The <strong>responseMessage content</strong> describes the actual content of the inbound message.</li>
<li>  The <strong>responseMessage acknowledged</strong> shows the date of when the response was received by the Whispir Platform</li>
</ul>

        <h1 id="templates">Templates</h1>

<p>Using the Whispir.io API, messages can be stored as Message Templates that can be easily referenced within your API calls.</p>

<p>The purpose of using a Message Template rather than including your content directly into your messages API call is to ensure a separation of message content/design and application code.</p>

<p>If you are including the content and design of messages within your application code, in the event these need to change, this is often a task for a developer, resulting in potentially lengthy change request cycles.</p>

<p>The simple inclusion of a Message Template can alleviate this completely, allowing the designers to control the look and feel of the message, while the developer can control when it is triggered.</p>

<h2 id="creating-templates">Creating Templates</h2>

<blockquote>
<p>Creating Templates</p>

<blockquote>
<p>The following API calls allow users to manage Templates using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/templates?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.template-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;ns3:template</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span> 
              <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;messageTemplateName&gt;</span>Sample SMS Template<span class="nt">&lt;/messageTemplateName&gt;</span>
  <span class="nt">&lt;messageTemplateDescription&gt;</span>
    Template to provide an example on whispir.io
  <span class="nt">&lt;/messageTemplateDescription&gt;</span>
  <span class="nt">&lt;subject&gt;</span>Test SMS Message<span class="nt">&lt;/subject&gt;</span>
  <span class="nt">&lt;body&gt;</span>This is the body of my test SMS message<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns3:template&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">template</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"messageTemplateName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Sample SMS Template"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"messageTemplateDescription"</span><span class="o">:</span><span class="x"> </span><span class="s">"Template to provide an example on whispir.io"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS Message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test SMS message"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The sample code above will create a simple SMS only message template within the default workspace.<br/><br/>
The expected response to this call is an <strong>HTTP 201 - Created</strong>.</p>
</blockquote>
</blockquote>

<p>To create a new message template, you can use the <code class="prettyprint">/templates</code> endpoint.</p>

<p>Only <strong>3 fields</strong> are required:</p>

<ol>
<li>messageTemplateName - the name of the template to be stored</li>
<li>subject - the first line or identifier of the SMS</li>
<li>body - At least one of the <strong>Body</strong> fields must be populated (SMS, Email, Voice or Web).</li>
</ol>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateName:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the message template to be used within message requests.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateDescription:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the message template for others to understand it&rsquo;s purpose.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">responseTemplateId:</td>
            <td><strong>String</strong><br/>
                Specifies the ID of the Response Rule that should be associated with this Message Template.<br/><br/>
                Response Rules are further described later in this documentation.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the first line of the SMS message or Voice call, and the subject of the Email message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">body:</td>
            <td><strong>String</strong><br/>
                Specifies the content of the SMS message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>Object</strong><br/>
                Email object described below. Used for sending email messages.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voice:</td>
            <td><strong>Object</strong><br/>
                Voice object described below. Used for sending voice calls to mobile phones and landlines.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">web:</td>
            <td><strong>Object</strong><br/>
                Web object described below. Used for web publishing and Rich Messages.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">social:</td>
            <td><strong>Object</strong><br/>
                Social object described below. Used for publishing content to social media (Twitter, Facebook, LinkedIn).
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">type:</td>
            <td><strong>String</strong><br/>
                Allows the user to modify the message behaviour for replies and DLRs (delivery receipts) e.g.
                <ul>
                    <li>defaultNoReply - Used to reject any replies to this message.</li>
                    <li>noDlr - Used to specify that DLRs should not be enabled for this message.</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">features:</td>
            <td><strong>Object</strong><br/>
                Allows the user to modify the push notifications properties if these are configured in the company.
                <br/>
                <br/>
                <strong>pushOptions:</strong>
                <ul>
                    <li>notifications - enabled/disabled</li>
                    <li>escalationMins - # mins to await a push notifications response</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<p><strong>Note:</strong> All of the options above are the same as provided in the <code class="prettyprint">/messages</code> endpoint <a href="#communications">here</a></p>

<h2 id="retrieving-templates">Retrieving Templates</h2>

<blockquote>
<p>Retrieving Templates</p>

<blockquote>
<p>The following API Methods allow you to access templates via the API</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/templates?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.template-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 4 of 4<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:messagetemplates&gt;</span>
        <span class="nt">&lt;ns2:template&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/templates/F0547F6F2E4839F8?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;id&gt;</span>F0547F6F2E4839F8<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;messageTemplateDescription&gt;</span>
            <span class="nt">&lt;/messageTemplateDescription&gt;</span>
            <span class="nt">&lt;messageTemplateName&gt;</span>
              Appointment Reminder
            <span class="nt">&lt;/messageTemplateName&gt;</span>
        <span class="nt">&lt;/ns2:template&gt;</span>
        <span class="nt">&lt;ns2:template&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/templates/DDE10AC13FB0E457?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;id&gt;</span>DDE10AC13FB0E457<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;messageTemplateDescription&gt;</span>
            <span class="nt">&lt;/messageTemplateDescription&gt;</span>
            <span class="nt">&lt;messageTemplateName&gt;</span>
              Customer Survey
            <span class="nt">&lt;/messageTemplateName&gt;</span>
        <span class="nt">&lt;/ns2:template&gt;</span>
        <span class="nt">&lt;ns2:template&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/templates/900972D1C916FE84?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;id&gt;</span>900972D1C916FE84<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;messageTemplateDescription&gt;</span>
            <span class="nt">&lt;/messageTemplateDescription&gt;</span>
            <span class="nt">&lt;messageTemplateName&gt;</span>
              Service announcement
            <span class="nt">&lt;/messageTemplateName&gt;</span>
        <span class="nt">&lt;/ns2:template&gt;</span>
        <span class="nt">&lt;ns2:template&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/templates/9CB9BE20B885542D?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;id&gt;</span>9CB9BE20B885542D<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;messageTemplateDescription&gt;</span>
            <span class="nt">&lt;/messageTemplateDescription&gt;</span>
            <span class="nt">&lt;messageTemplateName&gt;</span>
              Shift Opportunity
            <span class="nt">&lt;/messageTemplateName&gt;</span>
        <span class="nt">&lt;/ns2:template&gt;</span>
    <span class="nt">&lt;/ns2:messagetemplates&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">template</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 4 of 4    "</span><span class="p">,</span><span class="x">
  </span><span class="s">"messagetemplates"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Appointment Reminder"</span><span class="p">,</span><span class="x">
    </span><span class="s">"messageTemplateDescription"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"F0547F6F2E4839F8"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/templates/F0547F6F2E4839F8?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Customer Survey"</span><span class="p">,</span><span class="x">
    </span><span class="s">"messageTemplateDescription"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"DDE10AC13FB0E457"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/templates/DDE10AC13FB0E457?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Service announcement"</span><span class="p">,</span><span class="x">
    </span><span class="s">"messageTemplateDescription"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"900972D1C916FE84"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/templates/900972D1C916FE84?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Shift Opportunity"</span><span class="p">,</span><span class="x">
    </span><span class="s">"messageTemplateDescription"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"9CB9BE20B885542D"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/templates/9CB9BE20B885542D?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">}</span><span class="x"> </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To retrieve a list of templates from the Whispir.io API you can execute an <strong>HTTP GET</strong> using the <code class="prettyprint">/templates</code> endpoint.</p>

<p>You will need to supply one of the following headers (for retrieving JSON or XML):</p>

<ul>
<li><code class="prettyprint">Accept: application/vnd.whispir.template-v1+xml</code></li>
<li><code class="prettyprint">Accept: application/vnd.whispir.template-v1+json</code></li>
</ul>

<p>An array of Message Templates will be returned to you in the HTTP response body.</p>

<p>Each of these templates will provide the following information:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Response Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateName:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the message template to be used within message requests.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateDescription:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the message template for others to understand it&rsquo;s purpose.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">id:</td>
            <td><strong>String</strong><br/>
                Specifies the ID of the template that can be used for message sending.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">link:</td>
            <td><strong>Array</strong><br/>
                Provides a list of URLs that can be used to manipulate or access the message template.
                <ul>
                  <li>uri - the link to access the message template</li>
                  <li>rel - the descriptor for what the link will do</li>
                  <li>method - the HTTP method to use with this particular link</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h2 id="updating-templates">Updating Templates</h2>

<blockquote>
<p>Updating Templates</p>

<blockquote>
<p>The following API calls allow users to update Template content using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.whispir.com/templates/C37DCBAEFF73FEDA45?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.template-v1+xml
Accept: application/vnd.whispir.template-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;ns3:template</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span> 
              <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;messageTemplateName&gt;</span>Sample SMS Template<span class="nt">&lt;/messageTemplateName&gt;</span>
  <span class="nt">&lt;messageTemplateDescription&gt;</span>
    Template to provide an example on whispir.io
  <span class="nt">&lt;/messageTemplateDescription&gt;</span>
  <span class="nt">&lt;subject&gt;</span>Test SMS Message<span class="nt">&lt;/subject&gt;</span>
  <span class="nt">&lt;body&gt;</span>This is the body of my test SMS message<span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;email&gt;</span>
    <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;body&gt;</span>
      This is the content of my plain text email in the template
    <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/email&gt;</span>
  <span class="nt">&lt;voice&gt;</span>
    <span class="c">&lt;!-- Don't put line breaks in this section --&gt;</span>
    <span class="nt">&lt;type&gt;</span>
        ConfCall:,
        ConfAccountNo:,
        ConfPinNo:,
        ConfModPinNo:,
        Pin:
    <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;header&gt;</span>This is the intro of my voice call<span class="nt">&lt;/header&gt;</span>
    <span class="nt">&lt;body&gt;</span>This is the content of my voice call<span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/voice&gt;</span>
  <span class="nt">&lt;web&gt;</span> 
    <span class="nt">&lt;body&gt;</span>This is web body of my test message<span class="nt">&lt;/body&gt;</span> 
    <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span> 
  <span class="nt">&lt;/web&gt;</span> 
  <span class="nt">&lt;social&gt;</span>
    <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"social"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;body&gt;</span>Twitter Content.<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/social&gt;</span>
    <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"social_long"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;body&gt;</span>Facebook Content.<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;type&gt;</span>text/plain<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/social&gt;</span>
  <span class="nt">&lt;/social&gt;</span>
  <span class="nt">&lt;type&gt;</span>defaultNoReply<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;features&gt;</span>
    <span class="nt">&lt;pushOptions&gt;</span>
      <span class="nt">&lt;notifications&gt;</span>enabled<span class="nt">&lt;/notifications&gt;</span>
      <span class="nt">&lt;escalationMins&gt;</span>3<span class="nt">&lt;/escalationMins&gt;</span>
    <span class="nt">&lt;/pushOptions&gt;</span>
  <span class="nt">&lt;/features&gt;</span>
<span class="nt">&lt;/ns3:template&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">template</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">template</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"messageTemplateName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Sample SMS Template"</span><span class="p">,</span><span class="x"> 
   </span><span class="s">"messageTemplateDescription"</span><span class="o">:</span><span class="x"> </span><span class="s">"Template to provide an example on whispir.io"</span><span class="p">,</span><span class="x">
   </span><span class="s">"responseTemplateId"</span><span class="o">:</span><span class="x"> </span><span class="s">"Template to provide an example on whispir.io"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS Message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test SMS message"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test Email message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"footer"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the footer of my message 
                    (generally where a signature would go)"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"header"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the introduction, 
                    read out prior to any key press"</span><span class="p">,</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of the voice call, 
                  read out after the key press"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ConfCall:,
                  ConfAccountNo:,
                  ConfPinNo:,
                  ConfModPinNo:,
                  Pin:"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"web"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the content of my web publishing 
                 or Rich Push Message"</span><span class="p">,</span><span class="x">
        </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"social"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Twitter Content."</span><span class="x">
        </span><span class="p">},</span><span class="x">
        </span><span class="s">"social"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"social_long"</span><span class="p">,</span><span class="x">
            </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Facebook Content."</span><span class="p">,</span><span class="x">
            </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"defaultNoReply"</span><span class="p">,</span><span class="x">
    </span><span class="s">"features"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"pushOptions"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="s">"notifications"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"enabled"</span><span class="p">,</span><span class="x">
            </span><span class="s">"escalationMins"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"3"</span><span class="x">
        </span><span class="p">}</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The sample code above will update the message template specified by ID: <strong>C37DCBAEFF73FEDA45</strong> within the default workspace.<br/><br/>
The expected response to this call is an <strong>HTTP 204 - No Content</strong>.</p>
</blockquote>
</blockquote>

<p>To update existing message templates, you can use a PUT request the <code class="prettyprint">/templates</code> endpoint.</p>

<p>The following fields are required:</p>

<ol>
<li>messageTemplateName - the name of the template to be stored</li>
<li>subject - the first line or identifier of the SMS</li>
<li>body - At least one of the <strong>Body</strong> fields must be populated (SMS, Email, Voice or Web).</li>
</ol>

<p><strong>Note:</strong> Currently users cannot update templates with the same name as a template that already exists in Whispir. Users can overcome this by saving the updated template with a new name, then either changing this back in a subsequent save, or retaining the updated name.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateName:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the message template to be used within message requests.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">messageTemplateDescription:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the message template for others to understand it&rsquo;s purpose.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">responseTemplateId:</td>
            <td><strong>String</strong><br/>
                Specifies the ID of the Response Rule that should be associated with this Message Template.<br/><br/>
                Response Rules are further described later in this documentation.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the first line of the SMS message or Voice call, and the subject of the Email message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">body:</td>
            <td><strong>String</strong><br/>
                Specifies the content of the SMS message.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>Object</strong><br/>
                Email object described below. Used for sending email messages.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voice:</td>
            <td><strong>Object</strong><br/>
                Voice object described below. Used for sending voice calls to mobile phones and landlines.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">web:</td>
            <td><strong>Object</strong><br/>
                Web object described below. Used for web publishing and Rich Messages.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">social:</td>
            <td><strong>Object</strong><br/>
                Social object described below. Used for publishing content to social media (Twitter, Facebook, LinkedIn).
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">type:</td>
            <td><strong>String</strong><br/>
                Allows the user to modify the message behaviour for replies and DLRs (delivery receipts) e.g.
                <ul>
                    <li>defaultNoReply - Used to reject any replies to this message.</li>
                    <li>noDlr - Used to specify that DLRs should not be enabled for this message.</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">features:</td>
            <td><strong>Object</strong><br/>
                Allows the user to modify the push notifications properties if these are configured in the company.
                <br/>
                <br/>
                <strong>pushOptions:</strong>
                <ul>
                    <li>notifications - enabled/disabled</li>
                    <li>escalationMins - # mins to await a push notifications response</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<p><strong>Note:</strong> All of the options above are the same as provided in the <code class="prettyprint">/messages</code> endpoint <a href="#communications">here</a></p>

<h2 id="using-templates">Using Templates</h2>

<blockquote>
<p>Using Templates</p>

<blockquote>
<p>The following methods allow you to use the templates that you&rsquo;ve created in your Whispir Messages</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>john.smith@test.com<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;messageTemplateId&gt;</span>BACEB8D46BEF5315<span class="nt">&lt;/messageTemplateId&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"messageTemplateId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"BACEB8D46BEF5315"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>Alternatively, you can enter the Message Template Name in place of the Message Template ID:</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;messageTemplateName&gt;</span>Sample SMS Template<span class="nt">&lt;/messageTemplateName&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample SMS Template"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Whispir.io API messages can simply specify the Message Template ID in the messages request, instead of specifying the entire content payload.</p>

<p>The message template can then easily be changed (using either another API request or by logging in to the Whispir Platform) and the part of the application sending the messages does not need to be altered.</p>

<h2 id="overriding-templates">Overriding Templates</h2>

<blockquote>
<p>Overriding Templates</p>

<blockquote>
<p>You can override content in the template by supplying it inline with the message request</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;messageTemplateName&gt;</span>Sample SMS Template<span class="nt">&lt;/messageTemplateName&gt;</span>
    <span class="nt">&lt;subject&gt;</span>This will override the template Subject<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;body&gt;</span>This will override the template SMS Body<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x"> 
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"messageTemplateName"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample SMS Template"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This will override the template Subject"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This will override the template SMS Body"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Users can easily override the content of the Message Template by supplying the content inline with the request to the <code class="prettyprint">/messages</code> endpoint.</p>

<p>Any information provided in the message request will take precidence over the templated content.</p>

<p>All of the features that are specified on the template (for example, any message aliasing) will still be respected when the message is delivered.</p>

        <h1 id="response-rules">Response Rules</h1>

<p>Using Response Rules in combination with Message Templates allows users to automatically group responses to messages into different response groups for reporting purposes.</p>

<p>Response Rules are useful when users are sending messages with known responses, e.g. Ratings (1-5), Yes/No, or Accept/Decline.</p>

<p>Once the Response Rule has been defined, it can be associated with a Message Template and any responses to messages sent using the template will be automatically categorised.</p>

<p><strong>Note:</strong> Response Rules are sometimes called Response Templates. These names can be used interchangably.</p>

<h2 id="creating-response-rules">Creating Response Rules</h2>

<blockquote>
<p>Creating Response Rules</p>

<blockquote>
<p>The following API calls allow users to create new Response Rules using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/responserules?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.responserule-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:responserule</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Response Rule 1<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;&lt;/description&gt;</span> 
    <span class="nt">&lt;responseTemplatePatterns&gt;</span>
        <span class="nt">&lt;responseTemplatePattern&gt;</span>
            <span class="nt">&lt;name&gt;</span>Yes Rule<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;textPrompt&gt;</span>YES<span class="nt">&lt;/textPrompt&gt;</span>
            <span class="nt">&lt;voicePrompt&gt;</span>1<span class="nt">&lt;/voicePrompt&gt;</span>
            <span class="nt">&lt;spokenVoicePrompt&gt;</span>to select YES<span class="nt">&lt;/spokenVoicePrompt&gt;</span>
            <span class="nt">&lt;pattern&gt;</span>startswith<span class="nt">&lt;/pattern&gt;</span>
            <span class="nt">&lt;colour&gt;</span>#00947d<span class="nt">&lt;/colour&gt;</span>
        <span class="nt">&lt;/responseTemplatePattern&gt;</span>
    <span class="nt">&lt;/responseTemplatePatterns&gt;</span>
<span class="nt">&lt;/ns3:responserule&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">responserule</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Response Rule 1"</span><span class="p">,</span><span class="x">
  </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
  </span><span class="s">"responseTemplatePatterns"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"responseTemplatePattern"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Yes Rule"</span><span class="p">,</span><span class="x">
      </span><span class="s">"textPrompt"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"YES"</span><span class="p">,</span><span class="x">
      </span><span class="s">"voicePrompt"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1"</span><span class="p">,</span><span class="x">
      </span><span class="s">"spokenVoicePrompt"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"to select YES"</span><span class="p">,</span><span class="x">
      </span><span class="s">"pattern"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"startswith"</span><span class="p">,</span><span class="x">
      </span><span class="s">"colour"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"#00947d"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The sample code above will create a simple Response Rule with a single rule within the default workspace.<br/><br/>
The expected response to this call is an <strong>HTTP 201 - Created</strong>.</p>
</blockquote>
</blockquote>

<p>To create a new Response Rule, you can use the <code class="prettyprint">/responserules</code> endpoint.</p>

<p>The following fields can be utilised within the request:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the Response Rule.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the response rule for others to understand it&rsquo;s purpose.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">responseTemplatePatterns:</td>
            <td><strong>Object</strong><br/>
                This object contains the responseTemplatePattern array which contains each of the response rule elements.
            </td>
        </tr>
    </tbody>
</table>

<h3 id="response-template-patterns">Response Template Patterns</h3>

<p>Each Response Rule has a series of <strong>Patterns</strong> that allow the creator to specify what textual content should be matched in the response SMS or Email, and a number that should be entered when IVR (Voice) is being used.</p>

<p>The patterns specify the following information:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Response Template Pattern Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                The name of the Response Category.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">pattern:</td>
            <td><strong>String</strong><br/>
                Specifies the mechanism for matching the textPrompt.<br/><br/>
                The following options are available:
                <ul>
                    <li>startsWith</li>
                    <li>contains</li>
                    <li>exactmatch</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">textPrompt:</td>
            <td><strong>String</strong><br/>
                Specifies the textual string that should be matched using the pattern (specified above) within the Email, SMS or Web response. 
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voicePrompt:</td>
            <td><strong>String</strong><br/>
                The number (from 0-9, * or #) that the recipient of the voice call should enter to select this response category.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">spokenVoicePrompt:</td>
            <td><strong>String</strong><br/>
                The TTS (text-to-speech) that is dynamically read out when describing to the user what this response category is.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">colour:</td>
            <td><strong>String</strong><br/>
                The hexidecimal colour code that is used in the Message Response Report to show this category being used.
            </td>
        </tr>
    </tbody>
</table>

<p>Each Response Rule can specify as many Response Template Patterns as required.</p>

<p>Each of the Patterns specified will also dynamically create buttons within any Rich Message that is associated with the Response Rule.</p>

<p>This provides an out of the box capability to quickly gather feedback from the field using a Rich User interface, and leveraging SMS as the delivery mechanism.</p>

<p>For more information about using <strong>Rich Messages</strong>, click <a href="#rich-messages">here</a>.</p>

<h2 id="using-response-rules">Using Response Rules</h2>

<p>After creating a Response Rule, you must create a new Message Template (or update an existing one) and associate the Response Rule ID.</p>

<p><strong>Note:</strong> The Response Rule ID will be returned in the <code class="prettyprint">Location</code> header after a successful creation.</p>

<p>This association of Response Rule to Message Template is performed using the <code class="prettyprint">responseTemplateId</code> field within the Message Template.</p>

<p>For more information on Creating Message Templates, click <a href="#creating-templates">here</a>.</p>

        <h1 id="contacts">Contacts</h1>

<p>Contacts form the core of the Whispir offerings. They make up the base data to which and from all the communications are performed.</p>

<p>The Whispir API provides secure cloud based storage for your contact information.  This can then easily be retrieved by any application or device that requires access, and has permission to do so.</p>

<h2 id="creating-new-contacts">Creating new Contacts</h2>

<blockquote>
<p>Creating new Contacts</p>

<blockquote>
<p>Users can easily create new contacts by using the following request structure</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.whispir.com/contacts?apikey=[your api key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.contact-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:contact</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;firstName&gt;</span>John<span class="nt">&lt;/firstName&gt;</span>
    <span class="nt">&lt;lastName&gt;</span>Wick<span class="nt">&lt;/lastName&gt;</span>
    <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;timezone&gt;</span>Australia/Melbourne<span class="nt">&lt;/timezone&gt;</span>
    <span class="nt">&lt;workEmailAddress1&gt;</span>jsmith@testcompany.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
    <span class="nt">&lt;workMobilePhone1&gt;</span>61423456789<span class="nt">&lt;/workMobilePhone1&gt;</span>
    <span class="nt">&lt;workCountry&gt;</span>Australia<span class="nt">&lt;/workCountry&gt;</span>
    <span class="nt">&lt;messagingoptions&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"sms"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkMobilePhone1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"email"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkEmailAddress1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"voice"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkMobilePhone1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
    <span class="nt">&lt;/messagingoptions&gt;</span>
<span class="nt">&lt;/ns2:contact&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
    </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="p">,</span><span class="x">
    </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
    </span><span class="s">"timezone"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia/Melbourne"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="x"> </span><span class="s">"jsmith@testcompany.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workMobilePhone1"</span><span class="o">:</span><span class="x"> </span><span class="s">"61423456789"</span><span class="p">,</span><span class="x">
    </span><span class="s">"workCountry"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia"</span><span class="p">,</span><span class="x">
    </span><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
          </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"sms"</span><span class="p">,</span><span class="x">
          </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
          </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkMobilePhone1"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
          </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"email"</span><span class="p">,</span><span class="x">
          </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
          </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkEmailAddress1"</span><span class="x">
    </span><span class="p">},{</span><span class="x">
          </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"voice"</span><span class="p">,</span><span class="x">
          </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
          </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkMobilePhone1"</span><span class="x">
    </span><span class="p">}]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The successful response will be a 201 with the details of the contact created and its associated unique <code class="prettyprint">mri</code>.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:contact</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;type&gt;</span>COMPANY<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;firstName&gt;</span>John<span class="nt">&lt;/firstName&gt;</span>
    <span class="nt">&lt;lastName&gt;</span>Wick<span class="nt">&lt;/lastName&gt;</span>
    <span class="nt">&lt;locations&gt;</span>
        <span class="nt">&lt;location&gt;</span>
            <span class="nt">&lt;latitude&gt;</span>0.0<span class="nt">&lt;/latitude&gt;</span>
            <span class="nt">&lt;longitude&gt;</span>0.0<span class="nt">&lt;/longitude&gt;</span>
            <span class="nt">&lt;type&gt;</span>CurrentLocation<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;/location&gt;</span>
    <span class="nt">&lt;/locations&gt;</span>
    <span class="nt">&lt;lastModifiedTime&gt;</span>2015-06-04T17:37:01+10:00<span class="nt">&lt;/lastModifiedTime&gt;</span>
    <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;timezone&gt;</span>+10<span class="nt">&lt;/timezone&gt;</span>
    <span class="nt">&lt;workEmailAddress1&gt;</span>jsmith@testcompany.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
    <span class="nt">&lt;workMobilePhone1&gt;</span>61423456789<span class="nt">&lt;/workMobilePhone1&gt;</span>
    <span class="nt">&lt;workCountry&gt;</span>Australia<span class="nt">&lt;/workCountry&gt;</span>
    <span class="nt">&lt;mri&gt;</span>John_Wick.1143139@Contact.whispir.sg<span class="nt">&lt;/mri&gt;</span>
    <span class="nt">&lt;messagingoptions&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"sms"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkMobilePhone1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"email"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkEmailAddress1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"voice"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkMobilePhone1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
    <span class="nt">&lt;/messagingoptions&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/contacts/CB4558257DD86D09?apikey=[your api key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/contacts/CB4558257DD86D09?apikey=[your api key]"</span> <span class="na">rel=</span><span class="s">"updateContact"</span> <span class="na">method=</span><span class="s">"PUT"</span> <span class="na">type=</span><span class="s">"application/vnd.whispir.contact-v1+json,application/vnd.whispir.contact-v1+xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/contacts/CB4558257DD86D09?apikey=[your api key]"</span> <span class="na">rel=</span><span class="s">"deleteContact"</span> <span class="na">method=</span><span class="s">"DELETE"</span><span class="nt">/&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="p">{</span><span class="x">
  </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"COMPANY"</span><span class="p">,</span><span class="x">
  </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
  </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="p">,</span><span class="x">
  </span><span class="s">"locations"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"latitude"</span><span class="o">:</span><span class="x"> </span><span class="s">"0.0"</span><span class="p">,</span><span class="x">
      </span><span class="s">"longitude"</span><span class="o">:</span><span class="x"> </span><span class="s">"0.0"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"CurrentLocation"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">],</span><span class="x">
  </span><span class="s">"lastModifiedTime"</span><span class="o">:</span><span class="x"> </span><span class="s">"2015-06-04T17:37:01+10:00"</span><span class="p">,</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
  </span><span class="s">"timezone"</span><span class="o">:</span><span class="x"> </span><span class="s">"+10"</span><span class="p">,</span><span class="x">
  </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="x"> </span><span class="s">"jsmith@testcompany.com"</span><span class="p">,</span><span class="x">
  </span><span class="s">"workMobilePhone1"</span><span class="o">:</span><span class="x"> </span><span class="s">"61423456789"</span><span class="p">,</span><span class="x">
  </span><span class="s">"workCountry"</span><span class="o">:</span><span class="x"> </span><span class="s">"Australia"</span><span class="p">,</span><span class="x">
  </span><span class="s">"mri"</span><span class="o">:</span><span class="x"> </span><span class="s">"John_Wick.1143139@Contact.whispir.sg"</span><span class="p">,</span><span class="x">
  </span><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"sms"</span><span class="p">,</span><span class="x">
      </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
      </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkMobilePhone1"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"email"</span><span class="p">,</span><span class="x">
      </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
      </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkEmailAddress1"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"voice"</span><span class="p">,</span><span class="x">
      </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
      </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkMobilePhone1"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/contacts/CB4558257DD86D09?apikey=[your api key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/contacts/CB4558257DD86D09?apikey=[your api key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"updateContact"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"PUT"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.contact-v1+json,application/vnd.whispir.contact-v1+xml"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/contacts/CB4558257DD86D09?apikey=[your api key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"deleteContact"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"DELETE"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To create a new contact, you can use the <code class="prettyprint">/contacts</code> endpoint. The method is POST. Ensure that the following mandatory fields are provided for.</p>

<p>The following fields are required:</p>

<ul>
<li>firstName</li>
<li>lastName</li>
<li>workEmailAddress1</li>
<li>workMobilePhone1</li>
<li>workCountry</li>
<li>timezone</li>
</ul>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">firstName:</td>
            <td><strong>String</strong><br/>
                Specifies the firstName of the contact
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">lastName:</td>
            <td><strong>String</strong><br/>
                Specifies the lastName of the contact
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">title:</td>
            <td><strong>String</strong><br/>
                The title of the name
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">status:</td>
            <td><strong>String</strong><br/>
                Specifies the validity status of the contact. The status can be one of - 
                <ul>
                    <li>Active (A)</li>
                    <li>Disabled (D)</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">companyName:</td>
            <td><strong>String</strong><br/>
                Specifies the company name
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">jobTitle:</td>
            <td><strong>String</strong><br/>
                Specifies the job title at the company
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">division:</td>
            <td><strong>String</strong><br/>
                Specifies the Division in the company to which this contact is associated with
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">businessUnit:</td>
            <td><strong>String</strong><br/>
                Specifies the Business Unit in the company to which this contact is associated with
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">department:</td>
            <td><strong>String</strong><br/>
                Specifies the Department in the company to which this contact is associated with
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Teams and Roles:</td>
            <td><strong>String</strong><br/>
                Specifies the primary and Secondary values for each respective variable
                <ul>
                    <li>teamName1, teamName2</li>
                    <li>role1, role2</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Work Place Address:</td>
            <td><strong>String</strong><br/>
                Specifies the primary and Secondary values for each respective type. Of all these the <b>workEmailAddress1</b> > is the mandatory field.
                <ul>
                    <li>workEmailAddress1, workEmailAddress2</li>
                    <li>workAddress1, workAddress2</li>
                    <li>workSuburb, workState</li>
                    <li>workPostCode, workCountry</li>
                    <li>workPostalAddress1, workPostalAddress2</li>
                    <li>workPostalSuburb, workPostalState</li>
                    <li>workPostalPostCode, workPostalCountry</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Work Place Phones:</td>
            <td><strong>Number</strong><br/>
                Specifies the primary and Secondary values for each respective type. Of all these the <b>workMobilePhone1</b> > is the mandatory field.
                <ul>
                    <li>workMobilePhone1, workMobilePhone2</li>
                    <li>workPhoneAreaCode1, workPhone1</li>
                    <li>workPhoneAreaCode2, workPhone2</li>
                    <li>workFaxAreaCode1, workFax1</li>
                    <li>workSetellitePhone, WorkOtherPhone</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">timezone:</td>
            <td><strong>String</strong><br/>
                Specifies the timezone in which the contact lives in. Values in relation to GMT.<br/><br/>
                Supported values are:
                <ul>
                    <li>Offset from GMT in the format `+/-NN` e.g. `+10`</li>
                    <li>Worldwide Timezone Format in the format `Country/City` e.g. `Australia/Melbourne`</li>
                </ul> 
                For a list of available worldwide timezones, click <a href="http://developer.whispir.com/files/Whispir-Timezones-v1.csv" title="Timezone IDs" target="_blank">here</a>.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Personal Address:</td>
            <td><strong>String</strong><br/>
                Specifies the primary and Secondary values for each respective type
                <ul>
                    <li>personalEmailAddress1, personalEmailAddress2</li>
                    <li>personalAddress1, personalAddress2</li>
                    <li>personalSuburb, personalState</li>
                    <li>personalCountry, personalPostCode</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Personal Phones:</td>
            <td><strong>Number</strong><br/>
                Specifies the primary and Secondary values for each respective type
                <ul>
                    <li>personalPhoneAreaCode1, personalPhone1</li>
                    <li>personalPhoneAreaCode2, personalPhone2</li>
                    <li>personalFaxAreaCode1, personalFax1</li>
                    <li>otherPhoneAreaCode1, otherPhone1</li>
                    <li>otherMobile</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Alias Fields:</td>
            <td><strong>String</strong><br/>
                The other (alias) name and title fields
                <ul>
                    <li>otherFirstName, otherLastName, otherTitle</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Messaging Options:</td>
            <td><strong>Object</strong><br/>
                Read Format of Messaging Options below.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">Other Fields :</td>
            <td><strong>String</strong><br/>
                Whispir allows external developers to build a &lsquo;Self-Subscription&rsquo; portal to allow their own contacts to self-register for internal systems. To support this feature, the following fields are provided.<br>
                <ul>
                    <li>username - must be unique within the company (users and active contacts)</li>
                    <li>password - mandatory only in conjunction with the username</li>
                    <li>secretQuestion - mandatory (used for password reset)</li>
                    <li>secretAnswer - mandatory (used for password reset)</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h3 id="format-of-messaging-options">Format of Messaging Options</h3>
<pre><code class="highlight xml">    <span class="nt">&lt;messagingoptions&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"sms"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkMobilePhone1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"email"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkEmailAddress1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
        <span class="nt">&lt;messagingoption</span> <span class="na">channel=</span><span class="s">"voice"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;primary&gt;</span>WorkMobilePhone1<span class="nt">&lt;/primary&gt;</span>
            <span class="nt">&lt;secondary&gt;&lt;/secondary&gt;</span>
            <span class="nt">&lt;tertiary&gt;&lt;/tertiary&gt;</span>
        <span class="nt">&lt;/messagingoption&gt;</span>
    <span class="nt">&lt;/messagingoptions&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"sms"</span><span class="p">,</span><span class="x">
      </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
      </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkMobilePhone1"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"email"</span><span class="p">,</span><span class="x">
      </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
      </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkEmailAddress1"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"channel"</span><span class="o">:</span><span class="x"> </span><span class="s">"voice"</span><span class="p">,</span><span class="x">
      </span><span class="s">"enabled"</span><span class="o">:</span><span class="x"> </span><span class="s">"true"</span><span class="p">,</span><span class="x">
      </span><span class="s">"primary"</span><span class="o">:</span><span class="x"> </span><span class="s">"WorkMobilePhone1"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span></code></pre>

<p>Whispir allows to define the different channels that needs to be enabled/used for communication. Using Messaging options, one can define the preferred/allowed channels and the respective primary, secondary, and tertiary contact numbers, emails to be used. These values again are derived from the above specified various personal, work attributes.</p>

<p>Available messaging options -</p>

<ul>
<li>sms</li>
<li>email</li>
<li>voice</li>
</ul>

<p>Each messaging options allows to specify the following 3 configuration settings</p>

<dl>
    <dt>enabled</dt>
    <dd>- true</dd>
    <dd>- false</dd>
    <dt>primary</dt>
    <dd>workMobilePhone1 (Can be any of the valid attribute which has a value in it)</dd>
    <dt>secondary</dt>
    <dd> > <i>optional</i> > - workMobilePhone2</dd>
    <dt>tertiary</dt>
    <dd> > <i>optional</i> > - personalMobilePhone1</dd>
</dl>

<h2 id="retrieving-contacts">Retrieving Contacts</h2>

<blockquote>
<p>Retrieving a list of Contacts</p>

<blockquote>
<p>Contacts can easily be retrieved from the Whispir API using the following endpoints:</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/contacts?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.contact-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 1 of 1<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:contacts&gt;</span>
        <span class="nt">&lt;ns2:contact&gt;</span>
            <span class="nt">&lt;id&gt;</span>AF48A9EC3F02E43C<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;firstName&gt;</span>Fred<span class="nt">&lt;/firstName&gt;</span>
            <span class="nt">&lt;lastName&gt;</span>Smith<span class="nt">&lt;/lastName&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;messagingoptions/&gt;</span> &gt; 
            <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
                      <span class="na">rel=</span><span class="s">"self"</span> 
                      <span class="na">uri=</span><span class="s">"http://api.whispir.com/contacts/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:contact&gt;</span>
    <span class="nt">&lt;/ns2:contacts&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 1 of 1"</span><span class="p">,</span><span class="x">
  </span><span class="s">"contacts"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"AF48A9EC3F02E43C"</span><span class="p">,</span><span class="x">
      </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Fred"</span><span class="p">,</span><span class="x">
      </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Smith"</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[],</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
        </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
        </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"http://api.whispir.com/contacts/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="x">
      </span><span class="p">}</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Contacts can be retrieved quite easily with a GET request to the <code class="prettyprint">/contacts</code>. A simple /contacts will result in all contacts being retrieved with all of their information. No filters are applied.</p>

<p>Once the request is placed, the response will be a list of url&rsquo;s to each of the contacts that the API user has access to/or has requested for via the search criteria.  </p>

<p><strong>Note:</strong> The sample request here shows contacts from the default workspace. If you need to retrieve contacts from a specific workspace, please ensure that the workspace information is passed in the URL.</p>

<dl>
    <dt>URI for default workspace</dt>
    <dd>- https://api.whispir.com/contacts?apikey=<your_api_key></dd>
</dl>

<dl>
    <dt>URI for a specific workspace with id BC348DC83DF1AB34</dt>
    <dd> > - https://api.whispir.com/workspaces/BC348DC83DF1AB34/contacts?apikey=<your_api_key></dd>
</dl>

<h3 id="get-a-specific-contact">Get a specific contact</h3>

<blockquote>
<p>Retrieving a specific Contact</p>

<blockquote>
<p>Users can retrieve a specific contact by supplying the Contact ID in the URL.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/contacts/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.contact-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:contact</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;id&gt;</span>AF48A9EC3F02E43C<span class="nt">&lt;/id&gt;</span>
   <span class="nt">&lt;firstName&gt;</span>Fred<span class="nt">&lt;/firstName&gt;</span>
   <span class="nt">&lt;lastName&gt;</span>Smith<span class="nt">&lt;/lastName&gt;</span>
   <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
   <span class="nt">&lt;messagingoptions/&gt;</span> &gt; 
   <span class="nt">&lt;ns2:link</span> <span class="na">method=</span><span class="s">"GET"</span> 
             <span class="na">rel=</span><span class="s">"self"</span> 
             <span class="na">uri=</span><span class="s">"http://api.whispir.com/contacts/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns2:contact&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"AF48A9EC3F02E43C"</span><span class="p">,</span><span class="x">
   </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Fred"</span><span class="p">,</span><span class="x">
   </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Smith"</span><span class="p">,</span><span class="x">
   </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
   </span><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[],</span><span class="x">
   </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
     </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="p">,</span><span class="x">
     </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
     </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"http://api.whispir.com/contacts/AF48A9EC3F02E43C?apikey=&lt;your_api_key&gt;"</span><span class="x">
   </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To get details of a specific contact, the URI must be passed with the ID of the contact. So, the URI shall be:</p>

<p><code class="prettyprint">https://api.whispir.com/contacts/AF48A9EC3F02E43C</code> </p>

<p>Where <code class="prettyprint">AF48A9EC3F02E43C</code> is the contact id.</p>

<h3 id="showing-custom-fields">Showing Custom Fields</h3>

<blockquote>
<p>Showing Custom Fields on Contacts</p>

<blockquote>
<p>Within Whispir, contacts can have Custom Fields present to store data that is not supported on the default contact profile.  Users can show this custom data for contacts by adding the <code class="prettyprint">customFields=true</code> query parameter.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/contacts?apikey=&lt;your_api_key&gt;&amp;customFields=true
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.contact-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<p>Whispir supports extension of the default Contact Profile through the use of Custom Fields. Custom fields can support other fields that may be required to be stored on your Contacts, such as Staff ID, Internal Billing Codes, or One Up Manager.</p>

<p>These custom fields can be configured on any account through a Change Request to Whispir.</p>

<p>In order to reveal these custom fields on the contact profile, you can use the <code class="prettyprint">customFields=true</code> flag within your API request.</p>

<p><code class="prettyprint">/contacts/AB38CB3EFD38AFDB?customFields=true</code></p>

<h2 id="searching-for-contacts">Searching for Contacts</h2>

<blockquote>
<p>Searching for Contacts</p>

<blockquote>
<p>Users can easily use further query parameters to search for specific contacts within Whispir.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/contacts?apikey=&lt;your_api_key&gt;&amp;firstName=Sam&amp;sortOrder=desc&amp;sortFields=workEmailAddressPrimary
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.contact-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<p>Contacts can be searched for in a given workspace by passing in valid search criteria. The search criteria usually can be any of the contact elements (field names) and will be sent in as part of the URI as query parameters.</p>

<p>This searching mechanism can be useful to see if any contacts exist in the system with a specific email address, phone number, or job role and so on. Simply to state, the API can help you search based on any attribute associated with the contact.</p>

<p>The key parameters that are required on the URL to facilitate this search are as follows:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">URI Request Elements as Query Params</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">fieldname:</td>
            <td><strong>String</strong><br/>
                Specifies the field name of the contact object. The field name could be any thing as long as it is a valid contact object.
                <br><br>
                <b>Ex:</b><br>
                http://api.whispir.com/contacts?apikey=<your_api_key><b>&firstName=Sam</b>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">sortOrder:</td>
            <td><strong>String</strong><br/>
                The order in which you require the results to be returned. Either `asc` or `desc`.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">sortFields:</td>
            <td><strong>String</strong><br/>
                The fields that you require the ordering to be performed on. Multiple fields can be provided, separated by a comma.
                <br><br>
                <b>Ex:</b><br>
                http://api.whispir.com/contacts?apikey=<your_api_key>&firstName=Sam<b>&sortFields=lastName,jobTitle</b>
            </td>
        </tr>
    </tbody>
</table>

<p>The search can also be done inside a specific workspace if needed, by adding the workspace information in the URI.</p>

<p><strong>Note:</strong> There is no global search feature available where one can search on all the workspaces present in the system (under allowed user permission). So, When no workspace is provided, the search is performed on the default workspace of the user.</p>

<h3 id="searching-for-contacts-with-custom-fields">Searching for contacts with Custom Fields</h3>

<blockquote>
<p>Searching for Contacts using Custom Fields</p>

<blockquote>
<p>Within Whispir, contacts can have Custom Fields present to store data that is not supported on the default contact profile.  Users can search for contacts using this data using the API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/contacts?apikey=&lt;your_api_key&gt;&amp;custom_staffID=123456
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.contact-v1+xml
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">
</span></code></pre>

<p>As Whispir supports extension of the default Contact Profile through the use of Custom Fields. There may be cases where users want to search for Contacts that contain these specific fields. As such, the Whispir API supports searching for contacts using these custom fields.</p>

<p>Any custom field can be searched by adding the <code class="prettyprint">custom_</code> prepended to the name.</p>

<p>For example, if the field name is <strong>StaffId</strong>, then the URL would search for:</p>

<p><code class="prettyprint">/contacts?custom_StaffId=12345</code></p>

<h2 id="updating-contacts">Updating Contacts</h2>

<blockquote>
<p>Updating Contacts</p>

<blockquote>
<p>The following endpoints allow users to update contacts using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.whispir.com/contacts/CB4558257DD86D09?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.contact-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:contact</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;firstName&gt;</span>John<span class="nt">&lt;/firstName&gt;</span>
    <span class="nt">&lt;lastName&gt;</span>Wick<span class="nt">&lt;/lastName&gt;</span>
    <span class="nt">&lt;timeZone&gt;</span>+8<span class="nt">&lt;/timezone&gt;</span>
    <span class="nt">&lt;jobTitle&gt;&lt;/jobTitle&gt;</span>

    ... remaining of the contact object
<span class="nt">&lt;/ns2:contact&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"firstName"</span><span class="o">:</span><span class="x"> </span><span class="s">"John"</span><span class="p">,</span><span class="x">
    </span><span class="s">"lastName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Wick"</span><span class="p">,</span><span class="x">
    </span><span class="s">"timeZone"</span><span class="o">:</span><span class="x"> </span><span class="s">"+8"</span><span class="p">,</span><span class="x">
    </span><span class="s">"jobTitle"</span><span class="o">:</span><span class="x"> </span><span class="s">"Whispir API Specialist"</span><span class="p">,</span><span class="x">

    </span><span class="o">...</span><span class="x"> </span><span class="n">remaining</span><span class="x"> </span><span class="n">of</span><span class="x"> </span><span class="n">the</span><span class="x"> </span><span class="n">contact</span><span class="x"> </span><span class="n">object</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The response to the PUT request upon success is a <code class="prettyprint">204 No Content</code> with no content being provided.</p>
</blockquote>
</blockquote>

<p>Updating a contact can be performed using a PUT request to the <code class="prettyprint">/contacts/{id}</code> endpoint. So, to perform this, one must be knowing the exact “link” associated with the contact.</p>

<p>The application must provide all the fields during the update request, even if they are not being updated. </p>

<p><strong>Any missing fields will be automatically removed from the existing record.</strong></p>

<p>The Content-Type can be -</p>

<ul>
<li>application/vnd.whispir.contact-v1+xml <strong>or</strong> </li>
<li>application/vnd.whispir.contact-v1+json</li>
</ul>

<p><strong>Note:</strong> You cannot selectively update the contact fields needed as this is a PUT request. </p>

<p>So the standard process for updating a contact record is -</p>

<ol>
<li>GET /contact/{id of contact}</li>
<li>Update the contact field in the object to the required value</li>
<li>PUT /contact/{id of contact} the new object</li>
</ol>

<p>The response to the PUT request upon success is usually a <code class="prettyprint">204</code> with no content being provided.</p>

<h3 id="deleting-a-contact">Deleting a contact</h3>

<blockquote>
<p>Deleting a contact</p>

<blockquote>
<p>The following statement allows users to delete contacts using the Whispir API.  Please note, this contact will only be deleted from the current workspace.  Any mappings to other workspaces will need to be deleted there.  There is no <strong>Delete All</strong> support within the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 DELETE https://api.whispir.com/contacts/124F6B2D46A5A268?apikey=&lt;your_api_key&gt;
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>

<p>Updating a contact can be performed using a DELETE request to the /contacts/{id} endpoint. So, to perform this, one must be knowing the exact “link” associated with the contact.</p>

<p>After performing this request, the response does not contain any information other than the headers as it is not necessary.</p>

<p>The user has requested to delete a contact, and when the response of <code class="prettyprint">204 No Content</code> is returned, the contact is successfully deleted.</p>

<h2 id="advanced-options">Advanced Options</h2>

<p>Whispir API provides some advanced options to perform search and data related queries on the contact information. These options can be performed by adding relevant query parameters to the URL.</p>

<h3 id="searching-with-multiple-criteria">Searching with multiple criteria</h3>

<blockquote>
<p>Searching with multiple search criteria</p>

<blockquote>
<p>The following query parameters allow users to search with more than one piece of search criteria on the contact profile.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/contacts?apikey=&lt;your_api_key&gt;&amp;firstName=Sam&amp;lastname=gamjee
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>

<p>The API allows to search for a contact based on any attribute/ data element associated with the contact. This is not limited to just one attribute, but multiple attributes can be searched at the same time.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">URI Request Elements as Query Params</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">fieldname:</td>
            <td><strong>String</strong><br/>
                Specifies the field name of the contact object. The field name could be any thing as long as it is a valid contact object.
                <br><br>
                <b>Ex:</b><br>
                http://api.whispir.com/contacts?apikey=<your_api_key><b>&firstName=Sam&lastName=gamjee</b>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">sortOrder:</td>
            <td><strong>String</strong><br/>
                The order in which you require the results to be returned. Either `asc` or `desc`.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">sortFields:</td>
            <td><strong>String</strong><br/>
                The fields that you require the ordering to be performed on. Multiple fields can be provided, separated by a comma.
                <br><br>
                <b>Ex:</b><br>
                http://api.whispir.com/contacts?apikey=<your_api_key>&firstName=Sam<b>&sortFields=lastName,jobTitle</b>
            </td>
        </tr>
    </tbody>
</table>

<h3 id="choosing-the-data-elements">Choosing the data elements</h3>

<blockquote>
<p>Choosing specific data elements to return</p>

<blockquote>
<p>The following query parameters allow users to return data fields from the contact profile that are specifically what they are looking to retrieve.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">HTTP 1.1 GET https://api.whispir.com/contacts?apikey=<span class="nt">&lt;your_api_key&gt;</span><span class="err">&amp;</span>fields=workEmailAddress1,workMobilePhone1<span class="err">&amp;</span>firstname=Sam
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
Accept: application/vnd.whispir.contact-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 1 of 1<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:contacts&gt;</span>
        <span class="nt">&lt;ns2:contact&gt;</span>
            <span class="nt">&lt;id&gt;</span>DC09CC30243A51D5<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;workEmailAddress1&gt;</span>sam@gamjee.com<span class="nt">&lt;/workEmailAddress1&gt;</span>
            <span class="nt">&lt;workMobilePhone1&gt;</span>61423456789<span class="nt">&lt;/workMobilePhone1&gt;</span>
            <span class="nt">&lt;messagingoptions/&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/contacts/DC09CC30243A51D5?apikey=&lt;your_key_api&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:contact&gt;</span>
    <span class="nt">&lt;ns2:contacts&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">HTTP</span><span class="x"> </span><span class="m">1.1</span><span class="x"> </span><span class="n">GET</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.whispir.com/contacts?apikey=&lt;your_api_key&gt;&amp;fields=workEmailAddress1,workMobilePhone1&amp;firstname=Sam</span><span class="x">
</span><span class="n">Authorization</span><span class="o">:</span><span class="x"> </span><span class="n">Basic</span><span class="x"> </span><span class="n">am9obi5zbWl0aDpteXBhc3N3b3Jk</span><span class="x">
</span><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">contact</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"contacts"</span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
      </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"DC09CC30243A51D5"</span><span class="p">,</span><span class="x">
        </span><span class="s">"workEmailAddress1"</span><span class="o">:</span><span class="s">"sam@gamjee.com"</span><span class="p">,</span><span class="x">
        </span><span class="s">"workMobilePhone1"</span><span class="o">:</span><span class="s">"61423456789"</span><span class="x">
        </span><span class="s">"messagingoptions"</span><span class="o">:</span><span class="x"> </span><span class="p">[],</span><span class="x">
        </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/contacts/DC09CC30243A51D5?apikey=&lt;your_key_api&gt;"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}]</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span></code></pre>

<p>When requesting the contact information, a simple GET request on the /contact API gives you the basic details of the contact.</p>

<p>To get all the details or fields other than the ones given by default, you have to follow the <code class="prettyprint">link</code> and do another GET request. This can be easily skipped, by asking the API to give you specific fields and data right away in the first <code class="prettyprint">GET \contact</code> call itself.</p>

<p>This can be done by passing the required fields in the URL via the <code class="prettyprint">fields</code> parameter. You can also use this in conjunction with the search criteria. An Example use could be to get the mobile  number and the email of all contacts with firstname as &#39;Sam&rsquo;.</p>

        <h1 id="distribution-lists">Distribution Lists</h1>

<blockquote>
<p>Distribution Lists</p>

<blockquote>
<p>Distribution lists can easily be created by executing a POST request to the <code class="prettyprint">/distributionlists</code> endpoint in Whispir.
<br/><br/>
Distribution lists can contain <strong>Contacts</strong>, <strong>Users</strong>, or nested <strong>Distribution Lists</strong> to create any structure that is required within your environment.</p>
</blockquote>
</blockquote>

<p>Whispir&rsquo;s API allows users to categorise their contacts into different groups to simplify the distribution of messages. This allows for </p>

<ul>
<li>Effective management and maintenance of contacts</li>
<li>Group messaging</li>
<li>Reporting</li>
</ul>

<p>These logical groups can help to target specific communications to specific people. A contact can be part of any number of groups.</p>

<p>Distribution lists can easily be created by executing a <code class="prettyprint">POST</code> request to the <code class="prettyprint">/distributionlists</code> endpoint in Whispir.</p>

<p>The following Content-Types are supported:</p>

<ul>
<li>application/vnd.whispir.distributionlist-v1+xml</li>
<li>application/vnd.whispir.distributionlist-v1+json</li>
</ul>

<h2 id="creating-distribution-lists">Creating Distribution lists</h2>

<blockquote>
<p>Creating Distribution Lists</p>

<blockquote>
<p>Distribution Lists can contain lists of Contacts, Users or other Distribution Lists</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.whispir.com/distributionlists?apikey=[your api key]
Authorization: Basic [your basic auth]
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.distributionlist-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns1:distributionlists</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>My Distribution List<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;&lt;/description&gt;</span>    
    <span class="nt">&lt;access&gt;</span>Open<span class="nt">&lt;/access&gt;</span>
    <span class="nt">&lt;visibility&gt;</span>Public<span class="nt">&lt;/visibility&gt;</span>
    <span class="nt">&lt;contactIds&gt;&lt;/contactIds&gt;</span>
    <span class="nt">&lt;userIds&gt;&lt;/userIds&gt;</span>
    <span class="nt">&lt;distListIds&gt;&lt;/distListIds&gt;</span>
<span class="nt">&lt;/ns1:distributionlists&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">distributionlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"My Distribution List"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"access"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Open"</span><span class="p">,</span><span class="x">
    </span><span class="s">"visibility"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Public"</span><span class="p">,</span><span class="x">
    </span><span class="s">"contactIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"userIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"distListIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>Users should expect a <code class="prettyprint">201 Created</code> response after executing this request.</p>
</blockquote>
</blockquote>

<p>Distribution lists can be created within the Default Workspace, or within a Specific Workspace.  More information on Workspaces will be provided later in this documentation. </p>

<p>The MRI value is important here. It is the required unique identifier for any communications that are to be sent out to this distribution list.</p>

<p>To create a new distribution list, you can use the /distributionlists endpoint.</p>

<p>Only <strong>3 fields</strong> are required:</p>

<ol>
<li>name - the name of the distribution list to be created </li>
<li>access - Open Or Restricted </li>
<li>visibility - Private Or Public</li>
</ol>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name</td>
            <td>
            <strong>String</strong> <br>
               Specifies the name of the distribution list. This has to be unique.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description</td>
            <td>
            <strong>String</strong> <br>
            Specifies a description for other users to see what this Distribution List should be used for.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">access</td>
            <td>
            <strong>String</strong> <br>
            Allows the user to specify the access type for this DL. <br>
            <ol>
            <li><strong>Open</strong> - Anyone can subscribe to this distribution list via the Whispir Portal</li>
            <li><strong>ByApproval</strong> - Anyone can subscribe using the Whispir Portal, however they are not officially on the list until their access is approved.</li>
            <li><strong>Restricted</strong> - The distribution list is not visible in the Whispir Portal</li>
            </ol>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">visibility</td>
            <td>
            <strong>String</strong> <br>
            Allows the user to specify the visibility for this DL. <br>
            
            <ol>
                <li><strong>Public</strong> - Any user/contact in any workspace can map themselves to this Distribution List within the Whispir Portal.</li>
                <li><strong>Private</strong> - Only users/contacts in the current workspace can map themselves to this Distribution List</li>
             </ol>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">contactIds</td>
            <td>
            <strong>String</strong> <br>
            Comma separated list of userIds who can have access, visibility on this Distribution list. This information can be provided at the time of the DL creation or also later updated via a PUT request.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">userIds</td>
            <td>
            <strong>String</strong> <br>
            Comma separated list of userIds who can have access, visibility on this Distribution list. This information can be provided at the time of the DL creation or also later updated via a PUT request.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">distListIds</td>
            <td>
            <strong>String</strong> <br>
            Comma separated list of Distribution List IDs which can be nested distribution list to this DL.
            </td>
        </tr>
    </tbody>
</table>

<h2 id="retrieving-distribution-lists">Retrieving Distribution Lists</h2>

<blockquote>
<p>Retrieving Distribution Lists</p>

<blockquote>
<p>The following snippets show how you can use the Whispir API to retrieve Distribution List information.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET /distributionlists?apikey=&lt;your_api_key&gt;
Authorization: Basic [your basic auth]
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.distributionlist-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 2 of 2<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:distributionLists&gt;</span>
        <span class="nt">&lt;ns2:distributionList&gt;</span>
            <span class="nt">&lt;id&gt;</span>CF5AF1AE49ED07A6<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>DL 1<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;mri&gt;</span>dl1.company_name@list.company.whispir.sg<span class="nt">&lt;/mri&gt;</span>
            <span class="nt">&lt;description&gt;</span>Distribution list for company 1<span class="nt">&lt;/description&gt;</span>
            <span class="nt">&lt;memberCount&gt;</span>4<span class="nt">&lt;/memberCount&gt;</span>
            <span class="nt">&lt;access&gt;</span>ByApproval<span class="nt">&lt;/access&gt;</span>
            <span class="nt">&lt;visibility&gt;</span>Private<span class="nt">&lt;/visibility&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/distributionlists/CF5AF1AE49ED07A6?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:distributionList&gt;</span>
        <span class="nt">&lt;ns2:distributionList&gt;</span>
            <span class="nt">&lt;id&gt;</span>9FF7C2B470CCEC1E<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Docs Distribution List<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;mri&gt;</span>Docs_Distribution_List.company@list.company.whispir.sg<span class="nt">&lt;/mri&gt;</span>
            <span class="nt">&lt;description&gt;</span>A Distribution List created while writing the docs<span class="nt">&lt;/description&gt;</span>
            <span class="nt">&lt;memberCount&gt;</span>2<span class="nt">&lt;/memberCount&gt;</span>
            <span class="nt">&lt;access&gt;</span>Open<span class="nt">&lt;/access&gt;</span>
            <span class="nt">&lt;visibility&gt;</span>Public<span class="nt">&lt;/visibility&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/distributionlists/9FF7C2B470CCEC1E?apikey=&lt;your_api_key&gt;"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:distributionList&gt;</span>
    <span class="nt">&lt;/ns2:distributionLists&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">distributionlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"distributionLists"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"CF5AF1AE49ED07A6"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"DL 1"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"dl1.company_name@list.company.whispir.sg"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"test distribution list for company"</span><span class="p">,</span><span class="x">
    </span><span class="s">"memberCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"4"</span><span class="p">,</span><span class="x">
    </span><span class="s">"access"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ByApproval"</span><span class="p">,</span><span class="x">
    </span><span class="s">"visibility"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Private"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/distributionlists/CF5AF1AE49ED07A6?apikey=your_api_key"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"9FF7C2B470CCEC1E"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Docs Distribution List"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Docs_Distribution_List.company@list.company.whispir.sg"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"A Distribution List created while writing the docs"</span><span class="p">,</span><span class="x">
    </span><span class="s">"memberCount"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"2"</span><span class="p">,</span><span class="x">
    </span><span class="s">"access"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Open"</span><span class="p">,</span><span class="x">
    </span><span class="s">"visibility"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Public"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/distributionlists/9FF7C2B470CCEC1E?apikey=your_api_key"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">}],</span><span class="x">
  </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 2 of 2    "</span><span class="p">,</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Similar to the creation of distribution list, retrieval of such list too is bound to the workspace it belongs to. So, a distribution list belonging to a workspace cannot be accessed from another workspace. </p>

<p>The code samples on the right describe the methods to retrieve Distribution Lists using the Whispir API.</p>

<blockquote>
<p>Retrieving a specific Distribution List by ID</p>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET /distributionlists/E07BA0DA35B0B1EF?apikey=&lt;your_api_key&gt;
Authorization: Basic [your basic auth]
</code></pre>

<h2 id="searching-for-distribution-lists">Searching for Distribution Lists</h2>

<blockquote>
<blockquote>
<p><strong>Search for a Distribution List by name</strong><br/><br/>
Users can easily append the <code class="prettyprint">&amp;name=My DL Name</code> query parameter to search the Whispir API for a specific Distribution List.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET /distributionlists?apikey=&lt;your_api_key&gt;&amp;name=My%20Distribution%20List
Authorization: Basic [your basic auth]
</code></pre>

<blockquote>
<blockquote>
<p><strong>Search for a Distribution List by description</strong><br/><br/>
Users can easily append the <code class="prettyprint">&amp;description=My DL Description</code> query parameter to search the Whispir API for a specific Distribution List.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET /distributionlists?apikey=&lt;your_api_key&gt;&amp;description=company_name
Authorization: Basic [your basic auth]
</code></pre>

<p>The distribution list is usually retrieved by its <code class="prettyprint">id</code>, but one can also search or refer to the distribution list by its name. This feature has to do with the <strong>unique name</strong> requirement for the distribution list.</p>

<p>Apart from the name, the <code class="prettyprint">description</code> field can also be used to search for a distribution list. While name can be directly used to send in messages, the description is solely for the purpose of search. Once search yields the required result, the <code class="prettyprint">mri</code> has to be picked from the selected DL and then used to send the messages.</p>

<p>Both these operations can be performed by passing in the relevant search parameters in the URL - as query params</p>

<ul>
<li><strong>&amp;name=</strong> - to search for name</li>
<li><strong>&amp;description=</strong> - to search by description</li>
</ul>

<h2 id="adding-contacts">Adding Contacts</h2>

<blockquote>
<p>Adding Contacts</p>

<blockquote>
<p>Contacts can be added to Distribution Lists when the list is created, or by using a <code class="prettyprint">PUT</code> request at a later stage.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.whispir.com/distributionlists?apikey=[your api key]
Authorization: Basic [your basic auth]
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.distributionlist-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns1:distributionlists</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Rockstar Distribution List<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;</span>All the rocks were once stars - astrophysicist inside me<span class="nt">&lt;/description&gt;</span>    
    <span class="nt">&lt;access&gt;</span>Open<span class="nt">&lt;/access&gt;</span>
    <span class="nt">&lt;visibility&gt;</span>Public<span class="nt">&lt;/visibility&gt;</span>
    <span class="nt">&lt;contactIds&gt;</span>7CC205AE17FFDC8A,92XC05AE154FDC8A<span class="nt">&lt;/contactIds&gt;</span>
    <span class="nt">&lt;userIds&gt;&lt;/userIds&gt;</span>
    <span class="nt">&lt;distListIds&gt;&lt;/distListIds&gt;</span>
<span class="nt">&lt;/ns1:distributionlists&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">distributionlist</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Rockstar Distribution List"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"All the rocks were once stars - astrophysicist inside me"</span><span class="p">,</span><span class="x">
    </span><span class="s">"access"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Open"</span><span class="p">,</span><span class="x">
    </span><span class="s">"visibility"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Public"</span><span class="p">,</span><span class="x">
    </span><span class="s">"contactIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"7CC205AE17FFDC8A,92XC05AE154FDC8A"</span><span class="p">,</span><span class="x">
    </span><span class="s">"userIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"distListIds"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>A contact can be added to the distribution list in two ways. </p>

<p>While creating the distribution list by passing the following 3 values:</p>

<ul>
<li><strong>ContactIds</strong> string is a comma separated list of Contact IDs that you would like added to the list.</li>
<li><strong>UserIds</strong> specifies the Whispir Users that should also be notified when this list is used.</li>
<li><strong>DistListIds</strong> specifies the nested lists that are contained within this distribution list.</li>
</ul>

<p>Or, after the distribution list is created by performing these steps:</p>

<ul>
<li>A <strong>PUT</strong> request is placed with the distribution list ID specified in the URL.</li>
<li>The contactIds, userIds, distListIds can be passed all together in a single request.</li>
</ul>

<blockquote>
<blockquote>
<p>If an existing contactId is again added, it does neither throws an error, nor create two entries. The contactId is just neglected and only 1 record is maintained.</p>
</blockquote>
</blockquote>

<p>If the PUT request was successful, the expected response code is a <code class="prettyprint">204 No Content</code></p>

<h2 id="sending-messages">Sending Messages</h2>

<blockquote>
<p>Sending Messages to Distribution Lists</p>

<blockquote>
<p>The API call is a <code class="prettyprint">POST</code> request to the <code class="prettyprint">/messages</code> endpoint.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">POST https://api.whispir.com/messages?apikey=[your api key]
Authorization: Basic [your basic auth]
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>Docs_Distribution_List.company@list.company.whispir.sg<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Simple SMS to List of contacts in the distribution list<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;body&gt;</span>This is the content of my sample sms message.<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Docs_Distribution_List.company@list.company.whispir.sg"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Simple SMS to List of contacts in the distribution list"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the content of my sample sms message."</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Sending the message via the distribution list is very straight forward. The important key needed here is MRI of the distribution list.</p>

<p>This will result in the response of 202 Accepted and the message will be sent to all distribution list participants.</p>

<h2 id="deleting-distribution-lists">Deleting Distribution Lists</h2>

<blockquote>
<p>Deleting Distribution Lists</p>

<blockquote>
<p>The following API requests allow users to remove Distribution Lists from the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight xml">DELETE https://api.whispir.com/distributionlists/E07BA0DA35B0B1EF?apikey=[your api key]
Authorization: Basic [your basic auth]
</code></pre>
<pre><code class="highlight go"><span class="n">DELETE</span><span class="x"> </span><span class="n">https</span><span class="o">:</span><span class="c">//api.whispir.com/distributionlists/E07BA0DA35B0B1EF?apikey=[your api key]</span><span class="x">
</span><span class="n">Authorization</span><span class="o">:</span><span class="x"> </span><span class="n">Basic</span><span class="x"> </span><span class="p">[</span><span class="n">your</span><span class="x"> </span><span class="n">basic</span><span class="x"> </span><span class="n">auth</span><span class="p">]</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>After performing the request the expected successful response is <code class="prettyprint">204 No Content</code>.</p>
</blockquote>
</blockquote>

<p>Deleting the distribution is done via a <code class="prettyprint">DELETE /distributionlist/{id}</code> endpoint. </p>

<p>You can only delete the distribution list that you have created or a valid userId associated with the specific distribution list.</p>

        <h1 id="callbacks">Callbacks</h1>

<p>Whispir utilises API Callbacks to send simple notifications to different registered services in the event that some change has occurred on the Whispir Platform.</p>

<h2 id="callback-overview">Callback Overview</h2>

<blockquote>
<p>Callback Overview</p>

<blockquote>
<p>Whispir can notify your application when your SMS, Email or Voice messages receive a reply.
<br/><br/>
An example callback that your application or service would receive is specified below.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST http://yourserver/callback.php
</code></pre>
<pre><code class="highlight xml">Content-Type: application/xml

<span class="nt">&lt;ns2:deliveryresponse</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;messageid&gt;</span>ABC4857BCCF484575FCA<span class="nt">&lt;/messageid&gt;</span>
    <span class="nt">&lt;location&gt;</span>https://api.whispir.com/messages/ABC4857BCCF484575FCA<span class="nt">&lt;/location&gt;</span>   
    <span class="nt">&lt;from&gt;</span>
        <span class="nt">&lt;name&gt;</span>Fred Waters<span class="nt">&lt;/name&gt;</span> 
        <span class="nt">&lt;mri&gt;</span>Fred_Waters.528798.Sandbox@Contact.whispir.com<span class="nt">&lt;/mri&gt;</span> 
        <span class="nt">&lt;mobile&gt;</span>$mobile<span class="nt">&lt;/mobile&gt;</span> 
        <span class="nt">&lt;email&gt;</span>me@example.com<span class="nt">&lt;/email&gt;</span> 
        <span class="nt">&lt;voice&gt;</span>$mobile<span class="nt">&lt;/voice&gt;</span> 
    <span class="nt">&lt;/from&gt;</span> 
    <span class="nt">&lt;responsemessage&gt;</span> 
        <span class="nt">&lt;channel&gt;</span>SMS<span class="nt">&lt;/channel&gt;</span> 
        <span class="nt">&lt;acknowledged&gt;</span>09/01/13 13:22<span class="nt">&lt;/acknowledged&gt;</span> 
        <span class="nt">&lt;content&gt;</span>Yes, I accept. Will I need to bring steel cap boots?<span class="nt">&lt;/content&gt;</span> 
    <span class="nt">&lt;/responsemessage&gt;</span> 
<span class="nt">&lt;/ns2:deliveryresponse&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="x">
</span><span class="p">{</span><span class="x">
    </span><span class="s">"messageId"</span><span class="o">:</span><span class="s">"ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
    </span><span class="s">"location"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
    </span><span class="s">"from"</span><span class="o">:</span><span class="p">{</span><span class="x">
          </span><span class="s">"name"</span><span class="o">:</span><span class="s">"Fred Waters"</span><span class="p">,</span><span class="x">
          </span><span class="s">"mri"</span><span class="o">:</span><span class="s">"Fred_Waters.528798.Sandbox@Contact.whispir.com"</span><span class="p">,</span><span class="x">
          </span><span class="s">"mobile"</span><span class="o">:</span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
          </span><span class="s">"email"</span><span class="o">:</span><span class="s">"me@example.com"</span><span class="p">,</span><span class="x">
          </span><span class="s">"voice"</span><span class="o">:</span><span class="s">"$mobile"</span><span class="x">
         </span><span class="p">},</span><span class="x">
    </span><span class="s">"responseMessage"</span><span class="o">:</span><span class="p">{</span><span class="x">
           </span><span class="s">"channel"</span><span class="o">:</span><span class="s">"SMS"</span><span class="p">,</span><span class="x">
           </span><span class="s">"acknowledged"</span><span class="o">:</span><span class="s">"09/01/13 13:22"</span><span class="p">,</span><span class="x">
           </span><span class="s">"content"</span><span class="o">:</span><span class="s">"Yes, I accept. Will I need to bring steel cap boots?"</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Callbacks allow custom applications to register URLs with Whispir that are used for notifications when certain events occur e.g. a response to a message is received, or a message was undeliverable.</p>

<p><br/><img src="http://developer.whispir.com/files/Whispir_API_diagram.png"/><br/></p>

<p>Whispir&rsquo;s Callback Service will forward the content of each message response, along with some associated metadata to a URL that the user has pre-registered to receive this information.  </p>

<p><strong>Note:</strong> Whispir does not check for a response from this callback server.  On setup it is expected that the server will respond to a GET request with a 200 OK.  Any error response sent from this callback server during general use is not considered.  Users should not expect callbacks to be re-tried on error.</p>

<h2 id="creating-new-callbacks">Creating new Callbacks</h2>

<blockquote>
<p>Creating new Callbacks</p>

<blockquote>
<p>The following API calls allow users to create new Callbacks using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/callbacks?apikey=[your_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.api-callback-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:companyapicallback</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span> 
                    <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Callback Name<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;url&gt;</span>http://myserver.com/mycallback.php<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;auth&gt;</span>
        <span class="nt">&lt;key&gt;</span>MY_AUTH_KEY<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;type&gt;</span>querystring<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/auth&gt;</span>
    <span class="nt">&lt;contentType&gt;</span>json<span class="nt">&lt;/contentType&gt;</span>
    <span class="nt">&lt;email&gt;</span>me@example.com<span class="nt">&lt;/email&gt;</span>
    <span class="nt">&lt;callbacks&gt;</span>
        <span class="nt">&lt;reply&gt;</span>enabled<span class="nt">&lt;/reply&gt;</span>
        <span class="nt">&lt;undeliverable&gt;</span>enabled<span class="nt">&lt;/undeliverable&gt;</span>
    <span class="nt">&lt;/callbacks&gt;</span>
<span class="nt">&lt;/ns2:companyapicallback&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">api</span><span class="o">-</span><span class="n">callback</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Callback Name"</span><span class="p">,</span><span class="x">
  </span><span class="s">"url"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"http://myserver.com/mycallback.php"</span><span class="p">,</span><span class="x">
  </span><span class="s">"auth"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"type"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"querystring"</span><span class="p">,</span><span class="x">
    </span><span class="s">"key"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"MY_AUTH_KEY"</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="s">"contentType"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"json"</span><span class="p">,</span><span class="x">
  </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"me@example.com"</span><span class="p">,</span><span class="x">
  </span><span class="s">"callbacks"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"reply"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"enabled"</span><span class="p">,</span><span class="x">
    </span><span class="s">"undeliverable"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"enabled"</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>The sample code above will create a callback endpoint that can be used within messages being sent from Whispir.<br/><br/>
The expected response to this call is an <strong>HTTP 201 - Created</strong>.</p>
</blockquote>
</blockquote>

<p>To create a new API Callback, you can use the <code class="prettyprint">/callbacks</code> endpoint.</p>

<p>The following table describes the fields that can be used within the request.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name (ID) of the callback to be used within message requests.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">url:</td>
            <td><strong>String</strong><br/>
                Specifies the service URL that API Callbacks should be forwarded to.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">auth:</td>
            <td><strong>Object</strong><br/>
                Specifies the Authorization type that should be used with this endpoint.  The specific elements of this object are described below.<br/><br/>
                The options for this parameter are:
                <ul>
                  <li>querystring</li>
                  <li>httpheader</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">contentType:</td>
            <td><strong>String</strong><br/>
                Specifies the content type that should be sent to this endpoint.<br/><br/>
                The choices are as follows:
                <ul>
                  <li>json</li>
                  <li>xml</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>String</strong><br/>
                Specifies the email address where failure notifications should be sent.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">callbacks:</td>
            <td><strong>Object</strong><br/>
                Object to store the callbacks that should be invoked for this endpoint.  The specific elements of this object are described below. <br/><br/>
                The options for this parameter are:
                <ul>
                  <li><strong>reply</strong>: enabled/disabled</li>
                  <li><strong>undeliverable</strong>: enabled/disabled</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h3 id="callback-authorization">Callback Authorization</h3>

<blockquote>
<p>Callback Authorization</p>

<blockquote>
<p>Callback Servers should validate that the inbound request they are receiving is actually coming from Whispir.<br/><br/>
Callbacks can be authorized using one of two methods: <strong>HTTP Header</strong>, or <strong>URL Query Parameter</strong></p>

<p><strong>HTTP Header Auth Token</strong>
<br/>Users can specify their Authorization token as an HTTP Header. Whispir will add the <strong>X-Whispir-Callback-Key</strong> Header to the request.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://yourserver/callback.php
X-Whispir-Callback-Key: MY_AUTH_TOKEN 
</code></pre>
<pre><code class="highlight xml">Content-Type: application/xml

<span class="nt">&lt;ns2:deliveryresponse</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;messageid&gt;</span>ABC4857BCCF484575FCA<span class="nt">&lt;/messageid&gt;</span>
    <span class="nt">&lt;location&gt;</span>https://api.whispir.com/messages/ABC4857BCCF484575FCA<span class="nt">&lt;/location&gt;</span>   
    <span class="nt">&lt;from&gt;</span>
        <span class="nt">&lt;name&gt;</span>Fred Waters<span class="nt">&lt;/name&gt;</span> 
        <span class="nt">&lt;mri&gt;</span>Fred_Waters.528798.Sandbox@Contact.whispir.com<span class="nt">&lt;/mri&gt;</span> 
        <span class="nt">&lt;mobile&gt;</span>$mobile<span class="nt">&lt;/mobile&gt;</span> 
        <span class="nt">&lt;email&gt;</span>me@example.com<span class="nt">&lt;/email&gt;</span> 
        <span class="nt">&lt;voice&gt;</span>$mobile<span class="nt">&lt;/voice&gt;</span> 
    <span class="nt">&lt;/from&gt;</span> 
    <span class="nt">&lt;responsemessage&gt;</span> 
        <span class="nt">&lt;channel&gt;</span>SMS<span class="nt">&lt;/channel&gt;</span> 
        <span class="nt">&lt;acknowledged&gt;</span>09/01/13 13:22<span class="nt">&lt;/acknowledged&gt;</span> 
        <span class="nt">&lt;content&gt;</span>Yes, I accept. Will I need to bring steel cap boots?<span class="nt">&lt;/content&gt;</span> 
    <span class="nt">&lt;/responsemessage&gt;</span> 
<span class="nt">&lt;/ns2:deliveryresponse&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"messageid"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
  </span><span class="s">"location"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
  </span><span class="s">"from"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred Waters"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred_Waters.528798.Sandbox@Contact.whispir.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mobile"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"me@example.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="s">"responseMessage"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"channel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"SMS"</span><span class="p">,</span><span class="x">
    </span><span class="s">"acknowledged"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"09/01/13 13:22"</span><span class="p">,</span><span class="x">
    </span><span class="s">"content"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Yes, I accept. Will I need to bring steel cap boots?"</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p><strong>URL Query Parameter Auth Token</strong>
<br/>Users can specify their Authorization token as a URL query parameter.  This will come as <strong><code class="prettyprint">auth=:your_token</code></strong> on the URL.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://yourserver/callback.php?auth=MY_AUTH_TOKEN
</code></pre>
<pre><code class="highlight xml">Content-Type: application/xml

<span class="nt">&lt;ns2:deliveryresponse</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;messageid&gt;</span>ABC4857BCCF484575FCA<span class="nt">&lt;/messageid&gt;</span>
    <span class="nt">&lt;location&gt;</span>https://api.whispir.com/messages/ABC4857BCCF484575FCA<span class="nt">&lt;/location&gt;</span>   
    <span class="nt">&lt;from&gt;</span>
        <span class="nt">&lt;name&gt;</span>Fred Waters<span class="nt">&lt;/name&gt;</span> 
        <span class="nt">&lt;mri&gt;</span>Fred_Waters.528798.Sandbox@Contact.whispir.com<span class="nt">&lt;/mri&gt;</span> 
        <span class="nt">&lt;mobile&gt;</span>$mobile<span class="nt">&lt;/mobile&gt;</span> 
        <span class="nt">&lt;email&gt;</span>me@example.com<span class="nt">&lt;/email&gt;</span> 
        <span class="nt">&lt;voice&gt;</span>$mobile<span class="nt">&lt;/voice&gt;</span> 
    <span class="nt">&lt;/from&gt;</span> 
    <span class="nt">&lt;responsemessage&gt;</span> 
        <span class="nt">&lt;channel&gt;</span>SMS<span class="nt">&lt;/channel&gt;</span> 
        <span class="nt">&lt;acknowledged&gt;</span>09/01/13 13:22<span class="nt">&lt;/acknowledged&gt;</span> 
        <span class="nt">&lt;content&gt;</span>Yes, I accept. Will I need to bring steel cap boots?<span class="nt">&lt;/content&gt;</span> 
    <span class="nt">&lt;/responsemessage&gt;</span> 
<span class="nt">&lt;/ns2:deliveryresponse&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"messageid"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
  </span><span class="s">"location"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/messages/ABC4857BCCF484575FCA"</span><span class="p">,</span><span class="x">
  </span><span class="s">"from"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred Waters"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fred_Waters.528798.Sandbox@Contact.whispir.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"mobile"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"email"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"me@example.com"</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="s">"responseMessage"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"channel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"SMS"</span><span class="p">,</span><span class="x">
    </span><span class="s">"acknowledged"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"09/01/13 13:22"</span><span class="p">,</span><span class="x">
    </span><span class="s">"content"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Yes, I accept. Will I need to bring steel cap boots?"</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Whispir Callbacks have been designed to be simple, yet secure.  </p>

<p>In order to make your Callback Server processing much safer, whispir recommends the following security measures:</p>

<ul>
<li>Use SSL on your Callback URL</li>
<li>IP Whitelisting for Whispir&rsquo;s IP address</li>
<li>Use a unique token</li>
</ul>

<p>The unique token should be an alphanumeric string generated and assigned specifically for Whispir Callbacks. </p>

<p>When provided in the callback payload, Whipir will include this in every request made to the listening application. The token&rsquo;s presence ensures and confirms that the request has originated truly from Whispir.</p>

<p>There are two options for the location of this Authorization Token:</p>

<h4 id="http-header">HTTP Header</h4>

<p>Using an HTTP Header for authorisation is the preferred approach. This method will use a custom HTTP Header <strong>X-Whispir-Callback-Key</strong>.</p>

<p>This can be added to the callback by specifying the code block:</p>

<p><code class="prettyprint">&quot;auth&quot; : { &quot;type&quot; : &quot;httpheader&quot;, &quot;key&quot; : &quot;MY_AUTH_TOKEN&quot; }</code></p>

<p>Every request to the specified URL will include the supplied AUTH Token within this Header.  Alternatively, this could be supplied as a query parameter as follows.</p>

<h4 id="url-query-parameter">URL Query Parameter</h4>

<p>In this method, the Authorization will be passed to the callback server on the query string using an &lsquo;Auth&rsquo; parameter as follows:</p>

<p><code class="prettyprint">&quot;auth&quot; : { &quot;type&quot; : &quot;querystring&quot;, &quot;key&quot; : &quot;MY_AUTH_TOKEN&quot; }</code></p>

<h3 id="callback-types">Callback Types</h3>

<p>Callbacks can be added to any message that is sent from the Whispir API using the <code class="prettyprint">/messages</code> endpoint.</p>

<p>Each callback can be invoked from one of two actions occurring:</p>

<ul>
<li>A message has been replied to, or</li>
<li>A message delivery failure occurred (wrong number, or service unavailable)</li>
</ul>

<p>Users can control which of these actions are delivered to the endpoint using the <code class="prettyprint">callbacks</code> object when registering new callbacks.</p>

<p>The options that are available are:</p>

<ul>
<li>reply: enabled/disabled</li>
<li>undeliverable: enabled/disabled</li>
</ul>

<p>When these are enabled, any reply or failed delivery will cause a <code class="prettyprint">GET</code> request to be invoked on the Callback URL.</p>

<h2 id="retrieving-callbacks">Retrieving Callbacks</h2>

<blockquote>
<p>Retrieving Callbacks</p>

<blockquote>
<p>The following API Methods allow you to access callbacks via the API</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/callbacks?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.api-callback-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 3 of 3<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:callbacks&gt;</span>
        <span class="nt">&lt;ns2:callback&gt;</span>
            <span class="nt">&lt;id&gt;</span>BCD374DABC73649B<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Sample Callback 1<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;url&gt;</span>http://myserver.com/callback1.php<span class="nt">&lt;/url&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/callbacks/BCD374DABC73649B?apikey=[API_KEY]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:callback&gt;</span>
        <span class="nt">&lt;ns2:callback&gt;</span>
            <span class="nt">&lt;id&gt;</span>AD34DBCEFD74EABC<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Sample Callback 2<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;url&gt;</span>http://myserver.com/callback2.php<span class="nt">&lt;/url&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/callbacks/AD34DBCEFD74EABC?apikey=[API_KEY]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:callback&gt;</span>
        <span class="nt">&lt;ns2:callback&gt;</span>
            <span class="nt">&lt;id&gt;</span>73BDCEFA43DF35DB<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Sample Callback 3<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;url&gt;</span>http://myserver.com/callback3.php<span class="nt">&lt;/url&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/callbacks/73BDCEFA43DF35DB?apikey=[API_KEY]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:callback&gt;</span>
    <span class="nt">&lt;/ns2:callbacks&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>

</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">api</span><span class="o">-</span><span class="n">callback</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"status"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 3 of 3"</span><span class="p">,</span><span class="x">
  </span><span class="s">"callbacks"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"BCD374DABC73649B"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample Callback 1"</span><span class="p">,</span><span class="x">
    </span><span class="s">"url"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"http://myserver.com/callback1.php"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/callbacks/BCD374DABC73649B?apikey=[API_KEY]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},{</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"AD34DBCEFD74EABC"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample Callback 2"</span><span class="p">,</span><span class="x">
    </span><span class="s">"url"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"http://myserver.com/callback2.php"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/callbacks/AD34DBCEFD74EABC?apikey=[API_KEY]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},{</span><span class="x">
    </span><span class="s">"id"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"73BDCEFA43DF35DB"</span><span class="p">,</span><span class="x">
    </span><span class="s">"name"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample Callback 3"</span><span class="p">,</span><span class="x">
    </span><span class="s">"url"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"http://myserver.com/callback3.php"</span><span class="p">,</span><span class="x">
    </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/callbacks/73BDCEFA43DF35DB?apikey=[API_KEY]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="p">]</span><span class="x">
  </span><span class="p">},</span><span class="x"> </span><span class="p">],</span><span class="x">
  </span><span class="s">"link"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x"> </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To retrieve a list of callbacks from the Whispir API you can execute an <strong>HTTP GET</strong> using the <code class="prettyprint">/callbacks</code> endpoint.</p>

<p>You will need to supply one of the following headers (for retrieving JSON or XML):</p>

<ul>
<li><code class="prettyprint">Accept: application/vnd.whispir.api-callback-v1+xml</code></li>
<li><code class="prettyprint">Accept: application/vnd.whispir.api-callback-v1+json</code></li>
</ul>

<p>An array of Callbacks will be returned to you in the HTTP response body.</p>

<p>Each of these Callbacks will provide the following information:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Response Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">id:</td>
            <td><strong>String</strong><br/>
                The unique ID of the callback within Whispir.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                The name given to the Callback at creation time. Also the ID that is used in the `/messages` endpoint.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">url:</td>
            <td><strong>String</strong><br/>
                The applciation URL that was given to the Callback at creation time.  Also the endpoint that will be used when supplying callback information.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">link:</td>
            <td><strong>Array</strong><br/>
                Provides a list of URLs that can be used to manipulate or access the callback.
                <ul>
                  <li>uri - the link to access the specific callback</li>
                  <li>rel - the descriptor for what the link will do</li>
                  <li>method - the HTTP method to use with this particular link</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h2 id="using-callbacks">Using Callbacks</h2>

<blockquote>
<p>Using Callbacks</p>

<blockquote>
<p>Callbacks can be added to messages by adding the <code class="prettyprint">callbackId</code> parameter and the name of the callback as follows:</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/messages?apikey=[api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
   </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
   </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Test SMS Message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"This is the body of my test SMS message"</span><span class="p">,</span><span class="x">
   </span><span class="s">"callbackId"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Sample Callback 1"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.message-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:message</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;subject&gt;</span>Test SMS Message<span class="nt">&lt;/subject&gt;</span>    
    <span class="nt">&lt;body&gt;</span>This is the body of my test SMS message<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;callbackId&gt;</span>Sample Callback 1<span class="nt">&lt;/callbackId&gt;</span>
<span class="nt">&lt;/ns2:message&gt;</span> 
</code></pre>

<p>Callbacks can be added to messages by simply specifying the callback name within the request to the <code class="prettyprint">/messages</code> endpoint. </p>

<p>Any responses to the above sent message will be forwarded back to the URL within the Callback named <code class="prettyprint">Sample Callback 1</code>.</p>

<h2 id="callback-failures">Callback Failures</h2>

<blockquote>
<p>Callback Failures</p>

<blockquote>
<p>Whispir will automatically send notifications to your nominated email address in the event of a failure to access your callback server.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">Dear Customer,  

Your callback &lt;callback_id&gt; failed on &lt;date&gt; with response: &lt;response&gt;.  

The callback that failed is as follows:  

URL: https://yourserver/callback.php?auth=12345 
Location: https://api.whispir.com/messages/ABC4857BCCF484575FCA 
Name: Fred Waters 
Mobile: $mobile 
Email: me@example.com
Channel: SMS 
Content: Yes, I accept. Will I need to bring steel cap boots? 

Please take the necessary steps to ensure your callback is configured correctly.  

If this callback URL continues to fail, Whispir may remove this until the service is resolved. 

Regards, 
Whispir Support

</code></pre>

<p>In the event the provided callback URL could not be reached or the connection to the service times out, Whispir will automatically generate a notification to the nominated email address with the details of the failed attempt.</p>

<p>Whispir will automatically send an email in the following circumstances:</p>

<ul>
<li>If the Callback Server returns anything other than an HTTP 200 OK.</li>
<li>If the authorization to the Callback Server fails (e.g. returns an HTTP 400 level error) </li>
<li>If the Callback Server does not connect within 5 seconds.</li>
<li>If the Callback Server does not return a response within 60 seconds.</li>
</ul>

        <h1 id="workspaces">Workspaces</h1>

<p>Workspace allows application developers to create new work areas for the varying use cases of their application. They provides different functions that can be provided to users of the application, e.g. creating messages, executing scenarios, or viewing distribution lists. </p>

<p>Every account upon creation is given a default workspace. All operations are usually carried out in the default workspace. To separate the concerns, one can create multiple (there is no limit) workspaces suited for each of their application needs. </p>

<p>Each of these work areas are independent from one another and can be governed by user permissions. So, users can be assigned access to these workspaces to restrict the control of information as needed. So, the information, assets, contacts, actions performed in workspace does not or cannot be accessed from another one. This allows the applications to be independent and audited much effectively with proper permissions and keys.</p>

<p>Workspaces can only be created and retrieved. They cannot be updated or deleted via the API.</p>

<h2 id="creating-a-new-workspace">Creating a new workspace</h2>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/workspaces?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.workspace-v1+xml 


<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns3:workspace</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;projectName&gt;</span>A Space Odessey<span class="nt">&lt;/projectName&gt;</span>
    <span class="nt">&lt;projectNumber&gt;</span>2000<span class="nt">&lt;/projectNumber&gt;</span>
    <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;billingcostcentre&gt;</span>Hollywood<span class="nt">&lt;/billingcostcentre&gt;</span>
<span class="nt">&lt;/ns3:workspace&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">workspace</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"projectName"</span><span class="o">:</span><span class="x"> </span><span class="s">"A Space Odessey"</span><span class="p">,</span><span class="x">
  </span><span class="s">"projectNumber"</span><span class="o">:</span><span class="x"> </span><span class="s">"2000"</span><span class="p">,</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
  </span><span class="s">"billingcostcentre"</span><span class="o">:</span><span class="x"> </span><span class="s">"Hollywood"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To create a new workspace, you can use the /workspaces endpoint.</p>

<p>Only <strong>2 fields</strong> are required:</p>

<ol>
<li>projectName - The name of the Workspace to be created.</li>
<li>status - The status of the Workspace being created.  This should be &lsquo;A&rsquo; for &#39;Active&rsquo; when creating new workspaces.</li>
</ol>

<p>Note: There is no limit to the amount of workspaces each API user can create.</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">projectName :</td>
            <td><strong>String</strong><br/>
                Specifies the name of the Workspace to be created.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">projectNumber:</td>
            <td><strong>String</strong><br/>
                Specifies the ID of the workspace, generally not used.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">status:</td>
            <td><strong>String</strong><br/>
                Specifies the status of the Workspace being created. The status can be one of - 
                <ul>
                    <li>Active (A)</li>
                    <li>Disabled (D)</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">billingcostcentre:</td>
            <td><strong>String</strong><br/>
                <strong>Only applicable to customers with the Billing Cost Centre Module enabled.</strong> Allows the user to set a billing cost centre for the Workspace.
            </td>
        </tr>
    </tbody>
</table>

<h2 id="retrieving-workspaces">Retrieving Workspaces</h2>

<p>To retrieve a list of workspaces from the Whispir.io API you can execute an HTTP GET using the /workspaces endpoint.</p>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/workspaces?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.workspace-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 4 of 4<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:workspaces&gt;</span>
        <span class="nt">&lt;ns2:workspace&gt;</span>
            <span class="nt">&lt;projectName&gt;</span>Sales Lead Notifications<span class="nt">&lt;/projectName&gt;</span>
            <span class="nt">&lt;projectNumber&gt;&lt;/projectNumber&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;billingcostcentre&gt;</span>test<span class="nt">&lt;/billingcostcentre&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/workspaces/BB9ECBE5BA73CD81?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:workspace&gt;</span>
        <span class="nt">&lt;ns2:workspace&gt;</span>
            <span class="nt">&lt;projectName&gt;</span>Product Release Management<span class="nt">&lt;/projectName&gt;</span>
            <span class="nt">&lt;projectNumber&gt;&lt;/projectNumber&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;billingcostcentre&gt;</span>0<span class="nt">&lt;/billingcostcentre&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/workspaces/7311ABEB701E7C60?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:workspace&gt;</span>
        <span class="nt">&lt;ns2:workspace&gt;</span>
            <span class="nt">&lt;projectName&gt;</span>CAAS<span class="nt">&lt;/projectName&gt;</span>
            <span class="nt">&lt;projectNumber&gt;&lt;/projectNumber&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;billingcostcentre&gt;</span>0<span class="nt">&lt;/billingcostcentre&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/workspaces/26B1A09C1FEC20A2?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:workspace&gt;</span>
        <span class="nt">&lt;ns2:workspace&gt;</span>
            <span class="nt">&lt;projectName&gt;</span>Business Working Group<span class="nt">&lt;/projectName&gt;</span>
            <span class="nt">&lt;projectNumber&gt;&lt;/projectNumber&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;billingcostcentre&gt;</span>CLSA<span class="nt">&lt;/billingcostcentre&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/workspaces/A358845BF004C113?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:workspace&gt;</span>
        <span class="nt">&lt;ns2:workspace&gt;</span>
            <span class="nt">&lt;projectName&gt;</span>Critical Incident Management<span class="nt">&lt;/projectName&gt;</span>
            <span class="nt">&lt;projectNumber&gt;&lt;/projectNumber&gt;</span>
            <span class="nt">&lt;status&gt;</span>A<span class="nt">&lt;/status&gt;</span>
            <span class="nt">&lt;billingcostcentre&gt;&lt;/billingcostcentre&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/workspaces/B7BFEF555F0F7F81?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;/ns2:workspace&gt;</span>
    <span class="nt">&lt;/ns2:workspaces&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">workspace</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"workspaces"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"projectName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Sales Lead Notifications"</span><span class="p">,</span><span class="x">
      </span><span class="s">"projectNumber"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"billingcostcentre"</span><span class="o">:</span><span class="x"> </span><span class="s">"0"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/workspaces/7311ABEB701E7C60?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"projectName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Product Release Management"</span><span class="p">,</span><span class="x">
      </span><span class="s">"projectNumber"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"billingcostcentre"</span><span class="o">:</span><span class="x"> </span><span class="s">"0"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/workspaces/26B1A09C1FEC20A2?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"projectName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Business Working Group"</span><span class="p">,</span><span class="x">
      </span><span class="s">"projectNumber"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"billingcostcentre"</span><span class="o">:</span><span class="x"> </span><span class="s">"CLSA"</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/workspaces/A358845BF004C113?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"projectName"</span><span class="o">:</span><span class="x"> </span><span class="s">"Critical Incident Management"</span><span class="p">,</span><span class="x">
      </span><span class="s">"projectNumber"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"A"</span><span class="p">,</span><span class="x">
      </span><span class="s">"billingcostcentre"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/workspaces/B7BFEF555F0F7F81?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">}</span><span class="x">
   </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>You will need to supply one of the following headers (for retrieving JSON or XML):</p>

<ul>
<li>Accept: application/vnd.whispir.workspace-v1+xml</li>
<li>Accept: application/vnd.whispir.workspace-v1+json</li>
</ul>

<p>An array of Workspaces will be returned to you in the HTTP response body.</p>

<p>Each of these workspace will provide the following information:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">projectName :</td>
            <td><strong>String</strong><br/>
                Specifies the name of the Workspace to be created.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">projectNumber:</td>
            <td><strong>String</strong><br/>
                Specifies the ID of the workspace, generally not used.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">status:</td>
            <td><strong>String</strong><br/>
                Specifies the status of the Workspace being created. The status can be one of - 
                <ul>
                    <li>Active (A)</li>
                    <li>Disabled (D)</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">billingcostcentre:</td>
            <td><strong>String</strong><br/>
                <strong>Only applicable to customers with the Billing Cost Centre Module enabled.</strong> Allows the user to set a billing cost centre for the Workspace.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">link:</td>
            <td><strong>Array</strong><br/>
                Provides a list of URLs that can be used to manipulate or access the workspace. 
                <br>
                <ul>
                    <li>uri - the link to access the message template</li>
                    <li>rel - the descriptor for what the link will do</li>
                    <li>method - the HTTP method to use with this particular link</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

        <h1 id="scenarios">Scenarios</h1>

<p>Scenarios allows users to simplify the message delivery processes through automated one click communications. The process involves creating a fixed message Or a message template combined with a contact or a distribution list. When the scenario is executed, the message is sent to the contacts.</p>

<p>Such use cases are widely useful in emergency notification scenarios where time is of essence. Not just messages (text), one can trigger Email, Voice and Social Media posts too suitable for different target audience as part of the scenario process.</p>

<p><strong>Eg:</strong> &ldquo;A fire outbreak evacuation notification with escape path&rdquo; to all members of the office staff can be done much faster if a ready available message text and the handy distribution list of staff is created as a &ldquo;Scenario&rdquo;. A one click approach here shall trigger the evacuation order to all the staff immediately. No time is lost in composing, selecting the contacts etc. </p>

<p>The contacts can be picked as a static distribution list or a rule based dynamic distribution list, or just direct available numbers. This improves the effectiveness of the scenario&rsquo;s target group reach.</p>

<p>Not just an emergency, but any scenario where a fixed content/Rich Message has to be sent to a pool of contacts, Whispir&rsquo;s &ldquo;Scenario&rdquo; comes very handy.</p>

<p>The following Content-Types are supported:</p>

<ul>
<li>application/vnd.whispir.scenario-v1+xml</li>
<li>application/vnd.whispir.scenario-v1+json</li>
</ul>

<h2 id="creating-a-scenario">Creating a Scenario</h2>

<blockquote>
<p>Creating Scenario</p>

<blockquote>
<p>The following API calls allow users to create Scenarios using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/scenarios?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf
</code></pre>
<pre><code class="highlight xml">Content-Type: application/vnd.whispir.scenario-v1+xml 

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:scenario</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Fire Evacuation Block A<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;description&gt;</span>Fire evacuation notification for A block residents<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;message&gt;</span>
        <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
        <span class="nt">&lt;subject&gt;</span>Fire Evacuation<span class="nt">&lt;/subject&gt;</span>
        <span class="nt">&lt;body&gt;</span>A fire has been detected at level 55. Please evacuate the building immediately. Please do not use the lifts.<span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/message&gt;</span>
<span class="nt">&lt;/ns2:scenario&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">scenario</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
    </span><span class="s">"title"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fire Evacuation Block A"</span><span class="p">,</span><span class="x">
    </span><span class="s">"description"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fire evacuation notification for A block residents"</span><span class="p">,</span><span class="x">
    </span><span class="s">"message"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="s">"to"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
        </span><span class="s">"subject"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"Fire Evacuation"</span><span class="p">,</span><span class="x">
        </span><span class="s">"body"</span><span class="x"> </span><span class="o">:</span><span class="x"> </span><span class="s">"A fire has been detected at level 55. Please evacuate the building immediately. Please do not use the lifts."</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<blockquote>
<blockquote>
<p>This will give a successful response [201] along with the details of newly created scenario.</p>
</blockquote>
</blockquote>

<p>A scenario is a combination of a message and contacts. So, its structure contains section for both message as well as contact information. API currently only supports creation of scenario with SMS as communication mode.</p>

<p>To create a scenario, you can use the /scenarios endpoint.</p>

<p>The following fields are required:</p>

<ol>
<li>name - name of the scenario</li>
<li>description - details of the scenario</li>
<li>message { to, subject, body }</li>
</ol>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the scenario
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the scenario
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">allowedUsers:</td>
            <td><strong>String</strong><br/>
                Specifies the usage permission - 
                <ul>
                    <li>EVERYONE</li>
                    <li>SELECTEDUSERS</li>
                </ul>
                <br>
                When SELECTEDUSERS is provided, then `allowedUserIds` shall contain the userID of the allowed users.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">allowedUserIds:</td>
            <td><strong>String</strong><br/>
                Specifies the comma separated list of users who can run this scenario.
                <br>
                Only contains value when the allowedUsers is set to `SELECTEDUSERS`
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">message:</td>
            <td><strong>Object</strong><br/>
                Specifies the messaging options 
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">to:</td>
            <td><strong>String</strong><br/>
                Specifies the phone number or mri or distribution list to which the message has to be sent
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the subject of the message
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">body:</td>
            <td><strong>String</strong><br/>
                Specifies the body of the message
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">label:</td>
            <td><strong>String</strong><br/>
                Specifies the label for the message (to view during reporting)
            </td>
        </tr>
        
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>Object</strong><br/>
                Email message that can be sent as part of this scenario
                <br>
                <ul>
                    <li>body: The main content of the email</li>
                    <li>footer: footer of the email</li>
                    <li>type: text/plain or text/html</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voice:</td>
            <td><strong>Object</strong><br/>
                Similar to a text message, a voice call can also be triggered. This provides the necessary information for the channel.
                <br>
                <ul>
                    <li>header: header for message. This will be played before the subject</li>
                    <li>body: The main content of the message</li>
                    <li>footer: footer for the message. Played after the body. Usually contains a thank you note.</li>
                    <li>type: ConfCall:,ConfAccountNo:,ConfPinNo:,ConfModPinNo:,Pin:</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">web:</td>
            <td><strong>Object</strong><br/>
                Refer to <a href="https://whispir.github.io/api/?xml#web-and-social-messaging" title="web and social media messaging">web messaging</a>.
                The web message structure remains exactly the same
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">social:</td>
            <td><strong>Object</strong><br/>
                Refer to <a href="https://whispir.github.io/api/?xml#web-and-social-messaging" title="web and social media messaging">web messaging</a>
                The social message structure remains exactly the same
            </td>
        </tr>
    </tbody>
</table>

<h2 id="retrieving-scenarios">Retrieving Scenarios</h2>

<blockquote>
<p>Retrieving Scenario</p>

<blockquote>
<p>The following API calls allow users to retrieve scenarios using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/scenarios?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.scenario-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:return</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com/dap"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;status&gt;</span>1 to 2 of 2<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;ns2:scenarios&gt;</span>
        <span class="nt">&lt;ns2:scenario&gt;</span>
            <span class="nt">&lt;title&gt;</span>Emergency Comms - Fire<span class="nt">&lt;/title&gt;</span>
            <span class="nt">&lt;description&gt;</span>Scenario to use during fire evacuation<span class="nt">&lt;/description&gt;</span>
            <span class="nt">&lt;createdTime&gt;</span>2015-07-20T17:18:58+08:00<span class="nt">&lt;/createdTime&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:scenario&gt;</span>
        <span class="nt">&lt;ns2:scenario&gt;</span>
            <span class="nt">&lt;title&gt;</span>Scenario X<span class="nt">&lt;/title&gt;</span>
            <span class="nt">&lt;description&gt;</span>This is a scenario where a scenario is created<span class="nt">&lt;/description&gt;</span>
            <span class="nt">&lt;createdTime&gt;</span>2015-07-20T17:19:41+08:00<span class="nt">&lt;/createdTime&gt;</span>
            <span class="nt">&lt;ns2:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/scenarios/6EE7F6F2E48B73B4?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/ns2:scenario&gt;</span>
    <span class="nt">&lt;/ns2:scenarios&gt;</span>
<span class="nt">&lt;/ns2:return&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">scenario</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"scenarios"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"title"</span><span class="o">:</span><span class="x"> </span><span class="s">"Emergency Comms - Fire"</span><span class="p">,</span><span class="x">
      </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"Scenario to use during fire evacuation"</span><span class="p">,</span><span class="x">
      </span><span class="s">"createdTime"</span><span class="o">:</span><span class="x"> </span><span class="m">1437383938000</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"title"</span><span class="o">:</span><span class="x"> </span><span class="s">"Scenario X"</span><span class="p">,</span><span class="x">
      </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"This is a scenario where a scenario is created"</span><span class="p">,</span><span class="x">
      </span><span class="s">"createdTime"</span><span class="o">:</span><span class="x"> </span><span class="m">1437383981000</span><span class="p">,</span><span class="x">
      </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/scenarios/6EE7F6F2E48B73B4?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
          </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
          </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">}],</span><span class="x">
  </span><span class="s">"status"</span><span class="o">:</span><span class="x"> </span><span class="s">"1 to 2 of 2"</span><span class="p">,</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>To retrieve a list of scenarios from the Whispir.io API you can execute an HTTP GET using the /scenarios endpoint.</p>

<p>You will need to supply one of the following headers (for retrieving JSON or XML):</p>

<ul>
<li>Accept: application/vnd.whispir.sceario-v1+xml</li>
<li>Accept: application/vnd.whispir.scenario-v1+json</li>
</ul>

<p>An array of Scenarios will be returned to you in the HTTP response body.</p>

<p>Each of these scenarios will provide the following information:</p>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Response Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the scenario.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description:</td>
            <td><strong>String</strong><br/>
                Specifies the broad description of the scenario.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">createdTime:</td>
            <td><strong>Number</strong><br/>
                Specifies the scenario created time value in Epoch
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">link:</td>
            <td><strong>Array</strong><br/>
                Provides a list of URLs that can be used to manipulate or access the scenario.
                <ul>
                  <li>uri - the link to access the scenario</li>
                  <li>rel - the descriptor for what the link will do</li>
                  <li>method - the HTTP method to use with this particular link</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<p>While that specifies the master list, doing a GET on a single scenario provides the following information - </p>

<blockquote>
<p>Retrieving details of a single Scenario</p>

<blockquote>
<p>Retrieving a single scenario details needs the ID of the scenario</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 GET https://api.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.scenario-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:scenario</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Emergency Comms - Fire<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;description&gt;</span>Scenario to use during fire evacuation<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;createdTime&gt;</span>2015-07-20T17:18:58+08:00<span class="nt">&lt;/createdTime&gt;</span>
    <span class="nt">&lt;allowedUsers&gt;</span>EVERYONE<span class="nt">&lt;/allowedUsers&gt;</span>
    <span class="nt">&lt;message&gt;</span>
        <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
        <span class="nt">&lt;subject&gt;</span>Scenario Emergency Comms - Fire<span class="nt">&lt;/subject&gt;</span>
        <span class="nt">&lt;body&gt;</span>sms test<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;label&gt;&lt;/label&gt;</span>
        <span class="nt">&lt;voice/&gt;</span>
        <span class="nt">&lt;from&gt;</span>joe.bloggs.company@Contact.Melbourne.whispir.au<span class="nt">&lt;/from&gt;</span>
        <span class="nt">&lt;social&gt;</span>
            <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"socialType"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;body&gt;</span>text/plain<span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;/social&gt;</span>
        <span class="nt">&lt;/social&gt;</span>
        <span class="nt">&lt;createdTime&gt;</span>2015-07-22T20:48:31+08:00<span class="nt">&lt;/createdTime&gt;</span>
    <span class="nt">&lt;/message&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"self"</span> <span class="na">method=</span><span class="s">"GET"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"updateScenario"</span> <span class="na">method=</span><span class="s">"PUT"</span> <span class="na">type=</span><span class="s">"application/vnd.whispir.scenario-v1+json,application/vnd.whispir.scenario-v1+xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;ns3:link</span> <span class="na">uri=</span><span class="s">"https://api.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span> <span class="na">rel=</span><span class="s">"deleteScenario"</span> <span class="na">method=</span><span class="s">"DELETE"</span> <span class="na">type=</span><span class="s">"application/vnd.whispir.scenario-v1+json,application/vnd.whispir.scenario-v1+xml"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ns2:scenario&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">scenario</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"title"</span><span class="o">:</span><span class="x"> </span><span class="s">"Emergency Comms - Fire"</span><span class="p">,</span><span class="x">
  </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"Scenario to use during fire evacuation"</span><span class="p">,</span><span class="x">
  </span><span class="s">"createdTime"</span><span class="o">:</span><span class="x"> </span><span class="m">1437383938000</span><span class="p">,</span><span class="x">
  </span><span class="s">"allowedUsers"</span><span class="o">:</span><span class="x"> </span><span class="s">"EVERYONE"</span><span class="p">,</span><span class="x">
  </span><span class="s">"message"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"Scenario Emergency Comms - Fire"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"sms test"</span><span class="p">,</span><span class="x">
    </span><span class="s">"label"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="o">:</span><span class="x"> </span><span class="p">{},</span><span class="x">
    </span><span class="s">"from"</span><span class="o">:</span><span class="x"> </span><span class="s">"joe.bloggs.company@Contact.Melbourne.whispir.au"</span><span class="p">,</span><span class="x">
    </span><span class="s">"social"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"social"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"socialType"</span><span class="p">,</span><span class="x">
          </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="s">"createdTime"</span><span class="o">:</span><span class="x"> </span><span class="m">1437569311000</span><span class="p">,</span><span class="x">
  </span><span class="p">},</span><span class="x">
  </span><span class="s">"link"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"self"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"GET"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"updateScenario"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"PUT"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.scenario-v1+json,application/vnd.whispir.scenario-v1+xml"</span><span class="x">
    </span><span class="p">},</span><span class="x">
    </span><span class="p">{</span><span class="x">
      </span><span class="s">"uri"</span><span class="o">:</span><span class="x"> </span><span class="s">"https://api.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]"</span><span class="p">,</span><span class="x">
      </span><span class="s">"rel"</span><span class="o">:</span><span class="x"> </span><span class="s">"deleteScenario"</span><span class="p">,</span><span class="x">
      </span><span class="s">"method"</span><span class="o">:</span><span class="x"> </span><span class="s">"DELETE"</span><span class="p">,</span><span class="x">
      </span><span class="s">"type"</span><span class="o">:</span><span class="x"> </span><span class="s">"application/vnd.whispir.scenario-v1+json,application/vnd.whispir.scenario-v1+xml"</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">]</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">Response Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the scenario
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the scenario
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">createdTime:</td>
            <td><strong>Number</strong><br/>
                Specifies the scenario created time value in Epoch
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">allowedUsers:</td>
            <td><strong>String</strong><br/>
                Specifies the usage permission - 
                <ul>
                    <li>EVERYONE</li>
                    <li>SELECTEDUSERS</li>
                </ul>
                <br>
                When SELECTEDUSERS is provided, then `allowedUserIds` shall contain the userID of the allowed users.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">allowedUserIds:</td>
            <td><strong>String</strong><br/>
                Specifies the comma separated list of users who can run this scenario.
                <br>
                Only contains value when the allowedUsers is set to `SELECTEDUSERS`
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">message:</td>
            <td><strong>Object</strong><br/>
                Specifies the messaging options 
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">to:</td>
            <td><strong>String</strong><br/>
                Specifies the phone number or mri or distribution list to which the message has to be sent
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the subject of the message
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">body:</td>
            <td><strong>String</strong><br/>
                Specifies the body of the message
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">label:</td>
            <td><strong>String</strong><br/>
                Specifies the label for the message (to view during reporting)
            </td>
        </tr>
        
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>Object</strong><br/>
                Email message that can be sent as part of this scenario
                <br>
                <ul>
                    <li>body: The main content of the email</li>
                    <li>footer: footer of the email</li>
                    <li>type: text/plain or text/html</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voice:</td>
            <td><strong>Object</strong><br/>
                Similar to a text message, a voice call can also be triggered. This provides the necessary information for the channel.
                <br>
                <ul>
                    <li>header: header for message. This will be played before the subject</li>
                    <li>body: The main content of the message</li>
                    <li>footer: footer for the message. Played after the body. Usually contains a thank you note.</li>
                    <li>type: ConfCall:,ConfAccountNo:,ConfPinNo:,ConfModPinNo:,Pin:</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">web:</td>
            <td><strong>Object</strong><br/>
                Refer to <a href="https://whispir.github.io/api/?xml#web-and-social-messaging" title="web and social media messaging">web messaging</a>.
                The web message structure remains exactly the same
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">social:</td>
            <td><strong>Object</strong><br/>
                Refer to <a href="https://whispir.github.io/api/?xml#web-and-social-messaging" title="web and social media messaging">web messaging</a>
                The social message structure remains exactly the same
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">from:</td>
            <td><strong>String</strong><br/>
                The user/contact from whom this communication will be sent out when the scenario is run. <br>
                <b>Eg: </b> joe.bloggs.company@Contact.Melbourne.whispir.au
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">link:</td>
            <td><strong>Array</strong><br/>
                Provides a list of URLs that can be used to manipulate or access the scenario.
                <ul>
                  <li>uri - the link to access the scenario</li>
                  <li>rel - the descriptor for what the link will do</li>
                  <li>method - the HTTP method to use with this particular link</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h2 id="running-a-scenario">Running a Scenario</h2>

<blockquote>
<p>Running a Scenario</p>

<blockquote>
<p>A simple POST call to the scenarios endpoint with the scenario ID triggers the scenario execution</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 POST https://api.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf

&gt;&gt; The expected response to this call is an HTTP 204 - No Content.
</code></pre>

<p>Running a Scenario , in other words, invoking a scenario triggers the communication to the intended recipients. The message (static or dynamic) will be sent on all the provided channels.</p>

<p>Running a scenario is very simple to do. The specific scenario has to called via a /POST request.</p>

<p>Step wise example -</p>

<ol>
<li>Get all the scenarios</li>
<li>Pick the required scenario&rsquo;s link attribute</li>
<li>Make a /POST call</li>
</ol>

<p>From the retrieving scenarios call above, we can get all the scenarios in the workspace. Choosing the <code class="prettyprint">Emergency Comms - Fire</code> named Scenario, the link provided is <code class="prettyprint">https://api.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]</code></p>

<p>Now invoking this scenario is just making a /POST call.  There is no need for a <code class="prettyprint">Content-type</code> header as the payload is empty.</p>

<h2 id="updating-a-scenario">Updating a Scenario</h2>

<p>To update existing scenario, you can use a PUT request the /scenarios endpoint.</p>

<blockquote>
<p>Updating a Scenario</p>

<blockquote>
<p>The following API calls allow users to update Scenarios using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 PUT https://api.whispir.com/scenarios/F0547F6F2E4839F8?apikey=[your_api_key]
Authorization: Basic am9obi5zbWl0aDpteXBhc3N3b3Jk
</code></pre>
<pre><code class="highlight xml">Accept: application/vnd.whispir.scenario-v1+xml

<span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;ns2:scenario</span> <span class="na">xmlns:ns2=</span><span class="s">"http://schemas.api.whispir.com"</span> <span class="na">xmlns:ns3=</span><span class="s">"http://schemas.api.whispir.com/dap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Emergency Comms - Fire<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;description&gt;</span>Scenario to use during fire evacuation<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;allowedUsers&gt;</span>EVERYONE<span class="nt">&lt;/allowedUsers&gt;</span>
    <span class="nt">&lt;message&gt;</span>
        <span class="nt">&lt;to&gt;</span>$mobile<span class="nt">&lt;/to&gt;</span>
        <span class="nt">&lt;subject&gt;</span>Scenario Emergency Comms - Fire<span class="nt">&lt;/subject&gt;</span>
        <span class="nt">&lt;body&gt;</span>Evacuate the building Immediately. Do not use the lifts.<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;label&gt;&lt;/label&gt;</span>
        <span class="nt">&lt;voice/&gt;</span>
        <span class="nt">&lt;from&gt;</span>joe.bloggs.company@Contact.Melbourne.whispir.au<span class="nt">&lt;/from&gt;</span>
        <span class="nt">&lt;social&gt;</span>
            <span class="nt">&lt;social</span> <span class="na">id=</span><span class="s">"socialType"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;body&gt;</span>text/plain<span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;/social&gt;</span>
        <span class="nt">&lt;/social&gt;</span>
    <span class="nt">&lt;/message&gt;</span>
<span class="nt">&lt;/ns2:scenario&gt;</span>
</code></pre>
<pre><code class="highlight go"><span class="n">Accept</span><span class="o">:</span><span class="x"> </span><span class="n">application</span><span class="o">/</span><span class="n">vnd</span><span class="o">.</span><span class="n">whispir</span><span class="o">.</span><span class="n">scenario</span><span class="o">-</span><span class="n">v1</span><span class="o">+</span><span class="n">json</span><span class="x">

</span><span class="p">{</span><span class="x">
  </span><span class="s">"title"</span><span class="o">:</span><span class="x"> </span><span class="s">"Emergency Comms - Fire"</span><span class="p">,</span><span class="x">
  </span><span class="s">"description"</span><span class="o">:</span><span class="x"> </span><span class="s">"Scenario to use during fire evacuation"</span><span class="p">,</span><span class="x">
  </span><span class="s">"allowedUsers"</span><span class="o">:</span><span class="x"> </span><span class="s">"EVERYONE"</span><span class="p">,</span><span class="x">
  </span><span class="s">"message"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="s">"to"</span><span class="o">:</span><span class="x"> </span><span class="s">"$mobile"</span><span class="p">,</span><span class="x">
    </span><span class="s">"subject"</span><span class="o">:</span><span class="x"> </span><span class="s">"Scenario Emergency Comms - Fire"</span><span class="p">,</span><span class="x">
    </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"Evacuate the building Immediately. Do not use the lifts."</span><span class="p">,</span><span class="x">
    </span><span class="s">"label"</span><span class="o">:</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x">
    </span><span class="s">"voice"</span><span class="o">:</span><span class="x"> </span><span class="p">{},</span><span class="x">
    </span><span class="s">"from"</span><span class="o">:</span><span class="x"> </span><span class="s">"joe.bloggs.company@Contact.Melbourne.whispir.au"</span><span class="p">,</span><span class="x">
    </span><span class="s">"social"</span><span class="o">:</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="s">"social"</span><span class="o">:</span><span class="x"> </span><span class="p">[</span><span class="x">
        </span><span class="p">{</span><span class="x">
          </span><span class="s">"id"</span><span class="o">:</span><span class="x"> </span><span class="s">"socialType"</span><span class="p">,</span><span class="x">
          </span><span class="s">"body"</span><span class="o">:</span><span class="x"> </span><span class="s">"text/plain"</span><span class="x">
        </span><span class="p">}</span><span class="x">
      </span><span class="p">]</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>The following fields are required:</p>

<ol>
<li>name - name of the scenario</li>
<li>description - details of the scenario</li>
<li>message { to, subject, body }</li>
</ol>

<table>
    <thead>
        <tr>
            <th style="width: 50%" colspan="2">High-Level Request Elements</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: right; font-weight: bold;">name:</td>
            <td><strong>String</strong><br/>
                Specifies the name of the scenario
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">description:</td>
            <td><strong>String</strong><br/>
                Specifies the description of the scenario
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">createdTime:</td>
            <td><strong>Number</strong><br/>
                Specifies the scenario created time value in Epoch
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">allowedUsers:</td>
            <td><strong>String</strong><br/>
                Specifies the usage permission - 
                <ul>
                    <li>EVERYONE</li>
                    <li>SELECTEDUSERS</li>
                </ul>
                <br>
                When SELECTEDUSERS is provided, then `allowedUserIds` shall contain the userID of the allowed users.
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">allowedUserIds:</td>
            <td><strong>String</strong><br/>
                Specifies the comma separated list of users who can run this scenario.
                <br>
                Only contains value when the allowedUsers is set to `SELECTEDUSERS`
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">message:</td>
            <td><strong>Object</strong><br/>
                Specifies the messaging options 
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">to:</td>
            <td><strong>String</strong><br/>
                Specifies the phone number or mri or distribution list to which the message has to be sent
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">subject:</td>
            <td><strong>String</strong><br/>
                Specifies the subject of the message
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">body:</td>
            <td><strong>String</strong><br/>
                Specifies the body of the message
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">label:</td>
            <td><strong>String</strong><br/>
                Specifies the label for the message (to view during reporting)
            </td>
        </tr>
        
        <tr>
            <td style="text-align: right; font-weight: bold;">email:</td>
            <td><strong>Object</strong><br/>
                Email message that can be sent as part of this scenario
                <br>
                <ul>
                    <li>body: The main content of the email</li>
                    <li>footer: footer of the email</li>
                    <li>type: text/plain or text/html</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">voice:</td>
            <td><strong>Object</strong><br/>
                Similar to a text message, a voice call can also be triggered. This provides the necessary information for the channel.
                <br>
                <ul>
                    <li>header: header for message. This will be played before the subject</li>
                    <li>body: The main content of the message</li>
                    <li>footer: footer for the message. Played after the body. Usually contains a thank you note.</li>
                    <li>type: ConfCall:,ConfAccountNo:,ConfPinNo:,ConfModPinNo:,Pin:</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">web:</td>
            <td><strong>Object</strong><br/>
                Refer to <a href="https://whispir.github.io/api/?xml#web-and-social-messaging" title="web and social media messaging">web messaging</a>.
                The web message structure remains exactly the same
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">social:</td>
            <td><strong>Object</strong><br/>
                Refer to <a href="https://whispir.github.io/api/?xml#web-and-social-messaging" title="web and social media messaging">web messaging</a>
                The social message structure remains exactly the same
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-weight: bold;">from:</td>
            <td><strong>String</strong><br/>
                The user/contact from whom this communication will be sent out when the scenario is run. <br>
                <b>Eg: </b> joe.bloggs.company@Contact.Melbourne.whispir.au
            </td>
        </tr>
    </tbody>
</table>

<h2 id="deleting-a-scenario">Deleting a Scenario</h2>

<blockquote>
<p>Deleting a Scenario</p>

<blockquote>
<p>The following API calls allow users to delete Scenarios using the Whispir API.</p>
</blockquote>
</blockquote>
<pre><code class="highlight plaintext">HTTP 1.1 DELETE https://api.whispir.com/scenarios/6EE7F6F2E48B73B4?apikey=[your_api_key]
Authorization: Basic asdf98nf89asdvasd2r398h8sdf

&gt;&gt; The expected response to this call is an HTTP 204 - No Content.
</code></pre>

<p>Deleting a Scenario can be done via a DELETE call to the /scenarios endpoint. The request has to be targeted at a particular Scenario with the Scenario ID in the URI.</p>

        <h1 id="other-resources">Other Resources</h1>

<aside class="notice">
    Updated 7 July 2015
</aside>

<p>This API documentation is being migrated from <a href="https://developer.whispir.com/docs">https://developer.whispir.com/docs</a>.</p>

<p>If the information about the resource you are looking for is not yet listed here, please check the previous documentation.</p>

<p>If you still cannot find the information you&rsquo;re after, please send us an email at <a href="mailto:support@whispir.io">support@whispir.io</a></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="go">json</a>
                <a href="#" data-language-name="xml">xml</a>
          </div>
      </div>
    </div>
    
  </body>
</html>
